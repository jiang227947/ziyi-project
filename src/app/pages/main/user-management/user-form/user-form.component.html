<div class="form-content">
  <nz-breadcrumb>
    <nz-breadcrumb-item>用户管理</nz-breadcrumb-item>
    <nz-breadcrumb-item>
      <a>用户列表</a>
    </nz-breadcrumb-item>
    <nz-breadcrumb-item>新增用户</nz-breadcrumb-item>
  </nz-breadcrumb>
  <form nz-form [formGroup]="userForm" (ngSubmit)="submit()" class="form">
    <div nz-row nzGutter="24">
      <div nz-col nzXs="24" nzSm="24" nzMd="8" nzXl="6">
        <nz-form-item>
          <nz-form-label nzRequired nzFor="name" [nzSm]="8" [nzXs]="24">
            登录名
          </nz-form-label>
          <nz-form-control [nzSm]="16" [nzXs]="24" [nzErrorTip]="userNameTpl">
            <input type="text" nz-input formControlName="name" [placeholder]="'请填写登录名'"/>
            <ng-template #userNameTpl let-control>
              <ng-container *ngIf="control.hasError('required')">请填写登录名!</ng-container>
            </ng-template>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired nzFor="name" [nzSm]="8" [nzXs]="24">
            昵称
          </nz-form-label>
          <nz-form-control [nzSm]="16" [nzXs]="24" [nzErrorTip]="userNameTpl">
            <input type="text" nz-input formControlName="userName" [placeholder]="'请填写昵称'"/>
            <ng-template #userNameTpl let-control>
              <ng-container *ngIf="control.hasError('required')">请填写昵称!</ng-container>
            </ng-template>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired nzFor="name" [nzSm]="8" [nzXs]="24">
            密码
          </nz-form-label>
          <nz-form-control [nzSm]="16" [nzXs]="24" [nzErrorTip]="passwordTpl">
            <input type="password" nz-input formControlName="password" [placeholder]="'请填写密码'"/>
            <ng-template #passwordTpl let-control>
              <ng-container *ngIf="control.hasError('required')">请填写密码!</ng-container>
            </ng-template>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired nzFor="name" [nzSm]="8" [nzXs]="24">
            再次输入密码
          </nz-form-label>
          <nz-form-control [nzSm]="16" [nzXs]="24" [nzErrorTip]="errorTpl">
            <input type="password" nz-input formControlName="password2" [placeholder]="'请再次输入密码'"/>
            <ng-template #errorTpl let-control>
              <ng-container *ngIf="control.hasError('required')">请再次输入密码!</ng-container>
              <ng-container *ngIf="control.hasError('confirm')">
                两次密码不一致！
              </ng-container>
            </ng-template>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired nzFor="roleName" [nzSm]="8" [nzXs]="24">
            角色
          </nz-form-label>
          <nz-form-control [nzSm]="16" [nzXs]="24" [nzErrorTip]="roleNameTpl">
            <nz-select formControlName="roleName" style="width: 100%;" (ngModelChange)="roleChange($event)">
              <nz-option *ngFor="let role of roleOption" [nzLabel]="role.label" [nzValue]="role.label"></nz-option>
            </nz-select>
            <ng-template #roleNameTpl let-control>
              <ng-container *ngIf="control.hasError('required')">请选择角色!</ng-container>
            </ng-template>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
  </form>
  <div class="submit-button">
    <button nz-button nzType="primary" [nzLoading]="loading" (click)="submit()" [disabled]="!userForm.valid">提交</button>
    <button nz-button nzType="default" (click)="cancel()">取消</button>
  </div>
</div>
