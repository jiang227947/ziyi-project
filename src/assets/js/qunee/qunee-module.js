;(function(factory, window, document, undefined) {if (typeof define === "function" && (define.amd || define.cmd)) {    define(function(){        return factory(window, document, undefined);    });}else {    window.Q = factory(window, document, undefined);}})(function(l,d,S){function s(t,i,e){if(t.hasChildren()){var n=t._hE||t.getChildren();if(n){for(var o=0,r=(n=n._kZ||n).length;o<r;o++)if(!1===i.call(e,n[o])||!1===s(n[o],i,e))return!1;return!0}}}function n(t,i,e,n){return(n?function t(i,e,n){i=i._kZ||i;var o;for(var r=0,s=i.length;r<s;r++)if((o=i[r]).hasChildren()&&!t(o.children,e,n)||!1===e.call(n,o))return!1;return!0}:function t(i,e,n){i=i._kZ||i;var o;for(var r=0,s=i.length;r<s;r++)if(o=i[r],!1===e.call(n,o)||o.hasChildren()&&!t(o.children,e,n))return!1;return!0})(t,i,e)}function o(t,i,e,n){return(n?function t(i,e,n){i=i._kZ||i;var o;for(var r=i.length,s=r-1;0<=s;s--)if((o=i[s]).hasChildren()&&!t(o.children,e,n)||!1===e.call(n,o))return!1;return!0}:function t(i,e,n){i=i._kZ||i;var o;for(var r=i.length,s=r-1;0<=s;s--)if(o=i[s],!1===e.call(n,o)||o.hasChildren()&&!t(o.children,e,n))return!1;return!0})(t,i,e)}function e(t,i,e){for(var n=(t._kZ||t).slice(0);n.length;){var o,r=n[0];if(n=n.splice(1),!1===i.call(e,r))return!1;r.hasChildren()&&(o=(o=r.children)._kZ||o,n=n.concat(o))}return!0}function a(t,l){function n(t,i){for(var e=t.length,n=i.length,o=e+n,r=new Array(o),s=0,h=0,a=0;a<o;)s!==e&&(h===n||l(t[s],i[h])<=0)?r[a++]=t[s++]:r[a++]=i[h++];return r}function o(t){var i=t.length,e=Math.ceil(i/2);return i<=1?t:n(o(t.slice(0,e)),o(t.slice(e)))}return o(t)}function L(t,i,e,n){t instanceof ot&&(t=t._kZ);for(var o=0,r=(t._kZ||t).length;o<r;o++){if(!1===i.call(e,t[o],o,n))return!1}return!0}function g(t,i,e,n){t instanceof ot&&(t=t._kZ);for(var o=(t._kZ||t).length-1;0<=o;o--){if(!1===i.call(e,t[o],o,n))return!1}return!0}function r(t){if(t.clone instanceof Function)return t.clone(!0);var i,e=[];return L(t,function(t){i=t&&t.clone instanceof Function?t.clone():t,e.push(i)},this),e}function A(t,i,e){e===S||e<0?t.push(i):t.splice(e,0,i)}function w(t,i){var e=t.indexOf(i);return!(e<0||e>=t.length)&&t.splice(e,1)}function h(t,i){var e,n,o,r=t;for(e in i){i.__lookupGetter__?(n=i.__lookupGetter__(e),o=i.__lookupSetter__(e),n||o?(n&&r.__defineGetter__(e,n),o&&r.__defineSetter__(e,o)):r[e]=i[e]):r[e]=i[e]}return r}function t(t,i,e){if(!(t instanceof Function))throw new Error("subclass must be type of Function");var n=null;"object"==typeof i&&(n=i,i=t,t=function(){i.apply(this,arguments)});function o(){}var r=t.prototype;return o.prototype=i.prototype,t.prototype=new o,t.superclass=i.prototype,t.superclass.constructor=i,h(t.prototype,r),n&&h(t.prototype,n),e&&h(t.prototype,e),t.prototype.class=t}function _(t,i,e){return v(t,i,"constructor",e)}function v(t,i,e,n){var o=i.superclass;if(o){var r=o[e];return r?r.apply(t,n):void 0}}function u(t,i,e,n){if("constructor"==e)return c(t,i,n);if(i.super_ instanceof Function){var o=i.super_.prototype[e];return o instanceof Function?o.apply(t,n):void 0}}function c(t,i,e){if(i.super_ instanceof Function)return i.super_.apply(t,e)}function f(t,i,e){var n,o,r;if(!(t instanceof Function)&&t instanceof Object)return i=t.super,t.hasOwnProperty("constructor")?(n=t.constructor,delete t.constructor):n=i?function(){i.apply(this,arguments)}:function(){},f(n,i,t);if(i&&!(i instanceof Function)&&i instanceof Object)return f(t,i.super,i);if(i&&(r=i,(o=t).super_=r,o.prototype=Object.create(r.prototype,{super_:{value:r,enumerable:!1},constructor:{value:o,enumerable:!1}})),e){var s,h=t.prototype;for(s in e)h[s]=e[s]}return t}function i(t,i){for(var e=0,n=i.length;e<n;e++){var o=i[e];!function(t,n,i,e,o){var r,s;e?Object.defineProperty(t,n,{value:i,enumerable:!0}):(r={configurable:!0,enumerable:!0},s="$"+n,i!==S&&(t[s]=i),r.get=function(){return this[s]},r.set=function(t){var i=this[s];if(i==t)return!1;var e=new bt(this,n,t,i);return!!this.beforeEvent(e)&&(this[s]=t,o&&o.call(this,t,i),this.onEvent(e),!0)},Object.defineProperty(t,n,r))}(t,o.name||o,o.defaultValue||o.value,o.readOnly,o.onSetting)}}var E=0;if(l.navigator){var p=navigator.userAgent,y=/opera/i.test(p),m=!y&&/msie/i.test(p),T=/rv:11.0/i.test(p),O=/MSIE 10./i.test(p);/Edge/i.test(p);if(T&&(m=!0),/msie\s[6,7,8]/i.test(p))throw new Error("your browser is not supported");var I,b=/webkit|khtml/i.test(p),D=!b&&/gecko/i.test(p),C=/firefox\//i.test(p),R=/Chrome\//i.test(p),x=!R&&/Safari\//i.test(p),P=/Macintosh;/i.test(p),N=/(iPad|iPhone|iPod)/g.test(p),M=/Android/g.test(p),B=/Windows Phone/g.test(p),G=(N||M||B)&&"ontouchstart"in l,k=p.match(/AppleWebKit\/([0-9\.]*)/);k&&1<k.length&&(I=parseFloat(k[1])),M&&(parseFloat(p.match(/Android\s([0-9\.]*)/)[1]),I&&I<=534.3&&0)}function F(t,i){return t.className=i,t}function $(t,i){if(!t.hasOwnProperty("classList")){var e=t.getAttribute("class");if(!e)return F(t,i);for(var n=e.split(" "),o=0,r=n.length;o<r;o++)if(n[o]==i)return;return F(t,e+=" "+i)}t.classList.add(i)}function Y(t,i){if(!t.hasOwnProperty("classList")){var e=t.getAttribute("class");if(!e||!e.indexOf(i))return;for(var n="",o=e.split(" "),r=0,s=o.length;r<s;r++)o[r]!=i&&(n+=o[r]+" ");return F(t,n)}t.classList.remove(i)}function U(t){return!isNaN(t)&&t instanceof Number||"number"==typeof t}function H(t){return t!==S&&(t instanceof String||"string"==typeof t)}function V(t){return Array.isArray(t)}function z(t){(t=t||l.event).preventDefault?t.preventDefault():t.returnValue=!1}function W(t){(t=t||l.event).stopPropagation?t.stopPropagation():t.cancelBubble||(t.cancelBubble=!0)}function K(t){z(t),W(t)}function X(t){return Math.floor(Math.random()*t)}function j(t){return 0<t?Math.floor(t):Math.ceil(t)}function Z(t){return 0<t?Math.ceil(t):Math.floor(t)}function J(t){return t<16777216?"#"+("000000"+t.toString(16)).slice(-6):"rgba("+(t>>16&255)+","+(t>>8&255)+","+(255&t)+","+((t>>24&255)/255).toFixed(2)+")"}function Q(t,i,e){"object"!=typeof e||e.hasOwnProperty("enumerable")||(e.enumerable=!0),Object.defineProperty(t,i,e)}function q(t,i){for(var e in i){var n;"_"!=e[0]&&("object"!=typeof(n=i[e])||n.hasOwnProperty("enumerable")||(n.enumerable=!0))}Object.defineProperties(t,i)}function tt(t,i){i=i||l;for(var e=t.split("."),n=0,o=e.length;n<o;n++){i=i[e[n]]}return i}function it(t){return t instanceof MouseEvent||t instanceof Object&&t.touches!==S}function et(t){l.console&&console.error(t)}l.requestAnimationFrame||(l.requestAnimationFrame=l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame||function(t,i){return l.setTimeout(function(){t()},1e3/60)}),l.cancelAnimationFrame||(l.cancelAnimationFrame=l.webkitCancelAnimationFrame||l.mozCancelAnimationFrame||l.oCancelAnimationFrame||l.msCancelAnimationFrame||function(t){return l.clearTimeout(t)});var nt={SELECTION_TOLERANCE:G?7:4,LABEL_COLOR:"#333"};q(nt,{FONT_STYLE:{get:function(){return this._fontStyle||(this._fontStyle="normal")},set:function(t){this._fontStyle!=t&&(this._fontStyle=t,this._fontChanged=!0)}},FONT_SIZE:{get:function(){return this._fontSize||(this._fontSize=12)},set:function(t){this._fontSize!=t&&(this._fontSize=t,this._fontChanged=!0)}},FONT_FAMILY:{get:function(){return this._fontFamily||(this._fontFamily="Verdana,helvetica,arial,sans-serif")},set:function(t){this._fontFamily!=t&&(this._fontFamily=t,this._fontChanged=!0)}},FONT:{get:function(){return!this._fontChanged&&this._fontChanged!==S||(this._fontChanged=!1,this._font=this.FONT_STYLE+" "+this.FONT_SIZE+"px "+this.FONT_FAMILY),this._font}}});var ot=function(t){this._kZ=[],this._mZ={},t&&this.add(t)};ot.prototype={_kZ:null,_mZ:null,get:function(t){return this.getByIndex(t)},getById:function(t){return this._mZ[t]},getByIndex:function(t){return this._kZ[t]},forEach:function(t,i,e){return L(this._kZ,t,i,e)},forEachReverse:function(t,i,e){return g(this._kZ,t,i,e)},size:function(){return this._kZ.length},contains:function(t){return this.containsById(t.id)},containsById:function(t){return this._mZ.hasOwnProperty(t)},setIndex:function(t,i){var e=this._kZ.indexOf(t);if(e<0)throw new Error("'"+t.id+"' not exist");return e!=i&&(this._kZ.splice(e,1),this._kZ.splice(i,0,t),!0)},setIndexAfter:function(t,i){var e=this._kZ.indexOf(t);if(e<0)throw new Error("'"+t.id+"' not exist");return e==i?i:e==i+1?i+1:(i<e&&(i+=1),this._kZ.splice(e,1),this._kZ.splice(i,0,t),i)},setIndexBefore:function(t,i){var e=this._kZ.indexOf(t);if(e<0)throw new Error("'"+t.id+"' not exist");return e==i?i:e==i-1?i-1:(e<i&&--i,this._kZ.splice(e,1),this._kZ.splice(i,0,t),i)},indexOf:function(t){return this._kZ.indexOf(t)},getIndexById:function(t){var i=this.getById(t);return i?this._kZ.indexOf(i):-1},add:function(t,i){return V(t)?this._hD(t,i):this._mA(t,i)},addFirst:function(t){return this.add(t,0)},_hD:function(t,i){if(0==t.length)return!1;for(var e=!1,n=0<=i,o=0,r=(t=t._kZ||t).length;o<r;o++){var s=t[o];null!==s&&s!==S&&this._mA(s,i,!0)&&(e=!0,n&&i++)}return e},_mA:function(t,i,e){var n=t.id;return n!==S&&!this.containsById(n)&&(A(this._kZ,t,i),this._mZ[n]=t)},remove:function(t){return V(t)?this._o4R(t):t.id?this._h8(t.id,t):this.removeById(t)},_o4R:function(t){if(0==t.length)return!1;for(var i=!1,e=0,n=(t=t._kZ||t).length;e<n;e++){var o,r=t[e];null!==r&&r!==S&&(r.id===S&&(r=this._mZ[r]),o=r.id,this._h8(o,r,!0)&&(i=!0))}return i},_h8:function(t,i,e){return!(t===S||!this.containsById(t))&&(null!==i&&i!==S||(i=this.getById(t)),delete this._mZ[t],w(this._kZ,i),!0)},removeById:function(t){var i=this._mZ[t];return!!i&&this._h8(t,i)},set:function(t){if(!t||0==t)return this.clear();if(this.isEmpty()||!V(t))return this.clear(),this.add(t);var i,e=[],n={},o=0;return L(t,function(t){this._mZ[t.id]?(n[t.id]=t,o++):e.push(t)},this),o!=this.length&&(i=[],this.forEach(function(t){n[t.id]||i.push(t)},this),i.length&&this._o4R(i)),e.length&&this._hD(e),!0},clear:function(){return!this.isEmpty()&&(this._kZ.length=0,this._mZ={},!0)},toDatas:function(){return this._kZ.slice(0)},isEmpty:function(){return 0==this._kZ.length},valueOf:function(){return this._kZ.length},clone:function(t){var i=new ot;return t?i.add(r(this._kZ)):i.add(this.toDatas()),i}},q(ot.prototype,{datas:{get:function(){return this._kZ}},random:{get:function(){return this._kZ&&this._kZ.length?this._kZ[X(this._kZ.length)]:null}},length:{get:function(){return this._kZ?this._kZ.length:0}}});var rt=2*Math.PI,st=.5*Math.PI,ht=function(t,i,e){t instanceof ht&&(i=t.y,e=(t=t.x).rotate),this.set(t,i,e)},at=function(t,i,e,n){var o=t-e,r=i-n;return Math.sqrt(o*o+r*r)};ht.prototype={x:0,y:0,rotate:S,set:function(t,i,e){this.x=t||0,this.y=i||0,this.rotate=e||0},negate:function(){this.x=-this.x,this.y=-this.y},offset:function(t,i){this.x+=t,this.y+=i},equals:function(t){return this.x==t.x&&this.y==t.y},distanceTo:function(t){return at(this.x,this.y,t.x,t.y)},toString:function(){return"Point("+this.x+", "+this.y+")"},clone:function(){return new ht(this.x,this.y)}},Object.defineProperty(ht.prototype,"distance",{get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}});var lt=function(t,i,e,n){t!==S&&this._nT(t,i,e,n)};function _t(t,i,e){var n,o,r;0==t._o3?(n=-1,r=0,o=i):0==t._o6?(n=0,r=1,o=e):(n=-1/t._o3,o=(t._o3-n)*i+t._o4,r=1);var s=new lt;return s._o3=n,s._o4=o,s._o6=r,s._nX=i,s._nZ=e,s._mS=Math.atan2(n,r),s._o6os=Math.cos(s._mS),s._sin=Math.sin(s._mS),s}function ut(t,i,e,n,o){var r,s,h,a;if(n<i?r=-1:i<n&&(r=1),o<e?s=-1:e<o&&(s=1),!r)return{x:i,y:a=s<0?t.y:t.bottom};if(!s)return{x:h=r<0?t.x:t.right,y:e};var l=(e-o)/(i-n),_=e-l*i,u=r<0?i-t.x:i-t.right,c=s<0?e-t.y:e-t.bottom;return Math.abs(l)>=Math.abs(c/u)?h=((a=s<0?t.y:t.bottom)-_)/l:a=l*(h=r<0?t.x:t.right)+_,{x:h,y:a}}lt.prototype={_nX:null,_nZ:null,_o1:null,_o2:null,_o3:null,_o4:null,_o6:1,_nT:function(t,i,e,n){this._nX=t,this._nZ=i,this._o1=e,this._o2=n,t==e?(this._o3=-1,this._o6=0,this._o4=t):(this._o3=(i-n)/(t-e),this._o4=i-this._o3*t,this._o6=1),this._mS=Math.atan2(this._o2-this._nZ,this._o1-this._nX),this._o6os=Math.cos(this._mS),this._sin=Math.sin(this._mS)},_dM:function(t){return 0==this._o6?Number.NaN:this._o3*t+this._o4},_dN:function(t){return 0==this._o3?Number.NaN:(t-this._o4)/this._o3},_$i:function(t){var i,e,n=t[0],o=t[2],r=t[4],s=t[1],h=t[3],a=t[5],l=this._o3,_=this._o4,u=0==this._o6?(i=Math.sqrt((-l*l*n-l*_)*r+l*l*o*o+2*l*_*o-l*_*n),e=-l*o+l*n,l*r-2*l*o+l*n):(i=Math.sqrt((l*n-s+_)*a+h*h+(-2*l*o-2*_)*h+(l*r+_)*s+(-l*l*n-l*_)*r+l*l*o*o+2*l*_*o-l*_*n),e=-h+s+l*o-l*n,a-2*h+s-l*r+2*l*o-l*n);if(0!=u){var c,d,f,E=(-i+e)/u;return 0<=(f=(i+e)/u)&&f<=1&&(c=$i(f,t)),0<=E&&E<=1&&(d=$i(E,t)),c&&d?[c,d]:c||(d||void 0)}},_3W:function(t,i,e){if(this._o3==t._o3||0==this._o6&&0==t._o6)return null;var n,o,r,s,h,a=0==this._o6?this._o4:0==t._o6?t._o4:(t._o4-this._o4)/(this._o3-t._o3),l=0==this._o3?this._o4:0==t._o3?t._o4:this._o6?this._o3*a+this._o4:t._o3*a+t._o4;if(!i)return{x:a,y:l};e?o=-(n=-i/2):i<(s=-(n=-at(this._nX,this._nZ,a,l))+(o=at(this._o1,this._o2,a,l)))?(n*=h=i/s,o*=h):r=(i-s)/2;var _=this._7N(a,l,n),u=this._7N(a,l,o);return r&&(_._rest=r,u._rest=r),[_,u]},_7N:function(t,i,e){return 0==this._o6?{x:t,y:i+e}:{x:t+e*this._o6os,y:i+e*this._sin}}};function ct(t,i){this.width=t,this.height=i}function dt(t,i,e,n,o,r,s,h){return!(s<=0||h<=0||e<=0||n<=0)&&(h+=r,e+=t,n+=i,((s+=o)<o||t<s)&&(h<r||i<h)&&(e<t||o<e)&&(n<i||r<n))}function ft(t,i,e,n,o,r){return t<=o&&o<=t+e&&i<=r&&r<=i+n}function Et(t,i,e,n,o,r,s,h,a){return a&&(t-=a,i-=a,e+=a+a,n+=a+a),t<=o&&i<=r&&o+s<=t+e&&r+h<=i+n}ct.prototype={width:0,height:0,isEmpty:function(){return this.width<=0||this.height<=0},clone:function(){return new ct(this.width,this.height)},toString:function(){return"Size("+this.width+", "+this.height+")"}};var gt=function(t,i,e,n){t instanceof Object&&!U(t)&&(i=t.y,e=t.width,n=t.height,t=t.x),e===S&&(e=-1),n===S&&(n=-1),this.x=t||0,this.y=i||0,this.width=e,this.height=n};gt.prototype={x:0,y:0,width:-1,height:-1,setByRect:function(t){this.x=t.x||0,this.y=t.y||0,this.width=t.width||0,this.height=t.height||0},set:function(t,i,e,n){this.x=t||0,this.y=i||0,this.width=e||0,this.height=n||0},offset:function(t,i){return this.x+=t,this.y+=i,this},contains:function(t,i,e,n){if(1!=arguments.length)return 2==arguments.length?t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height:Et(this.x,this.y,this.width,this.height,t,i,e||0,n||0);var o;if("object"==typeof t&&("x"in(o=t)&&"y"in o))return this.contains(t.x,t.y,t.width,t.height);throw{message:"arguments error"}},intersectsPoint:function(t,i,e){return!(this.width<=0&&this.height<=0)&&(e?this.intersectsRect(t-e,i-e,2*e,2*e):t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height)},intersectsRect:function(t,i,e,n){return dt(this.x,this.y,this.width,this.height,t,i,e,n)},intersects:function(t,i){return U(t.width)?this.intersectsRect(t.x,t.y,t.width,t.height):this.intersectsPoint(t,i)},intersection:function(t,i,e,n){var o=this.x,r=this.y,s=o,h=r,a=t,l=i;return o<t&&(o=t),r<i&&(r=i),(a+=e)<(s+=this.width)&&(s=a),(l+=n)<(h+=this.height)&&(h=l),h-=r,(s-=o)<0||h<0?null:new gt(o,r,s,h)},addPoint:function(t){this.add(t.x,t.y)},add:function(t,i){if(U(t.width))return this.addRect(t.x,t.y,t.width,t.height);if(U(t.x)&&(i=t.y,t=t.x),this.width<0||this.height<0)return this.x=t,this.y=i,void(this.width=this.height=0);var e=this.x,n=this.y,o=this.width,r=this.height;o+=e,r+=n,t<e&&(e=t),i<n&&(n=i),o<t&&(o=t),r<i&&(r=i),r-=n,(o-=e)>Number.MAX_VALUE&&(o=Number.MAX_VALUE),r>Number.MAX_VALUE&&(r=Number.MAX_VALUE),this.set(e,n,o,r)},addRect:function(t,i,e,n){var o=this.width,r=this.height;(o<0||r<0)&&this.set(t,i,e,n);var s,h,a=e,l=n;a<0||l<0||(o+=s=this.x,r+=h=this.y,t<s&&(s=t),i<h&&(h=i),o<(a+=t)&&(o=a),r<(l+=i)&&(r=l),r-=h,(o-=s)>Number.MAX_VALUE&&(o=Number.MAX_VALUE),r>Number.MAX_VALUE&&(r=Number.MAX_VALUE),this.set(s,h,o,r))},shrink:function(t,i,e,n){return U(t)?n=1==arguments.length?i=e=t||0:2==arguments.length?(e=t||0,i||0):(t=t||0,i=i||0,e=e||0,n||0):(i=t.left||0,e=t.bottom||0,n=t.right||0,t=t.top||0),this.x+=i,this.y+=t,this.width-=i+n,this.height-=t+e,this},grow:function(t,i,e,n){return U(t)?n=1==arguments.length?i=e=t||0:2==arguments.length?(e=t||0,i||0):(t=t||0,i=i||0,e=e||0,n||0):(i=t.left||0,e=t.bottom||0,n=t.right||0,t=t.top||0),this.x-=i,this.y-=t,this.width+=i+n,this.height+=t+e,this},scale:function(t){return this.x*=t,this.y*=t,this.width*=t,this.height*=t,this},isEmpty:function(){return this.width<=0&&this.height<=0},toString:function(){return this.x+" , "+this.y+" , "+this.width+" , "+this.height},union:function(t){var i=this.width,e=this.height;if(i<0||e<0)return new gt(t.x,t.y,t.width,t.height);var n=t.width,o=t.height;if(n<0||o<0)return new gt(this.x,this.y,this.width,this.height);var r=this.x,s=this.y;i+=r,e+=s;var h=t.x,a=t.y;return h<r&&(r=h),a<s&&(s=a),i<(n+=h)&&(i=n),e<(o+=a)&&(e=o),e-=s,(i-=r)>Number.MAX_VALUE&&(i=Number.MAX_VALUE),e>Number.MAX_VALUE&&(e=Number.MAX_VALUE),new gt(r,s,i,e)},clear:function(){this.set(0,0,-1,-1)},equals:function(t){return t&&this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height},clone:function(t,i){return new gt(this.x+(t||0),this.y+(i||0),this.width,this.height)},toArray:function(){return[this.x,this.y,this.width,this.height]},getIntersectionPoint:function(t,i,e,n){return ut(this,t,i,e,n)}},t(gt,ct),gt.equals=function(t,i){return t==i||t&&i&&t.x==i.x&&t.y==i.y&&t.width==i.width&&t.height==i.height},q(gt.prototype,{left:{get:function(){return this.x}},top:{get:function(){return this.y}},bottom:{get:function(){return this.y+this.height}},right:{get:function(){return this.x+this.width}},cx:{get:function(){return this.x+this.width/2}},cy:{get:function(){return this.y+this.height/2}},center:{get:function(){return new ht(this.cx,this.cy)}}}),gt.intersects=dt,gt.intersection=function(t,i,e,n,o,r,s,h){var a=t,l=i,_=o,u=r;return t<o&&(t=o),i<r&&(i=r),(_+=s)<(a+=e)&&(a=_),(u+=h)<(l+=n)&&(l=u),l-=i,(a-=t)<0||l<0?null:new gt(t,i,a,l)},gt.intersectsPoint=ft;function vt(t,i,e,n){1==arguments.length?i=e=n=t:2==arguments.length&&(e=t,n=i),this.set(t,i,e,n)}vt.prototype={top:0,bottom:0,left:0,right:0,set:function(t,i,e,n){this.top=t||0,this.left=i||0,this.bottom=e||0,this.right=n||0},clone:function(){return new vt(this.top,this.left,this.bottom,this.right)},equals:function(t){return t&&this.top==t.top&&this.bottom==t.bottom&&this.left==t.left&&this.right==t.right}};var pt=function(t,i){this.horizontalPosition=t,this.verticalPosition=i};pt.prototype={verticalPosition:!1,horizontalPosition:!1,toString:function(){return(this.horizontalPosition||"")+(this.verticalPosition||"")}},Q(pt.prototype,"sortName",{get:function(){return(this.horizontalPosition||"")+(this.verticalPosition||"")}});var yt="l",mt="r",Tt="t",Ot="b";pt.LEFT_TOP=new pt(yt,Tt),pt.LEFT_MIDDLE=new pt(yt,"m"),pt.LEFT_BOTTOM=new pt(yt,Ot),pt.CENTER_TOP=new pt("c",Tt),pt.CENTER_MIDDLE=new pt("c","m"),pt.CENTER_BOTTOM=new pt("c",Ot),pt.RIGHT_TOP=new pt(mt,Tt),pt.RIGHT_MIDDLE=new pt(mt,"m"),pt.RIGHT_BOTTOM=new pt(mt,Ot);var At=[pt.LEFT_TOP,pt.LEFT_MIDDLE,pt.LEFT_BOTTOM,pt.CENTER_TOP,pt.CENTER_MIDDLE,pt.CENTER_BOTTOM,pt.RIGHT_TOP,pt.RIGHT_MIDDLE,pt.RIGHT_BOTTOM];function St(t,i){var e=Lt(t,i.width,i.height);return e.x+=i.x||0,e.y+=i.y||0,e}function Lt(t,i,e){if(!t)return{x:0,y:0};if(H(t)&&(t=pt.fromString(t)),t.horizontalPosition&&t.verticalPosition){var n,o,r=t.horizontalPosition,s=t.verticalPosition;switch(r){case yt:n=0;break;case mt:n=i;break;default:n=i/2}switch(s){case Tt:o=0;break;case Ot:o=e;break;default:o=e/2}return{x:n,y:o}}if(t.x!==S)return t.byPercent?{x:t.x*i,y:t.y*e}:{x:t.x,y:t.y};throw new Error("Position not be supported - "+t)}Q(pt,"random",{get:function(){return At[X(At.length)]}}),pt.fromString=function(t){for(var i in pt){var e=pt[i];if(e&&"random"!=i&&e instanceof pt&&e.toString()==t)return e}throw new Error("Position not be supported - "+t)};function wt(t,i,e,n,o){this.set(t,i,e,n),this.radius=o}wt.prototype={radius:0,classify:function(t,i,e,n){return t<i?0:t<i+n?1:t<e-n?2:t<e?3:4},intersectsRect:function(t,i,e,n){if(!1===v(this,wt,"intersectsRect",arguments))return!1;var o=this.x,r=this.y,s=o+this.width,h=r+this.height,a=2*radius,l=2*radius,_=Math.min(this.width,Math.abs(a))/2,u=Math.min(this.height,Math.abs(l))/2,c=this.classify(t,o,s,_),d=this.classify(t+e,o,s,_),f=this.classify(i,r,h,u),E=this.classify(i+n,r,h,u);return 2==c||2==d||2==f||2==E||(c<2&&2<d||f<2&&2<E||(t=1==d?t=t+e-(o+_):t-=s-_,i=1==E?i=i+n-(r+u):i-=h-u,(t/=_)*t+(i/=u)*i<=1))},intersectsPoint:function(t,i){if(!1===v(this,wt,"intersectsPoint",arguments))return!1;var e=this.x,n=this.y,o=e+this.width,r=n+this.height;if(t<e||i<n||o<=t||r<=i)return!1;var s=2*radius,h=2*radius,a=Math.min(this.width,Math.abs(s))/2,l=Math.min(this.height,Math.abs(h))/2;return t>=(e+=a)&&t<(e=o-a)||(i>=(n+=l)&&i<(n=r-l)||(t=(t-e)/a)*t+(i=(i-n)/l)*i<=1)},clone:function(){return new wt(this.x,this.y,this.width,this.height,this.radius)}},t(wt,gt);function It(t,i,e,n){this.source=t,this.type=i,this.kind=e,this.value=n}It.prototype={source:null,type:null,kind:null,value:null,toString:function(){return"source: "+this.source+", type: "+this.type+", kind: "+this.kind}};var bt=function(t,i,e,n,o){this.source=t,this.kind=i,this.oldValue=n,this.value=e,this.propertyType=o};bt.prototype={type:"property.change",propertyType:null,toString:function(){return"source: "+this.source+", type: "+this.type+", propertyName: "+this.kind+", oldValue: "+this.oldValue+", value: "+this.value}},t(bt,It),Q(bt.prototype,"propertyName",{get:function(){return this.kind},set:function(t){this.kind=t}});function Dt(t,i,e){this.source=t,this.oldValue=t.parent,this.value=i,this.newIndex=e,this.oldValue&&(this.oldIndex=this.oldValue.getChildIndex(t))}Dt.prototype={kind:"parent"},t(Dt,bt);function Ct(t,i){this.source=t,this.value=i}Ct.prototype.kind="child.add",t(Ct,bt);function Rt(t,i){this.source=t,this.value=i}Rt.prototype.kind="child.remove",t(Rt,bt);function xt(t,i,e,n){this.source=i,this.oldValue=e,this.value=n,this.parent=t,this.child=i,this.oldIndex=e,this.newIndex=n}xt.prototype.kind="child.index",t(xt,bt);function Pt(){}Pt.prototype={listener:null,beforeEvent:function(t){return null==this.listener||!this.listener.beforeEvent||this.listener.beforeEvent(t)},onEvent:function(t){null!=this.listener&&this.listener.onEvent&&this.listener.onEvent(t)}};function Nt(t,i){this.listener=t,this.scope=i,t instanceof Function?this.onEvent=t:(this.onEvent=t.onEvent,this.beforeEvent=t.beforeEvent),this.equals=function(t){return t&&this.listener==t.listener&&this.scope==t.scope}}var Mt=function(){_(this,Mt,arguments),this.events={},this.listeners=[]};Nt.prototype={equals:function(t){return t&&this.listener==t.listener&&this.scope==t.scope},destroy:function(){delete this.scope,delete this.listener}},Mt.prototype={listeners:null,_o65:function(){return this.listeners&&0<this.listeners.length},_7O:function(t,i){return t instanceof Mt?t:new Nt(t,i)},_o3Q:function(t,i){if(t instanceof Mt)return this.listeners.indexOf(t);for(var e=this.listeners,n=0,o=e.length;n<o;n++){var r=e[n];if(r.listener==t&&r.scope==i)return n}return-1},contains:function(t,i){return 0<=this._o3Q(t,i)},addListener:function(t,i){if(this.contains(t,i))return!1;this.listeners.push(this._7O(t,i))},removeListener:function(t,i,e){var n=this._o3Q(t,i);0<=n&&this.listeners.splice(n,1)},on:function(t,i){this.addListener(t,i)},un:function(t,i,e){this.removeListener(t,i,e)},onEvent:function(i){if(!this.listeners)return!1;L(this.listeners,function(t){t.onEvent&&(t.scope?t.onEvent.call(t.scope,i):t.onEvent(i))},this)},beforeEvent:function(i){return!this.listeners||L(this.listeners,function(t){return!t.beforeEvent||(t.scope?t.beforeEvent.call(t.scope,i):t.beforeEvent(i))},this)},_eU:function(t){return!1!==this.beforeEvent(t)&&(this.onEvent(t),!0)},clear:function(){this.listeners=[]},destroy:function(){this.clear()}},t(Mt,Pt);function Bt(t,i,e,n,o){this.source=t,this.type="list",this.kind=i,this.data=e,this.index=n,this.oldIndex=o}Bt.prototype={index:-1,oldIndex:-1,toString:function(){return"source: "+this.source+", type: "+this.type+", kind: "+this.kind+", data: "+this.data+", index: "+this.index+", oldIndex: "+this.oldIndex}},t(Bt,It),Bt.KIND_ADD="add",Bt.KIND_REMOVE="remove",Bt.KIND_CLEAR="clear",Bt.KIND_INDEX_CHANGE="index.change";function Gt(){this.id=++E,this._d6={}}Gt.prototype={_d6:null,id:null,get:function(t){return this._d6[t]},set:function(t,i){var e=this.get(t);if(e===i)return!1;var n=new bt(this,t,i,e);return n.propertyType=Li.PROPERTY_TYPE_CLIENT,this._o4Q(t,i,n,this._d6)},_o4Q:function(t,i,e,n){return!1!==this.beforeEvent(e)&&(n=n||this._d6,i===S?delete n[t]:n[t]=i,this.onEvent(e),!0)},remove:function(t){this.set(t,null)},valueOf:function(){return this.id},toString:function(){return this.id},_f3:function(t,i){if(i===S&&(i=-1),this==t||t==this._l7)return!1;if(t&&this==t._l7&&!t._f3(null))return!1;var e,n,o=new Dt(this,t,i);if(!this.beforeEvent(o))return!1;var r,s,h,a=this._l7;return!(t&&(e=new Ct(t,this),!t.beforeEvent(e)))&&(!(null!=a&&(n=new Rt(a,this),!a.beforeEvent(n)))&&(null!=(this._l7=t)&&(s=this,h=i,(r=t).children.add(s,h),r.onChildAdd(s,h)),null!=a&&function(t,i){if(!t._hE)return;t._hE.remove(i),t.onChildRemove(i)}(a,this),this.onEvent(o),null!=t&&t.onEvent(e),null!=a&&a.onEvent(n),this.onParentChanged(a,t),!0))},addChild:function(t,i){var e=t._f3(this,i);return e&&this.onChildAdd(t,i),e},removeChild:function(t){if(!this._hE||!this._hE.contains(t))return!1;var i=t._f3(null);return this.onChildRemove(t),i},toChildren:function(){return this._hE?this._hE.toDatas():null},clearChildren:function(){var t;this._hE&&this._hE.length&&(L(t=this.toChildren(),function(t){t._f3(null)},this),this.onChildrenClear(t))},forEachChild:function(t,i){return!!this.hasChildren()&&this._hE.forEach(t,i)},onChildAdd:function(t,i){},onChildRemove:function(t){},onChildrenClear:function(t){},onParentChanged:function(t,i){},getChildIndex:function(t){return this._hE&&this._hE.length?this._hE.indexOf(t):-1},setChildIndex:function(t,i){if(!this._hE||!this._hE.length)return!1;var e=this._hE.indexOf(t);if(e<0||e==i)return!1;var n=new xt(this,t,e,i);return!1!==this.beforeEvent(n)&&(this._hE.remove(t)&&this._hE.add(t,i),this.onEvent(n),!0)},hasChildren:function(){return this._hE&&0<this._hE.length},getChildAt:function(t){return null==this._hE?null:this._hE._kZ[t]},isDescendantOf:function(t){if(!t.hasChildren())return!1;for(var i=this.parent;null!=i;){if(t==i)return!0;i=i.parent}return!1},firePropertyChangeEvent:function(t,i,e,n){this.onEvent(new bt(this,t,i,e,n))}},t(Gt,Pt),q(Gt.prototype,{childrenCount:{get:function(){return this._hE?this._hE.length:0}},children:{get:function(){return this._hE||(this._hE=new ot),this._hE}},parent:{get:function(){return this._l7},set:function(t){this._f3(t,-1)}},properties:{get:function(){return this._d6},set:function(t){this._d6!=t&&(this._d6=t)}}});function kt(){this._kZ=[],this._mZ={},this._1O=new Mt}kt.prototype={beforeEvent:function(t){return null==this._1O||!this._1O.beforeEvent||this._1O.beforeEvent(t)},onEvent:function(t){this._1O instanceof Function?this._1O(t):null!=this._1O&&this._1O.onEvent&&this._1O.onEvent(t)},_1O:null,setIndex:function(t,i){if(!this.contains(t))throw new Error("'"+t.getId()+"' not exist");var e=this.indexOf(t);if(e==i)return!1;var n=new Bt(this,Bt.KIND_INDEX_CHANGE,t,i,e);return!1!==this.beforeEvent(n)&&(this._kZ.splice(e,1),this._kZ.splice(i,0,t),this.onEvent(n),!0)},_hD:function(t,i){if(0==t.length)return!1;var e=!1,n=0<=i,o=new Bt(this,Bt.KIND_ADD,t,i);if(!1===this.beforeEvent(o))return!1;for(var r=[],s=0,h=(t=t._kZ||t).length;s<h;s++){var a=t[s];null!==a&&a!==S&&this._mA(a,i,!0)&&(r.push(a),e=!0,n&&i++)}return o.data=r,this.onEvent(o),e},_mA:function(t,i,e){if(!1===this.accept(t))return!1;if(e)return v(this,kt,"_mA",arguments);var n=new Bt(this,Bt.KIND_ADD,t,i);return!1!==this.beforeEvent(n)&&(!!v(this,kt,"_mA",arguments)&&(this._m9(t,n),t))},_m9:function(t,i){this.onEvent(i)},_o4R:function(t){if(0==t.length)return!1;var i=new Bt(this,Bt.KIND_REMOVE,t);if(!1===this.beforeEvent(i))return!1;for(var e=[],n=!1,o=0,r=(t=t._kZ||t).length;o<r;o++){var s,h=t[o];null!==h&&h!==S&&(s=h.id||h,h.id===S&&(h=null),this._h8(s,h,!0)&&(e.push(h),n=!0))}return i.data=e,this.onEvent(i),n},_h8:function(t,i,e){if(e)return v(this,kt,"_h8",arguments);var n=new Bt(this,Bt.KIND_REMOVE,i);return!1!==this.beforeEvent(n)&&(!!v(this,kt,"_h8",arguments)&&(this.onEvent(n),!0))},clear:function(){if(this.isEmpty())return!1;var t=new Bt(this,Bt.KIND_CLEAR,this.toDatas());return!1!==this.beforeEvent(t)&&(!!v(this,kt,"clear")&&(this.onEvent(t),!0))},accept:function(t){return!this.filter||!1!==this.filter(t)}},t(kt,ot),Q(kt.prototype,"listChangeDispatcher",{get:function(){return this._1O}});var Ft=function(){_(this,Ft,arguments),this.selectionChangeDispatcher=new Mt,this._selectionModel=new $t(this),this._selectionModel._1O=this.selectionChangeDispatcher,this.dataChangeDispatcher=new Mt,this.dataChangeDispatcher.addListener({beforeEvent:this.beforeDataPropertyChange,onEvent:this.onDataPropertyChanged},this),this.parentChangeDispatcher=new Mt,this.childIndexChangeDispatcher=new Mt,this.$roots=new ot;var o=this;this.$roots.setIndex=function(t,i){if(!o.$roots.contains(t))throw new Error("'"+t.id+"' not exist");var e=o.$roots._kZ.indexOf(t);if(e==i)return!1;o.$roots._kZ.splice(e,1),o.$roots._kZ.splice(i,0,t),o._dCIndexFlag=!0;var n=new xt(o,t,e,i);return o._28(n),!0}};Ft.prototype={selectionModel:null,selectionChangeDispatcher:null,dataChangeDispatcher:null,parentChangeDispatcher:null,roots:null,_m9:function(t,i){t.listener=this.dataChangeDispatcher,t.parent||this.$roots.add(t),this.onEvent(i)},_h8:function(t,i){if(v(this,Ft,"_h8",arguments)){var e;i instanceof Qn?i.disconnect():i instanceof eo&&(e=i.getEdges(),this.remove(e));var n=i.parent;return null==n?this.$roots.remove(i):(n.removeChild(i),n.__79=!0),i.hasChildren()&&this.remove(i.toChildren()),!(i.listener=null)}return!1},_63:function(t){var i=t.source;this.contains(i)&&(null==i.parent?this.$roots.add(i):null==t.oldValue&&this.$roots.remove(i),this.parentChangeDispatcher.onEvent(t))},_28:function(t){this.childIndexChangeDispatcher.onEvent(t)},beforeDataPropertyChange:function(t){return!(t instanceof Dt)||this.parentChangeDispatcher.beforeEvent(t)},onDataPropertyChanged:function(t){if(t instanceof Dt)return this._dCIndexFlag=!0,t.source._dCIndexFlag=!0,void this._63(t);t instanceof xt&&(this._dCIndexFlag=!0,t.source._dCIndexFlag=!0,this._28(t))},toRoots:function(){return this.$roots.toDatas()},_h9:function(t){var i=t._l7,e=i?i._hE:this.$roots,n=e.indexOf(t);if(n<0)throw new Error("data '"+t+"' not exist in the box");return 0==n?i:e.getByIndex(n-1)},_hB:function(t){var i=t._l7,e=i?i._hE:this.$roots,n=e.indexOf(t);if(n<0)throw new Error("data '"+t+"' not exist in the box");return n==e.length-1?i?this._hB(i):null:e.getByIndex(n+1)},forEachByDepthFirst:function(t,i,e){return!!this.$roots.length&&n(this.$roots,t,i,e)},forEachByDepthFirstReverse:function(t,i,e){return!!this.$roots.length&&o(this.$roots,t,i,e)},forEachByBreadthFirst:function(t,i){return!!this.$roots.length&&e(this.$roots,t,i)},forEachByBreadthFirstReverse:function(t,i){return!!this.$roots.length&&function(t,i,e){for(var n=(t._kZ||t).slice(0);n.length;){var o,r=n[n.length-1];if(n=n.splice(0,n.length-1),!1===i.call(e,r))return!1;r.hasChildren()&&(o=(o=r.children)._kZ||o,n=n.concat(o))}return!0}(this.$roots,t,i)},clear:function(){return!!v(this,Ft,"clear")&&(this.$roots.clear(),this.selectionModel.clear(),!0)}},t(Ft,kt),q(Ft.prototype,{selectionModel:{get:function(){return this._selectionModel}},roots:{get:function(){return this.$roots}}});var $t=function(t){_(this,$t),this.box=t,this._o4oxChangeListener={onEvent:function(t){Bt.KIND_REMOVE==t.kind?null!=t.data?this.remove(t.data):null!=t.datas&&this.remove(t.datas):Bt.KIND_CLEAR==t.kind&&this.clear()}},this.box.listChangeDispatcher.addListener(this._o4oxChangeListener,this)};function Yt(t){return t.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(t,i){return i.toUpperCase()})}$t.prototype={box:null,isSelected:function(t){return this.containsById(t.id||t)},select:function(t){return this.add(t)},unselect:function(t){return this.remove(t)},reverseSelect:function(t){return this.contains(t)?this.remove(t):this.add(t)},accept:function(t){return this.box.contains(t)}},t($t,kt);var Ut=null,Ht=null,Vt=function(){if(!d.createElement)return function(t){return t};var e=d.createElement("div").style,n={};return function(t){if(n[t])return n[t];var i=Yt(t);return e[i]!==S||Ht&&e[i=Yt(Ht+i)]!==S?n[t]=i:t}}();function zt(t,i){var e,n,o=t.style;if(!o)return!1;for(e in i)i.hasOwnProperty(e)&&(n=Vt(e))&&(o[n]=i[e]);return t}function Wt(t,i,e){(i=Vt(i))&&(t.style[i]=e)}function Kt(t,i){if(!Ut)return!1;i&&!H(i)&&(i=function(t){var i,e,n="";for(i in t)t.hasOwnProperty(i)&&(e=Vt(i))&&(n+=e.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")+":"+t[i]+";");return n?n.substring(0,n.length-1):n}(i)),Ut.insertRule?Ut.insertRule(t+"{"+i+"}",0):Ut.addRule&&Ut.addRule(t,i,0)}var Xt={};function jt(t,i){var e=t.clientWidth;return e?(i=i||t.getBoundingClientRect()).width/e:1}!function(){if(d.head){for(var t=d.head,i="Webkit Moz O ms Khtml".split(" "),e=0;e<i.length;e++)if(t.style[i[e]+"Transform"]!==S){Ht="-"+i[e].toLowerCase()+"-";break}var n,o=d.createElement("style");for(n in l.createPopup||o.appendChild(d.createTextNode("")),o.type="text/css",o.id="qunee-styles",t.appendChild(o),Ut=o.sheet,Xt){var r,s=Xt[n],h=n,a="";for(r in s)a+=Vt(r)+":"+s[r]+";\n";Kt(h,a)}}}();function Zt(t,i,e,n,o){if(o){var r=function(t){r.handle.call(r.scope,t)};return r.scope=o,r.handle=e,t.addEventListener(i,r,n),r}return t.addEventListener(i,e,n),e}nt.DOUBLE_CLICK_INTERVAL_TIME=200,nt.LONG_PRESS_INTERVAL=800,nt.DELAY_CLICK=!0;var Jt,Qt,qt="ontouchstart"in l,ti=qt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent);ti?Qt="touchstart,touchmove,touchend,touchcancel":(Jt="onmousewheel"in l?"mousewheel":"DOMMouseScroll",Qt="contextmenu,mousedown,mouseup,click,dblclick,mousemove,keydown,keyup,"+Jt,qt&&(Qt+=",touchstart,touchmove,touchend,touchcancel")),Qt=Qt.split(/[\s,]+/);function ii(t){return l.TouchEvent&&t instanceof l.TouchEvent}function ei(t){return nt.DOUBLE_CLICK_INTERVAL_TIME}function K(t){z(t),W(t)}function ni(t){return t.defaultPrevented||!1===t.returnValue}function oi(t){ci._o6urrentItem&&ci._o6urrentItem._3K(t)}function ri(t){ci._o6urrentItem&&(ci._o6urrentItem._5N(t),si(null))}var z=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},W=function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0},si=function(t){ci._o6urrentItem!=t&&(ci._o6urrentItem&&(ci._o6urrentItem.__dragging=!1),ci._o6urrentItem=t)};function hi(t,i){var e,n=t.touches?(e=t.cx,t.cy):(e=t.clientX,t.clientY),o=jt(i);return o&&1!==o&&(e/=o,n/=o),{timeStamp:t.timeStamp,x:e,y:n}}function ai(t,i,e){this._n2=t,this._scope=e,this._handler=i,this._dragPoints=new fi,this._j9()}ai.prototype={_j9:function(){var i,e;this.__kN||(this.__kN=function(t){this._kN(t)}.bind(this),i=this._n2,e=this.__kN,Qt.forEach(function(t){i.addEventListener(t,e,!1)}),G||ci._o4U||(ci._o4U=!0,l.addEventListener("mousemove",oi,!0),l.addEventListener("mouseup",ri,!0)))},_eM:function(){var i,e;this.__kN&&(i=this._n2,e=this.__kN,Qt.forEach(function(t){i.removeEventListener(t,e,!1)}))},_kN:function(t){var i=(t=this._gO(t)).type;!1===this._o4J(t,i)&&this._jA(t,"on"+i)},_1M:function(){this.__longPressTimer&&(clearTimeout(this.__longPressTimer),this.__longPressTimer=null)},_5L:function(t){this.__onLongPressFunction||(this.__onLongPressFunction=function(){this._mHEvent&&(this.__o6ancelClick=!0,this._mHEvent.button?this._jA(this._mHEvent,"onlongpress2"):this._jA(this._mHEvent,"onlongpress"))}.bind(this)),this._1M(),this.__longPressTimer=setTimeout(this.__onLongPressFunction,nt.LONG_PRESS_INTERVAL)},_76:function(t){for(var i,e=0,n=0,o=t.touches.length,r=0;r<o;){var s,h,a,l=t.touches[r++],_=l.clientX,u=l.clientY;2==r&&(s=i[0]-_,h=i[1]-u,a=Math.sqrt(s*s+h*h)),i=[_,u],e+=_,n+=u}t.cx=e/o,t.cy=n/o,t.center={x:t.cx,y:t.cy,clientX:t.cx,clientY:t.cy},t.distance=a},_3I:function(t){this._dragPoints.clear(),this._o3K=hi(t,this._n2)},_4I:function(t,i){switch(i){case"touchstart":W(t),this._76(t),this._3I(t);var e=t.touches.length;this._mHEvent||(this._mHEvent=t,this._jB(t),this.__o6ancelClick=!1,this._5L(t)),1==e&&(this.__mHMulTouchEvent=null),2<=e&&!this.__mHMulTouchEvent&&(this.__mHMulTouchEvent={cx:t.cx,cy:t.cy,distance:t.distance});break;case"touchmove":var n;K(t),this._76(t),2<=(e=t.touches.length)&&this.__mHMulTouchEvent&&(n=this.__mHMulTouchEvent.distance,t._scale=t.distance/n,this.__mHMulTouchEvent.prevScale?t.dScale=t._scale/this.__mHMulTouchEvent.prevScale:t.dScale=t._scale,this.__mHMulTouchEvent.prevScale=t._scale,this.__pinching||(this.__pinching=!0,this._jA(t,"startpinch"))),this.__dragging||(this.__dragging=!0,this._eQ(t)),this._kO(t),this.__pinching&&this._jA(t,"onpinch");break;case"touchend":K(t),(e=t.touches.length)&&(this._76(t),this._3I(t)),e<=1&&(this.__pinching&&(this.__pinching=!1,this._jA(t,"endpinch")),this.__mHMulTouchEvent=null),0==e&&(this.__dragging?(this._jC(t),this.__dragging=!1):t.timeStamp-this._mHEvent.timeStamp<.8*ei()&&this._gQ(this._mHEvent),this._eO(t));break;case"touchcancel":this.__dragging=!1,this.__pinching=!1,this.__mHMulTouchEvent=null}return!1},_o4J:function(t,i){if(ii(t))return this._4I(t,i);if("mousedown"==i)W(t),si(this),this._o3K=hi(t,this._n2),this._mHEvent||(this._mHEvent=t,this._jB(t)),this.__o6ancelClick=!1,this._5L(t);else if("mouseup"==i)si(),this._eO(t);else if("click"==i){if(this.__o6ancelClick)return!0;if(this._9U())return this._gQ(t),!0}else if("dblclick"==i){if(this._9U())return!0}else{if("contextmenu"==i)return this._jA(t,"oncontextmenu"),this._mHEvent&&ni(t)&&si(this),!0;if(i==Jt){var e=t.wheelDelta;if(e!==S?e/=120:e=-t.detail,!e)return;return t.delta=e,this._jA(t,"onmousewheel")}}return!1},_jA:function(t,i){if(this._handler){var e=this._handler;if(i=i||t.type,e instanceof Function)return e(t,i);if(!(e.accept instanceof Function&&!1===e.accept(i,t)))return e.onevent instanceof Function&&e.onevent(i,t,this._scope||this._n2),e[i]instanceof Function?e[i].call(e,t,this._scope||this._n2):void 0}},_gO:function(t){return t},_5N:function(t){this.__dragging&&(K(t),this.__dragging=!1,t=this._gO(t),this._jC(t),this._eO(t),this._jA(t,"onmouseup"))},_3J:4,_3K:function(t){if(this._mHEvent){if(K(t),!this.__dragging){var i=this._mHEvent.screenX-t.screenX,e=this._mHEvent.screenY-t.screenY;if(i*i+e*e<this._3J)return;this.__dragging=!0,this._eQ(t)}this._kO(this._gO(t))}},_9U:function(){return nt.DELAY_CLICK},_gQ:function(t){var i;this.__o6ancelClick||(i=ei(),this.__o6lickTimer?this.__dblclicked||(clearTimeout(this.__o6lickTimer),this.__o6lickTimer=null,this._jA(t,"ondblclick"),this.__dblclicked=!0):(this.__dblclicked=!1,this.__o6lickTimer=setTimeout(function(t,i){this.__o6lickTimer=null,this.__dblclicked||this._jA(t,"onclick")}.bind(this,t,i),i)))},_jB:function(t){t.button?this._jA(t,"onstart2"):this._jA(t,"onstart")},_eO:function(t){this._mHEvent&&(this._1M(),t.button?this._jA(t,"onrelease2"):this._jA(t,"onrelease"),this._mHEvent=null,this._o3K=null)},_78:function(t){var i=this._o3K;this._o3K=hi(t,this._n2),this._dragPoints.add(i,this._o3K,t)},_eQ:function(t){this.__o6ancelClick=!0,this._1M(),this._mHEvent.button?this._jA(this._mHEvent,"startdrag2"):this._jA(this._mHEvent,"startdrag")},_kO:function(t){this._78(t),this._mHEvent.button?this._jA(t,"ondrag2"):this._jA(t,"ondrag")},_jC:function(t){var i;t.timeStamp-this._o3K.timeStamp<100&&((i=this._dragPoints.getCurrentSpeed())&&(t.vx=i.x,t.vy=i.y)),this._mHEvent.button?this._jA(t,"enddrag2"):this._jA(t,"enddrag"),this._dragPoints.clear()},_jD:function(t){this._o4K()},_o4K:function(){ci._o6urrentItem==this&&delete ci._o6urrentItem,this._1M(),delete this._o3K,this._mHEvent&&(delete this._mHEvent.getData,delete this._mHEvent.getUI,delete this._mHEvent)}};var li,_i,ui,ci=f(function(t){this._mE=t,ai.apply(this,[t.canvasPanel,null,t])},{super:ai,_k0:function(t){return this._mE.getElementByMouseEvent(t)},_mF:function(t){return this._mE.getUIByMouseEvent(t)},_gO:function(t){return(t instanceof MouseEvent||l.TouchEvent&&t instanceof l.TouchEvent)&&(t.getData=this._k0.bind(this,t),t.getUI=this._mF.bind(this,t)),t},_4W:function(i){this._4X(function(t){t.onElementRemoved instanceof Function&&t.onElementRemoved(i,this._mE)})},_7Q:function(){this._4X(function(t){t.onClear instanceof Function&&t.onClear(this._mE)})},_jD:function(t){this._1U&&this._2J(this._1U,t),this._$p&&this._2J(this._$p,t),this._o4K()},_mE:null,_1U:null,_$p:null,_7S:function(t){if(this._1U==t)return!1;this._1U&&this._1U.length&&this._2J(this._1U),this._1U=t},_$a:function(t){this._$p||(this._$p=[]),this._$p.push(t)},_4:function(t){this._$p&&0!=this._$p.length&&w(this._$p,t)},_jA:function(t,i,e){this._mE[i]instanceof Function&&this._mE[i].call(this._mE,t,e),this._1U&&this._hQ(t,i,this._1U,e),this._$p&&this._hQ(t,i,this._$p,e)},_4X:function(t){this._1U&&L(this._1U,t,this),this._$p&&L(this._$p,t,this)},_hQ:function(t,i,e,n){if(V(e))for(var o=0;o<e.length;o++){var r=e[o];this._o3S(t,i,r,n)}else this._o3S(t,i,e,n)},_o3S:function(t,i,e,n){var o;e.accept instanceof Function&&!1===e.accept(i,t,this._mE,n)||(e.onevent instanceof Function&&e.onevent(i,t,this._mE,n),(o=e[i])instanceof Function&&o.call(e,t,this._mE,n))},_2Y:function(t){t.destroy instanceof Function&&t.destroy.call(t,this._mE)},_2J:function(t,i){if(V(t))for(var e=0;e<t.length;e++){var n=t[e];n&&this._2Y(n,i)}else this._2Y(t,i)}});function di(t){return P&&t.metaKey||!P&&t.ctrlKey}function fi(){this.points=[]}fi.prototype={limitCount:10,points:null,add:function(t,i,e){0==this.points.length&&(this._mHX=t.x,this._mHY=t.y);var n=i.timeStamp-t.timeStamp||1;e.interval=n;var o=i.x-t.x,r=i.y-t.y;e.dx=o,e.dy=r,e.startX=this._mHX,e.startY=this._mHY,e.totalDeltaX=i.x-this._mHX,e.totalDeltaY=i.y-this._mHY,this.points.splice(0,0,{interval:n,dx:o,dy:r}),this.points.length>this.limitCount&&this.points.pop()},getCurrentSpeed:function(){if(!this.points.length)return null;for(var t=0,i=0,e=0,n=0,o=this.points.length;n<o;n++){var r=this.points[n],s=r.interval;if(150<s){t=0;break}if(t+=s,i+=r.dx,e+=r.dy,300<t)break}return 0==t||0==i&&0==e?null:{x:i/t,y:e/t}},clear:function(){this.points=[]}},ui=b?(li="-webkit-zoom-in",_i="-webkit-zoom-out","-webkit-grabbing"):D?(li="-moz-zoom-in",_i="-moz-zoom-out","-moz-grabbing"):(_i=li="crosshair","move");function Ei(t){this._lI=t}var gi=Math.PI,vi=Math.pow,pi=Math.sin,yi=1.70158,mi={swing:function(t){return-Math.cos(t*gi)/2+.5},easeNone:function(t){return t},easeIn:function(t){return t*t},easeOut:function(t){return(2-t)*t},easeBoth:function(t){return(t*=2)<1?.5*t*t:.5*(1- --t*(t-2))},easeInStrong:function(t){return t*t*t*t},easeOutStrong:function(t){return 1- --t*t*t*t},easeBothStrong:function(t){return(t*=2)<1?.5*t*t*t*t:.5*(2-(t-=2)*t*t*t)},elasticIn:function(t){return 0===t||1===t?t:-(vi(2,10*--t)*pi(2*gi*(t-.075)/.3))},elasticOut:function(t){return 0===t||1===t?t:vi(2,-10*t)*pi(2*gi*(t-.075)/.3)+1},elasticBoth:function(t){return 0===t||2==(t*=2)?t:t<1?vi(2,10*--t)*pi(2*gi*(t-.1125)/.45)*-.5:vi(2,-10*--t)*pi(2*gi*(t-.1125)/.45)*.5+1},backIn:function(t){return 1===t&&(t-=.001),t*t*((yi+1)*t-yi)},backOut:function(t){return--t*t*((yi+1)*t+yi)+1},backBoth:function(t){return(t*=2)<1?t*t*((1+(yi*=1.525))*t-yi)*.5:.5*((t-=2)*t*((1+(yi*=1.525))*t+yi)+2)},bounceIn:function(t){return 1-mi.bounceOut(1-t)},bounceOut:function(t){var i=7.5625,e=t<1/2.75?i*t*t:t<2/2.75?i*(t-=1.5/2.75)*t+.75:t<2.5/2.75?i*(t-=2.25/2.75)*t+.9375:i*(t-=2.625/2.75)*t+.984375;return e},bounceBoth:function(t){return t<.5?.5*mi.bounceIn(2*t):.5*mi.bounceOut(2*t-1)+.5}};Ei.prototype={_lI:null,_98:function(){this._o6allback instanceof Function&&(this._o6allback(),this._o6allback=null)},_mH:function(t){var n=Date.now();this._nA(),this._o6allback=t,this._requestID=requestAnimationFrame(function t(){var i=Date.now(),e=i-n;!e||this._lI&&!1!==this._lI(e)?(n=i,this._requestID=requestAnimationFrame(t.bind(this))):this._nA()}.bind(this))},_7T:function(){},_nA:function(){if(!this._requestID)return!1;this._7T(),this._98(),l.cancelAnimationFrame(this._requestID),delete this._requestID},_fD:function(){return null!=this._requestID}};function Ti(t,i,e,n){this._onStep=t,this._scope=i||this,this._3Y=n,e&&0<e&&(this._k1=e)}Ti.prototype={_k1:1e3,_3Y:null,_fF:0,_nA:function(){return this._fF=0,this._dO=0,v(this,Ti,"_nA")},_dO:0,_lI:function(t){if(this._fF+=t,this._fF>=this._k1)return this._onStep.call(this._scope,1,(1-this._dO)*this._k1,t,this._k1),!1;var i=this._fF/this._k1;if(this._3Y&&(i=this._3Y(i)),!1===this._onStep.call(this._scope,i,(i-this._dO)*this._k1,t,this._k1))return!1;this._dO=i}},t(Ti,Ei);var Oi=function(t){et(t)};function Ai(i,e,n,t,o){!1!==n&&!1!==t||(o=!1);try{var r,s=new XMLHttpRequest,h=encodeURI(i);!1!==o&&(r=0<h.indexOf("?")?"&":"?",h+=r+"__time="+Date.now()),s.open("GET",h),s.onreadystatechange=function(t){4==s.readyState&&(s.status&&200!=s.status?(n||Oi)("'"+i+"' load error"):e&&e(s))},s.send(t)}catch(t){(n||Oi)("'"+i+"' load error",t)}}var Si={version:"0.0",extend:t,doSuperConstructor:_,doSuper:v,createFunction:function(t,i){return i.bind(t)},setClass:F,appendClass:$,removeClass:Y,forEach:L,forEachReverse:g,isNumber:U,isString:H,isBoolean:function(t){return t!==S&&(t instanceof Boolean||"boolean"==typeof t)},isArray:V,eventPreventDefault:z,eventStopPropagation:W,stopEvent:K,callLater:function(t,i,e){return i instanceof Object?t=t.bind(i):i&&!e&&(e=parseInt(i)),i&&!e&&(e=parseInt(i)),e?setTimeout(t,e):setTimeout(t)},nextFrame:function(t,i){return i&&(t=t.bind(i)),l.requestAnimationFrame(t)},forEachChild:s,forEachByDepthFirst:n,forEachByDepthFirstReverse:o,forEachByBreadthFirst:e,randomInt:X,randomBool:function(){return.5<=Math.random()},randomColor:function(t){if(t&&0<t&&t<1){var i=Math.floor(16777215*Math.random());return"rgba("+(i>>16&255)+","+(i>>8&255)+","+(255&i)+","+t.toFixed(2)+")"}return J(Math.floor(16777215*Math.random()))},addEventListener:Zt,getFirstElementChildByTagName:function(t,i){i=i.toUpperCase();for(var e=m?t.firstChild:t.firstElementChild;e&&(1!=e.nodeType||e.tagName&&e.tagName.toUpperCase()!=i);)e=m?e.nextSibling:e.nextElementSibling;return e&&1==e.nodeType&&e.tagName&&e.tagName.toUpperCase()==i?e:null}};Si.isTouchSupport=G,Si.isIOS=N,Si.intersectsPoint=ft,Si.containsRect=Et,Si.Rect=gt,Si.Size=ct,Si.Point=ht,Si.Insets=vt,Si.Event=It,Si.PropertyChangeEvent=bt,Si.ListEvent=Bt,Si.Handler=Pt,Si.Dispatcher=Mt,Si.Position=pt,Si.Data=Gt,Si.SelectionModel=$t,Si.DataModel=Ft,Si.IListener={onEvent:function(t){},beforeEvent:function(t){}},Si.loadURL=Ai,Si.loadXML=function(e,n,o,t,i){Ai(e,function(t){if(n){var i=t.responseXML;if(!i)return void(o||Oi)("'"+e+"' XML format error.");n(i)}},o,t,i)},Si.loadJSON=function(n,o,r,t,i){Ai(n,function(t){if(o){var i,e=t.responseText;if(!e)return(r||Oi)("'"+n+"' JSON format error."),i=new Error("'"+n+"' JSON format error."),o(e,i);try{e=JSON.parse(e)}catch(t){(r||Oi)(t),i=t}o(e,i)}},r,t,i)},Si.isMetaKey=di,Si.calculateDistance=at,Si.HashList=ot,Si.DragSupport=ai,Si.alert=function(t){alert(t)},Si.prompt=function(t,i,e,n){var o=prompt(t,i);return o!=i&&e?e.call(n,o):o},Si.confirm=function(t,i,e){var n=confirm(t);return n&&i?i.call(e):n},Si.addCSSRule=Kt;var Li={IMAGE_ADJUST_FLIP:"flip",IMAGE_ADJUST_MIRROR:"mirror",SELECTION_TYPE_BORDER_RECT:"border.rect",SELECTION_TYPE_BORDER:"border",SELECTION_TYPE_SHADOW:"shadow",NS_SVG:"http://www.w3.org/2000/svg",PROPERTY_TYPE_ACCESSOR:0,PROPERTY_TYPE_STYLE:1,PROPERTY_TYPE_CLIENT:2,EDGE_TYPE_DEFAULT:null,EDGE_TYPE_ELBOW:"elbow",EDGE_TYPE_ELBOW_HORIZONTAL:"elbow.H",EDGE_TYPE_ELBOW_VERTICAL:"elbow.V",EDGE_TYPE_ORTHOGONAL:"orthogonal",EDGE_TYPE_ORTHOGONAL_HORIZONTAL:"orthogonal.H",EDGE_TYPE_ORTHOGONAL_VERTICAL:"orthogonal.V",EDGE_TYPE_HORIZONTAL_VERTICAL:"orthogonal.H.V",EDGE_TYPE_VERTICAL_HORIZONTAL:"orthogonal.V.H",EDGE_TYPE_EXTEND_TOP:"extend.top",EDGE_TYPE_EXTEND_LEFT:"extend.left",EDGE_TYPE_EXTEND_BOTTOM:"extend.bottom",EDGE_TYPE_EXTEND_RIGHT:"extend.right",EDGE_TYPE_ZIGZAG:"zigzag",EDGE_CORNER_NONE:"none",EDGE_CORNER_ROUND:"round",EDGE_CORNER_BEVEL:"bevel",GROUP_TYPE_RECT:"rect",GROUP_TYPE_CIRCLE:"circle",GROUP_TYPE_ELLIPSE:"ELLIPSE",SHAPE_CIRCLE:"oval",SHAPE_RECT:"rect",SHAPE_ROUNDRECT:"roundrect",SHAPE_STAR:"star",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",SHAPE_PENTAGON:"pentagon",SHAPE_TRAPEZIUM:"trapezium",SHAPE_RHOMBUS:"rhombus",SHAPE_PARALLELOGRAM:"parallelogram",SHAPE_HEART:"heart",SHAPE_DIAMOND:"diamond",SHAPE_CROSS:"cross",SHAPE_ARROW_STANDARD:"arrow.standard",SHAPE_ARROW_1:"arrow.1",SHAPE_ARROW_2:"arrow.2",SHAPE_ARROW_3:"arrow.3",SHAPE_ARROW_4:"arrow.4",SHAPE_ARROW_5:"arrow.5",SHAPE_ARROW_6:"arrow.6",SHAPE_ARROW_7:"arrow.7",SHAPE_ARROW_8:"arrow.8",SHAPE_ARROW_OPEN:"arrow.open"};function dt(t,i,e,n,o,r,s,h){return!(s<=0||h<=0||e<=0||n<=0)&&(h+=r,e+=t,n+=i,((s+=o)<o||t<s)&&(h<r||i<h)&&(e<t||o<e)&&(n<i||r<n))}function Et(t,i,e,n,o,r,s,h){return t<=o&&i<=r&&o+s<=t+e&&r+h<=i+n}function wi(t,i,e){return t instanceof Object&&t.x?bi(t,i,0,0):Ii(t,i,e,0,0)}function Ii(t,i,e,n,o){var r=Math.sin(e),s=Math.cos(e),h=t-n,a=i-o;return new ht(t=h*s-a*r+n,i=h*r+a*s+o,e)}function bi(t,i,e,n){e=e||0,n=n||0;var o=Math.sin(i),r=Math.cos(i),s=t.x-e,h=t.y-n;return t.x=s*r-h*o+e,t.y=s*o+h*r+n,t}function Di(t,i,e){return Ci(t,i,e,0,0)}function Ci(t,i,e,n,o){var r=Ii(t.x,t.y,i,n,o),s=Ii(t.x+t.width,t.y,i,n,o),h=Ii(t.x+t.width,t.y+t.height,i,n,o),a=Ii(t.x,t.y+t.height,i,n,o);return e?e.clear():e=new gt,e.addPoint(r),e.addPoint(s),e.addPoint(h),e.addPoint(a),e}Li.LINE_CAP_TYPE_BUTT="butt",Li.LINE_CAP_TYPE_ROUND="round",Li.LINE_CAP_TYPE_SQUARE="square",Li.LINE_JOIN_TYPE_BEVEL="bevel",Li.LINE_JOIN_TYPE_ROUND="round",Li.LINE_JOIN_TYPE_MITER="miter",Li.EDGE_BUNDLE_TYPE_CURVE="curve",Li.EDGE_BUNDLE_TYPE_PARALLEL="parallel",Li.EDGE_BUNDLE_TYPE_ELBOW="elbow",nt.SELECTION_TYPE=Li.SELECTION_TYPE_SHADOW,nt.SELECTION_TOLERANCE=ti?8:3,nt.SELECTION_BORDER=2,nt.SELECTION_SHADOW_BLUR=7,nt.SELECTION_COLOR=J(3422561023),nt.SELECTION_TYPE=Li.SELECTION_TYPE_SHADOW,nt.BORDER_RADIUS=10,nt.POINTER_WIDTH=10,nt.ARROW_SIZE=10,nt.IMAGE_MAX_SIZE=200,nt.LINE_HEIGHT=1.2;var Ri,xi=l.devicePixelRatio||1;function Pi(t,i){var e=this.ratio||1;this.style.width=t+"px",this.style.height=i+"px",this.width=t*e,this.height=i*e}function Ni(t,i,e){var n=d.createElement("canvas");if(n.g=n.getContext("2d"),!0!==t&&!e)return t&&i&&(n.width=t,n.height=i),n;var o,r,s=n.g;return s.ratio=n.ratio=(r=(o=s).webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1,xi/r),n.setSize=Pi,s._mK=function(){this.canvas.width=this.canvas.width},t&&i&&n.setSize(t,i),n}function Mi(t,i){return Ri=Ri||Ni(),t&&i&&(Ri.width=t,Ri.height=i),Ri.g}xi<1&&(xi=1),Si.createCanvas=Ni;var Bi=R&&!G,Gi=9;function ki(t,i,e){return(e||nt.FONT_STYLE)+" "+(i||nt.FONT_SIZE)+"px "+(t||nt.FONT_FAMILY)}function Fi(t,i,e,n,o){var r;try{r=t.getImageData(i,e,n,o)}catch(t){}return r}function $i(t,i,e){var n=1-t,o=n*n*i[0]+2*n*t*i[2]+t*t*i[4],r=n*n*i[1]+2*n*t*i[3]+t*t*i[5];if(e){var s=(i[0]+i[4]-2*i[2])*t+i[2]-i[0],h=(i[1]+i[5]-2*i[3])*t+i[3]-i[1];return{x:o,y:r,rotate:Math.atan2(h,s)}}return{t:t,x:o,y:r}}function Yi(t,i,e){var n=t-2*i+e;return 0!=n?(t-i)/n:-1}function Ui(t,i){return Math.abs(t-i)<1e-7}function Hi(t,i){return Ui(t[0],i[0])&&Ui(t[1],i[1])}function Vi(t){if(Hi([t[0],t[1]],[t[2],t[3]])){var i=t[0],e=t[1],n=t[4],o=t[5],r=Math.sqrt(ji(i,e,n,o));return function(t){return r*t}}if(Hi([t[0],t[1]],[t[4],t[5]])||Hi([t[2],t[3]],[t[4],t[5]])){i=t[0],e=t[1],n=t[2],o=t[3],r=Math.sqrt(ji(i,e,n,o));return function(t){return r*t}}var s=t[0],h=t[2],a=s-2*h+t[4],l=2*h-2*s,_=(s=t[1])-2*(h=t[3])+t[5],u=2*h-2*s,c=4*(a*a+_*_),d=4*(a*l+_*u),f=l*l+u*u;if((r=4*c*f-d*d)<1e-5&&-1e-5<r){var E=at(t[0],t[1],t[2],t[3]),g=at(t[2],t[3],t[4],t[5]);return function(t){return(2*E+(g-E)*t)*t}}var v,p=1/r,y=.125*Math.pow(c,-1.5),m=2*Math.sqrt(c),T=(r*(v=d/Math.sqrt(r),Math.log(v+Math.sqrt(v*v+1)))+Math.sqrt(c)*(2*d)*Math.sqrt(f))*y;return function(t){var i=d+2*t*c,e=i/Math.sqrt(r),n=i*i*p;return(r*Math.log(e+Math.sqrt(1+n))+m*i*Math.sqrt(f+t*d+t*t*c))*y-T}}function zi(t,i,e){var n,o=1-t,r=i[0],s=i[2],h=i[4],a=i[6],l=r*o*o*o+3*s*t*o*o+3*h*t*t*o+a*t*t*t;e&&(n=3*t*t*a+(6*t-9*t*t)*h+(9*t*t-12*t+3)*s+(-3*t*t+6*t-3)*r);var _=(r=i[1])*o*o*o+3*(s=i[3])*t*o*o+3*(h=i[5])*t*t*o+(a=i[7])*t*t*t;if(e){var u=3*t*t*a+(6*t-9*t*t)*h+(9*t*t-12*t+3)*s+(-3*t*t+6*t-3)*r;return{x:l,y:_,rotate:Math.atan2(u,n)}}return{x:l,y:_}}function Wi(t,i){i.add(t[6],t[7]);var e=function(t,i,e,n,o,r,s,h){for(var a,l,_,u,c,d,f,E,g=[],v=0;v<2;++v)if(_=0===v?(l=6*t-12*e+6*o,a=-3*t+9*e-9*o+3*s,3*e-3*t):(l=6*i-12*n+6*r,a=-3*i+9*n-9*r+3*h,3*n-3*i),Math.abs(a)<1e-12){if(Math.abs(l)<1e-12)continue;0<(u=-_/l)&&u<1&&g.push(u)}else f=l*l-4*_*a,E=Math.sqrt(f),f<0||(0<(c=(-l+E)/(2*a))&&c<1&&g.push(c),0<(d=(-l-E)/(2*a))&&d<1&&g.push(d));return g}.apply(this,t);if(e)for(var n=0;n<e.length;n++){var o,r=e[n];r<0||1<r||(o=zi(r,t),i.add(o.x,o.y))}}function Ki(t){function i(t){var i=g*t*t+v*t+p,e=y*t*t+m*t+T;return Math.sqrt(i*i+e*e)}var e=t[0],n=t[1],o=t[2],r=t[3],s=t[4],h=t[5],a=t[6],l=t[7],_=+e,u=+n,c=+o,d=+r,f=+s,E=+h,g=3*(3*c-_-3*f+ +a),v=6*(_-2*c+f),p=3*(c-_),y=3*(3*d-u-3*E+ +l),m=6*(u-2*d+E),T=3*(d-u);return(i(0)+4*i(.5)+i(1))/6}function Xi(t,i,e){return ji(i,e,t.cx,t.cy)<=t._squareR+ie}var ji=function(t,i,e,n){var o=t-e,r=i-n;return o*o+r*r};function Zi(t,i,e,n){var o,r;return e=e||(r=i,at((o=t).x,o.y,r.x,r.y)),new Ji((t.x+i.x)/2,(t.y+i.y)/2,e/2,t,i,null,n)}function Ji(t,i,e,n,o,r,s){this.cx=t,this.cy=i,this.r=e,this._squareR=e*e,this.p1=n,this.p2=o,this.p3=r,this._otherPoint=s}function Qi(t,i,e,n){this.cx=t,this.cy=i,this.width=e,this.height=n}function qi(t){var i=t[0],e=t[1],n=t[2];return function t(i,e,n,o,r){var s=i.length;var h;var a=r._squareR;var l;for(var _=0;_<s;_++){var u;(h=i[_])!=e&&h!=n&&h!=o&&(u=ji(r.cx,r.cy,h.x,h.y),a<u-ie&&(a=u,l=h))}if(!l)return r;var c;var d=Ji._o6reateCircle(l,e,n);var f=Ji._o6reateCircle(l,e,o);var E=Ji._o6reateCircle(l,o,n);Xi(d,o.x,o.y)&&(c=d);Xi(f,n.x,n.y)&&(!c||c.r>f.r)&&(c=f);Xi(E,e.x,e.y)&&(!c||c.r>E.r)&&(c=E);e=c.p1;n=c.p2;o=c.p3||c._otherPoint;return t(i,e,n,o,c)}(t,i,e,n,Ji._o6reateCircle(i,e,n))}function te(t,i){for(var e,n=(i=i||function(t){for(var i,e=t.length,n=new gt,o=0;o<e;o++)i=t[o],n.add(i.x,i.y);return n}(t)).width/i.height,o=[],r=t.length,s=0;s<r;s++)e=t[s],o.push({x:e.x,y:e.y*n});var h=qi(o);if(h)return new Qi(h.cx,h.cy/n,2*h.r,2*h.r/n)}Ji.prototype={equals:function(t){return this.cx==t.cx&&this.cy==t.cy&&this.r==t.r}},Ji._o6reateCircle=function(t,i,e){if(!e)return Zi(t,i);var n,o=ji(t.x,t.y,i.x,i.y),r=ji(t.x,t.y,e.x,e.y),s=ji(e.x,e.y,i.x,i.y);if(r+s<=o+ie)return Zi(t,i,0,e);if(o+s<=r+ie)return Zi(t,e,0,i);if(o+r<=s+ie)return Zi(i,e,0,t);Math.abs(e.y-i.y)<1e-4&&(n=t,t=i,i=n),n=e.x*(t.y-i.y)+t.x*(i.y-e.y)+i.x*(-t.y+e.y);var h=(e.x*e.x*(t.y-i.y)+(t.x*t.x+(t.y-i.y)*(t.y-e.y))*(i.y-e.y)+i.x*i.x*(-t.y+e.y))/(2*n),a=(i.y+e.y)/2-(e.x-i.x)/(e.y-i.y)*(h-(i.x+e.x)/2);return new Ji(h,a,at(h,a,t.x,t.y),t,i,e)};var ie=.01;function ee(t,i){if(!this._lJ||this._hS.length<2){if(this._hS.length){var e=!1!==i?this._hS[0].firstPoint:this._hS[this._hS.length-1].lastPoint;return t&&(e.x+=t),e}return null}var n=this._hS;!1===i&&(t+=this._lJ);var o,r=n[0];if(t<=0)return Wo(r.points[0],r.points[1],n[1].points[0],n[1].points[1],t,0);if(t>=this._lJ){var s,h,a=(r=n[n.length-1]).points,l=a[(d=a.length)-2],_=a[d-1];return h=4<=d?(s=a[d-4],a[d-3]):(s=(f=(r=n[n.length-2]).lastPoint).x,f.y),Wo(l,_,l+l-s,_+_-h,t-this._lJ,0)}for(var u=0,c=1,d=n.length;c<d;c++)if((o=n[c])._lJ){if(!(u+o._lJ<t)){var f=r.lastPoint;if(o.type==Ge)var E=o.points,g=function(t,i,e,n,o,r,s,h){if(t<=i._l1)return Wo(e,n,o,r,t,t);if(t>=i._lJ)return t-=i._lJ,Wo(i._p2x,i._p2y,s,h,t,t);if(t-=i._l1,i._o){var a=t/i._r;i._CCW&&(a=-a);var l=Ii(i._p1x,i._p1y,a,i._o.x,i._o.y);return l.rotate+=i._o31||0,l.rotate+=Math.PI,l}return Wo(i._p1x,i._p1y,i._p2x,i._p2y,t,t)}(t-u,o,f.x,f.y,E[0],E[1],E[2],E[3],o._r);else{if(!o._lf)return Wo(f.x,f.y,o.points[0],o.points[1],t-u,0);var v=function(o,r){var s=1/(r=r||o(1)),h=.5*s,a=Math.min(1,r/100);return function(t){if(t<=0)return 0;if(r<=t)return 1;for(var i=t*s,e=0;e++<10;){var n=t-o(i);if(Math.abs(n)<=a)return i;i+=n*h}return i}}(o._lf,o._lJ)(t-u),E=o.points;(g=(o.type==Be&&6==E.length?zi:$i)(v,[f.x,f.y].concat(E),!0)).t=v}return g}u+=o._lJ,r=o}else r=o}function ne(t){return(t=re(t))>Math.PI/2&&t<3*Math.PI/2}function oe(t,i,e,n){var o=ee.call(this,t,e);return o&&i&&(o.rotate?(n&&ne(o.rotate)&&(i=-i),o.x-=i*Math.sin(o.rotate||0),o.y+=i*Math.cos(o.rotate||0)):o.y+=i),o}function _t(t,i,e){var n,o,r;0==t._o3?(n=-1,r=0,o=i):0==t._o6?(n=0,r=1,o=e):(n=-1/t._o3,o=(t._o3-n)*i+t._o4,r=1);var s=new lt;return s._o3=n,s._o4=o,s._o6=r,s._nX=i,s._nZ=e,s}function re(t){return(t%=rt)<0&&(t+=rt),t}function se(t,i,e,n){return Math.atan2(n-i,e-t)}var he={_o4H:function(t,i,e,n,o,r){if(H(t)&&(t=pt.fromString(t)),!t)return{x:0,y:0};var s=0,h=0,a=i._lJ;if(e=e||0,t.x===S){var l=t.horizontalPosition,_=t.verticalPosition,u=!0;switch(l){case mt:u=!1;break;case"c":s+=a/2}switch(_){case Tt:h-=e/2;break;case Ot:h+=e/2}}else s=t.x,h=t.y,0<Math.abs(s)&&Math.abs(s)<1&&(s*=a);o&&null!=n&&(h+=n.y,Math.abs(n.x)<1?s+=n.x*a:s+=n.x);var c=oe.call(i,s,h,u,r);return c?(o||null==n||c.offset(n),c):{x:0,y:0}},_nB:function(t,i,e){var n=i.type,o=i.points;switch(n){case Ge:t.arcTo(o[0],o[1],o[2],o[3],i._r);break;case Pe:t.moveTo(o[0],o[1]);break;case Ne:t.lineTo(o[0],o[1]);break;case Me:t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case Be:t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case ke:t.closePath()}},_6I:function(t,i,e,n){var o=i.type;if(o!=Pe&&o!=ke){var r=e.lastPoint,s=i.points;switch(e.type==Pe&&t.add(r.x,r.y),o){case Ge:!function(t,i,e,n,o,r,s,h){var a=at(i,e,n,o),l=at(n,o,r,s);if(!a||!l)return t._d=0,t._r=0,t._l1=a,t._l2=l,t._lJ=0;var _=se(n,o,i,e),u=se(n,o,r,s),c=(t._o31=_)-(t._o32=u);(c=re(c))>Math.PI&&(c=2*Math.PI-c,t._CCW=!0);var d=Math.PI-c,f=Math.tan(c/2),E=h/f,g=Math.min(a,l);g<E&&(h=f*(E=g));for(var v,p,y,m=n+Math.cos(_)*E,T=o+Math.sin(_)*E,O=n+Math.cos(u)*E,A=o+Math.sin(u)*E,S=new lt(i,e,n,o),L=new lt(n,o,r,s),w=_t(S,m,T),I=_t(L,O,A),b=w._3W(I),D=Math.atan2(T-b.y,m-b.x),C=Math.atan2(A-b.y,O-b.x),R=t._CCW?C:D,x=0;x<4;){if(re(x*st-R)<=d)if(v?v++:v=1,y=0==x?(p=b.x+h,b.y):1==x?(p=b.x,b.y+h):2==x?(p=b.x-h,b.y):(p=b.x,b.y-h),t["$boundaryPoint"+v]={x:p,y:y},2==v)break;x++}t._p1x=m,t._p1y=T,t._p2x=O,t._p2y=A,t._o=b,t._d=E,t._r=h,t._l1=a-E,t._l2=l-E,t._lJ=t._l1+d*h}(i,r.x,r.y,s[0],s[1],s[2],s[3],s[4]),t.add(s[0],s[1]),t.add(i._p1x,i._p1y),t.add(i._p2x,i._p2y),i.$boundaryPoint1&&t.add(i.$boundaryPoint1.x,i.$boundaryPoint1.y),i.$boundaryPoint2&&t.add(i.$boundaryPoint2.x,i.$boundaryPoint2.y);break;case Ne:t.add(s[0],s[1]);break;case Me:!function(t,i){i.add(t[4],t[5]);var e=Yi(t[0],t[2],t[4]);0<e&&e<1&&(n=$i(e,t),i.add(n.x,n.y));var n,o=Yi(t[1],t[3],t[5]);0<o&&o<1&&(n=$i(o,t),i.add(n.x,n.y))}([r.x,r.y].concat(s),t);break;case Be:Wi([r.x,r.y].concat(s),t);break;case ke:n&&t.add(n.points[0],n.points[1])}}},_6J:function(t,i,e){var n=t.type;if(n==Pe)return 0;var o,r,s,h,a,l=i.lastPoint,_=t.points;switch(n==Be&&4==_.length&&(n=Me),n){case Ne:return at(_[0],_[1],l.x,l.y);case Ge:return t._lJ;case Me:var u=Vi([l.x,l.y].concat(_));return(t._lf=u)(1);case Be:u=(o=[l.x,l.y].concat(_),s=c(o[0],o[2],o[4],o[6]),h=c(o[1],o[3],o[5],o[7]),a=1/(r=r||100),function(t){if(!t)return 0;for(var i,e=0,n=0;;){if(t<=(i=e+a))return n+=d(e,i-e);n+=d(e,a),e=i}});return(t._lf=u)(1)||Ki([l.x,l.y].concat(_));case ke:if(l&&e)return t.points=e.points,at(e.points[0],e.points[1],l.x,l.y)}function c(t,i,e,n){var o=3*i-t-3*e+n,r=2*t-4*i+2*e,s=i-t;return function(t,i){return 3*(o*t*t+r*t+s)}}function d(t,i){var e=s(t),n=h(t);return Math.sqrt(e*e+n*n)*i}return 0}},ae=/^data:image\/(\w+);base64,/i,le=/^gif/i,_e=/^svg/i,ue=10,ce=11,de=12,fe=20,Ee=30;function ge(t,i,e,n,o){var r;i&&e&&(t.lineWidth=.5,t.strokeStyle="#CCC",t.strokeRect(0,0,i,e),n&&(t.fillStyle=n,t.fillRect(0,0,i,e)),r=Math.min(i/50,e/38),t.save(),t.globalAlpha=.6,t.translate(i/2,e/2),t.scale(r,r),t.translate(-20,-14),t.beginPath(),t.rect(0,0,40,28),t.clip(),t.fillStyle="#f0f1f2",t.fill(),t.globalAlpha=1,t.moveTo(0,21),t.lineTo(12,12),t.lineTo(26,28),t.moveTo(18,18),t.lineTo(28,8),t.lineTo(40,18),t.lineWidth=2,t.strokeStyle="#dbdcde",t.stroke(),o&&(t.beginPath(),t.moveTo(26,-4),t.lineTo(17,11),t.lineTo(23,17),t.lineTo(14,32),t.lineWidth=5,t.strokeStyle=n||"#FFF",t.stroke()),t.restore())}function ve(t){var i=ae.exec(t);if(i)return i[1];var e=t.lastIndexOf(".");return 0<=e&&e<t.length-1?t.substring(e+1):void 0}nt.IMAGE_WIDTH=50,nt.IMAGE_HEIGHT=30,nt.IMAGE_DEFAULT={draw:function(t,i){ge(t,i.width,i.height,i.renderColor)}},nt.IMAGE_INVALID={draw:function(t,i){ge(t,i.width,i.height,i.renderColor,!0)}},nt.MAX_CACHE_PIXELS=1e6;function pe(t,i,e){if(this._mY=function(t){if(!t)return null;if(t instanceof Ye)return Ee;if(t.draw instanceof Function)return fe;if(H(t)){var i=ve(t);if(i){if(!m&&le.test(i))return de;if(_e.test(i))return ce}return ue}}(t),!this._mY)throw new Error("the image format is not supported",t);this._mX=t,this._o4L=i,this._9Y=e,this.width=i||nt.IMAGE_WIDTH,this.height=e||nt.IMAGE_HEIGHT,this._kU={}}pe.prototype={_kP:0,_79:!0,_m5:null,_kQ:null,_mX:null,_mY:null,_o4L:S,_9Y:S,_7A:function(){return 1==this._kP},getBounds:function(t){return this._mY==Ee?this._mX.getBounds(t):(this._79&&this._gU(),this)},validate:function(){this._79&&this._gU()},_gU:function(){if(this._79=!1,this._mY==Ee)return this._mX.validate(),void this.setByRect(this._mX.bounds);if(this._mY!=fe){if(1!=this._kP)try{this._eR()}catch(t){this._kP=3,Si.error(t)}}else this._9Z()},_5R:function(){this._eU(),this._dispatcher.clear(),delete this._dispatcher},_jF:function(t){this._m5.parentNode&&this._m5.parentNode.removeChild(this._m5),this._kP=3,Si.error("Image load error - "+this._mX),this._pixels=null,this._kQ=null,this._m5=null,!1!==t&&this._5R()},_eR:function(){var t=this._mX;if(this._kP=1,this._dispatcher=new Mt,this._mY!=de)this._m5||(this._m5=d.createElement("img"),m&&(this._m5.style.visibility="hidden",d.body.appendChild(this._m5))),m?(this._m5.onload=function(t){setTimeout(this._8Q.bind(this),100)}.bind(this),this._m5.onerror=this._jF.bind(this)):(this._m5.onload=this._8Q.bind(this),this._m5.onerror=this._8Q.bind(this)),this._m5.src=t;else{for(var i in _n)this[i]=_n[i];!function(t,e,i,n,o){function r(i,t){return function(t){i(t)}}function s(){}var h,a,l,_,u,c,d,f,E=function(){var t,i;c&&(i={data:t=c.getImageData(0,0,h.width,h.height),_pixels:ze(t.data,h.width,h.height),delay:l},o.call(e,i))},g={hdr:r(function(t){h=t,(d=d||Ni()).width=h.width,d.height=h.height,e.width=h.width,e.height=h.height}),gce:r(function(t){E(),_=u,c=u=l=a=null,a=t.transparencyGiven?t.transparencyIndex:null,l=10*t.delayTime,u=t.disposalMethod}),com:r(s),app:{NETSCAPE:r(s)},img:r(function(t){c=c||d.getContext("2d");var e=t.lctFlag?t.lct:h.gct,n=c.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,i){a!==t?(n.data[4*i+0]=e[t][0],n.data[4*i+1]=e[t][1],n.data[4*i+2]=e[t][2],n.data[4*i+3]=255):2!==_&&3!==_||(n.data[4*i+3]=0)}),c.putImageData(n,t.leftPos,t.topPos)}),eof:function(t){E(),i.call(e)}},v=new XMLHttpRequest;m||v.overrideMimeType("text/plain; charset=x-user-defined");v.onload=function(t){f=new un(v.responseText);try{cn(f,g)}catch(t){n.call(e,"parse")}},v.onerror=function(){n.call(e,"xhr")},v.open("GET",t,!0),v.send()}(this._mX,this,this._dQ,this._jF,this._fH)}},_jH:!0,_8Q:function(){var t,i=this._m5.width,e=this._m5.height;if(i&&e){if(this._m5.parentNode&&this._m5.parentNode.removeChild(this._m5),this._kP=2,this.width=i,this.height=e,m&&this._mY==ce)this._pixels=null,this._jH=!1;else if(this._mY==ce||(t=ve(t=this._m5.src),/^png/i.test(t)||/^gif/i.test(t))){var n,o=Ni();o.width=i,o.height=e,o.g.drawImage(this._m5,0,0,i,e);try{n=o.g.getImageData(0,0,o.width,o.height).data}catch(t){this._jH=!1,Si.error(t)}n&&function(t){for(var i=!1,e=3,n=t.length;e<n;e+=4)if(t[e]<255){i=!0;break}return i}((o.g,n))&&(this._kQ=o,this._pixels=function(t){var i=t.width,e=t.height,n=Fi(t.g,0,0,i,e);if(n)return ze(n.data,i,e)}(o))}this._5R()}else this._jF()},_9Z:function(){var t=this._mX;if(t.draw instanceof Function){if(!1===t.cacheable&&t.width&&t.height)return this.width=t.width,void(this.height=t.height);var i=t.width||nt.IMAGE_MAX_SIZE,e=t.height||nt.IMAGE_MAX_SIZE,n=this._eS();n.width=i,n.height=e;var o=n.g;t.draw(o);var r,s=Fi(o,0,0,i,e);s&&(r=ze(s.data,i,e),this.x=r._x,this.y=r._y,this.width=r._width,this.height=r._height,n.width=this.width,n.height=this.height,o.putImageData(s,-this.x,-this.y),this._pixels=r)}else this._jF(!1)},_eS:function(){return this._kQ||(this._kQ=Ni())},draw:function(t,i,e,n,o,r){if(this.width&&this.height){i=i||1,n=n||1,o=o||1;var s=this.width*n,h=this.height*o;if(r&&e.shadowColor&&(t.shadowColor=e.shadowColor,t.shadowBlur=(e.shadowBlur||0)*i,t.shadowOffsetX=(e.shadowOffsetX||0)*i,t.shadowOffsetY=(e.shadowOffsetY||0)*i),1!=this._kP)if(3!=this._kP){if(this._mY==Ee)return t.scale(n,o),void this._mX.draw(t,i,e);var a=this._gW(i,n,o);if(a)return(this.x||this.y)&&t.translate(this.x*n,this.y*o),t.scale(n/a.scale,o/a.scale),void a._nB(t,e.renderColor,e.renderColorBlendMode);this._kS(t,i,n,o,this.width*n,this.height*o,e)}else nt.IMAGE_INVALID&&nt.IMAGE_INVALID.draw(t,{src:this._mX,width:s,height:h,renderColor:e.renderColor});else nt.IMAGE_DEFAULT&&nt.IMAGE_DEFAULT.draw(t,{src:this._mX,width:s,height:h,renderColor:e.renderColor})}},_kS:function(t,i,e,n,o,r,s){if(this._mY==fe)return 1!=e&&1!=n&&t.scale(e,n),void this._mX.draw(t,s);if(this._m5){if(!C)return void t.drawImage(this._m5,0,0,o,r);e=i*o/this.width,n=i*r/this.height;t.scale(1/e,1/n),t.drawImage(this._m5,0,0,o*e,r*n)}},_kU:null,_gW:function(t,i,e){if(this._mY==fe&&!1===this._mX.cacheable)return null;if(this._mY==ue||(t*=Math.max(i,e))<=1)return this._defaultCache||(this._defaultCache=this._gY(this._kQ||this._m5,1,this._jH)),this._defaultCache;var n=this._kU.maxScale||0;if((t=Math.ceil(t))<=n){for(var o=t,r=this._kU[o];!r&&++o<=n;)r=this._kU[o];if(r)return r}t%2&&t++;var s=this.width*t,h=this.height*t;if(s*h>nt.MAX_CACHE_PIXELS)return null;var a=Ni(s,h);return(this.x||this.y)&&a.g.translate(-this.x*t,-this.y*t),this._kS(a.g,1,t,t,s,h),this._gY(a,t)},_gY:function(t,i){var e=new Ke(t,i);return this._kU[i]=e,this._kU.maxScale=i,e},hitTest:function(t,i,e){return this._mY==Ee?this._mX.hitTest.apply(this._mX,arguments):!(this._pixels||this._m5&&this._m5._pixels)||(this._pixels||this._m5._pixels)._jJ(t,i,e)},_eU:function(){this._dispatcher&&this._dispatcher.onEvent(new It(this,"image","load",this._m5))},_o4N:function(t,i){this._dispatcher&&this._dispatcher.addListener(t,i)},_7B:function(t,i){this._dispatcher&&this._dispatcher.removeListener(t,i)},_o6Y:function(t){this._kU={},(t||1e5<this.width*this.height)&&(this._m5=null,this._kQ=null)}},t(pe,gt);var ye={};function me(t,i,e,n){if(i)return ye[t]=new pe(i,e,n),t;delete ye[t]}function Te(t){if(t._m5)return t._m5;if(!H(t)&&!t.name)return t._m5=new pe(t);var i=t.name||t;return i in ye?ye[i]:ye[i]=new pe(t)}function Oe(t){return t in ye}function Ae(t,i,e){e=e||{};var n,o,r,s,h,a,l,_,u,c,d,f,E,g,v,p,y=t.getBounds(e.lineWidth);y.width&&y.height&&(n=i.getContext("2d"),o=i.ratio||1,r=e.scaleMode||"full.uniform",s=/full/i.test(r),h=/uniform/i.test(r),l=a=1,s&&(_=i.width,u=i.height,f=d=0,(c=e.padding)&&(U(c)?E=g=v=p=c:(E=c.top||0,g=c.bottom||0,v=c.left||0,p=c.right||0),_-=v+p,u-=E+g,d+=v,f+=E),a=_/y.width,l=u/y.height,h&&(l<a?(d+=(_-l*y.width)/2,a=l):a<l&&(f+=(u-a*y.height)/2,l=a)),(d||f)&&n.translate(d,f)),n.translate(-y.x*a,-y.y*l),t.draw(n,o,e,a,l,!0))}Si.drawImage=function(t,i,e){var n=Te(t);if(!n)return Si.error("draw image error - "+t),!1;n.validate(),n._mY!=de&&!n._7A()||n._o4N(function(t){t.source&&(this.width=this.width,Ae(t.source,this,e))},i),Ae(n,i,e)},Si.registerImage=me,Si.hasImage=Oe,Si.getAllImages=function(){var t,i=[];for(t in ye)i.push(t);return i};function Se(t,i,e,n,o,r){this.type=t,this.colors=i,this.positions=e,this.angle=n||0,this.tx=o||0,this.ty=r||0}Li.GRADIENT_TYPE_RADIAL="r",Li.GRADIENT_TYPE_LINEAR="l",Se.prototype={type:null,colors:null,positions:null,angle:null,tx:0,ty:0,position:pt.CENTER_MIDDLE,isEmpty:function(){return null==this.colors||0==this.colors.length},_7U:function(){var t=this.colors.length;if(1==t)return[0];for(var i=[],e=1/(t-1),n=0;n<t;n++)i.push(e*n);return this.positions||(this.positions=i),i},generatorGradient:function(t){if(null==this.colors||0==this.colors.length)return null;var i=Mi();if(this.type==Li.GRADIENT_TYPE_LINEAR){var e,n,o,r=this.angle;r>Math.PI&&(r-=Math.PI);var s=(o=r<=Math.PI/2?(e=Math.atan2(t.height,t.width),n=Math.sqrt(t.width*t.width+t.height*t.height),e-r):(e=Math.atan2(t.width,t.height),n=Math.sqrt(t.width*t.width+t.height*t.height),e-(r-Math.PI/2)),Math.cos(o)*n)/2,h=s*Math.cos(r),a=s*Math.sin(r),l=t.x+t.width/2-h,_=t.y+t.height/2-a,u=t.x+t.width/2+h,c=t.y+t.height/2+a,d=i.createLinearGradient(l,_,u,c)}else{if(!(this.type=Li.GRADIENT_TYPE_RADIAL))return null;var f=Lt(this.position,t.width,t.height);f.x+=t.x,f.y+=t.y,this.tx&&(Math.abs(this.tx)<1?f.x+=t.width*this.tx:f.x+=this.tx),this.ty&&(Math.abs(this.ty)<1?f.y+=t.height*this.ty:f.y+=this.ty);var E=at(f.x,f.y,t.x,t.y),E=Math.max(E,at(f.x,f.y,t.x,t.y+t.height));E=Math.max(E,at(f.x,f.y,t.x+t.width,t.y+t.height)),E=Math.max(E,at(f.x,f.y,t.x+t.width,t.y)),d=i.createRadialGradient(f.x,f.y,0,f.x,f.y,E)}var g=this.colors,v=this.positions;v&&v.length==g.length||(v=this._7U());for(var p=0,y=g.length;p<y;p++)d.addColorStop(v[p],g[p]);return d}};var Le=new Se(Li.GRADIENT_TYPE_LINEAR,[J(2332033023),J(1154272460),J(1154272460),J(1442840575)],[.1,.3,.7,.9],Math.PI/2),we=new Se(Li.GRADIENT_TYPE_LINEAR,[J(2332033023),J(1154272460),J(1154272460),J(1442840575)],[.1,.3,.7,.9],0),Ie=(new Se(Li.GRADIENT_TYPE_LINEAR,[J(1154272460),J(1442840575)],[.1,.9],0),new Se(Li.GRADIENT_TYPE_RADIAL,[J(2298478591),J(1156509422),J(1720223880),J(1147561574)],[.1,.3,.7,.9],0,-.3,-.3)),be=[J(0),J(4294901760),J(4294967040),J(4278255360),J(4278250239),J(4278190992),J(4294901958),J(0)],De=[0,.12,.28,.45,.6,.75,.8,1],Ce=new Se(Li.GRADIENT_TYPE_LINEAR,be,De),Re=new Se(Li.GRADIENT_TYPE_LINEAR,be,De,Math.PI/2),xe=new Se(Li.GRADIENT_TYPE_RADIAL,be,De);Se.LINEAR_GRADIENT_VERTICAL=Le,Se.LINEAR_GRADIENT_HORIZONTAL=we,Se.RADIAL_GRADIENT=Ie,Se.RAINBOW_LINEAR_GRADIENT=Ce,Se.RAINBOW_LINEAR_GRADIENT_VERTICAL=Re,Se.RAINBOW_RADIAL_GRADIENT=xe;var Pe="m",Ne="l",Me="q",Be="c",Ge="a",ke="z";Li.SEGMENT_MOVE_TO=Pe,Li.SEGMENT_LINE_TO=Ne,Li.SEGMENT_QUAD_TO=Me,Li.SEGMENT_CURVE_TO=Be,Li.SEGMENT_ARC_TO=Ge,Li.SEGMENT_CLOSE=ke;var Fe=function(t,i){this.id=++E,V(t)?this.points=t:(this.type=t,this.points=i)};Fe.prototype={toJSON:function(){var t={type:this.type,points:this.points};return this.invalidTerminal&&(t.invalidTerminal=!0),t},parseJSON:function(t){this.type=t.type,this.points=t.points,this.invalidTerminal=t.invalidTerminal},points:null,type:Ne,clone:function(){return new Fe(this.type,this.points?r(this.points):null)},move:function(t,i){if(this.points)for(var e=0,n=this.points.length;e<n;e++){var o=this.points[e];Si.isNumber(o)&&(this.points[e]+=e%2==0?t:i)}}},q(Fe.prototype,{lastPoint:{get:function(){return this.type==Ge?{x:this._p2x,y:this._p2y}:{x:this.points[this.points.length-2],y:this.points[this.points.length-1]}}},firstPoint:{get:function(){return{x:this.points[0],y:this.points[1]}}}}),Si.PathSegment=Fe;var $e=0;nt.ADD_SEGMENT_TYPE="line";var Ye=function(t){this.bounds=new gt,this._hS=t||[]};function Ue(t,i,e){return{x:t.x+(i.x-t.x)*e,y:t.y+(i.y-t.y)*e}}function He(t,i,e,n,o){n=n||nt.ADD_SEGMENT_TYPE;var r=function(t,i,e,n){var o=t.length;if(o&&!(o<0)){n=n||1;for(var r,s,h=0;h++<o;)if((r=t.getLocation(h,0))&&!(n<(s=at(i,e,r.x,r.y)))){for(var a=0;a++<n;)if(r=t.getLocation(h+a,0)){var l=at(i,e,r.x,r.y);if(s<=l){h+=a;break}s=l}for(var _=h,u=t.length-1,c=0,h=0,d=t._hS.length;h<d;h++)if(_<(c+=t._hS[h]._lJ||0)){u=h;break}return r.length=_,r.index=u,r}}}(t,i,e,o);if(r){i=r.x,e=r.y;var s,h,a,l,_,u,c,d,f,E,g=t._hS,v=r.index,p=v==g.length-1,y=g[v],m=g.slice(0);return y.type==Ne||y.type==ke?"line"==n?m.splice(v,0,new Fe(Ne,[r.x,r.y])):(u=g[v-1].lastPoint,E=y.firstPoint,d=Ue(u,r,s=at(u.x,u.y,i,e)/at(u.x,u.y,E.x,E.y)),f=Ue(r,E,s),m.splice(v,1,new Fe(Me,[d.x,d.y,i,e]),new Fe(Me,y.invalidTerminal?[f.x,f.y]:[f.x,f.y,E.x,E.y]))):"t"in r&&"line"!=n?(s=r.t,y.type==Be?(u=g[v-1].lastPoint,E={x:y.points[0],y:y.points[1]},c={x:y.points[2],y:y.points[3]},h={x:y.points[4],y:y.points[5]},d=Ue(u,E,s),f=Ue(E,c,s),a=Ue(c,h,s),l=Ue(d,f,s),_=Ue(f,a,s),m.splice(v,1,new Fe(Be,[d.x,d.y,l.x,l.y,i,e]),new Fe(Be,y.invalidTerminal?[_.x,_.y,a.x,a.y]:[_.x,_.y,a.x,a.y,h.x,h.y]))):y.type==Me&&(u=g[v-1].lastPoint,E={x:y.points[0],y:y.points[1]},c={x:y.points[2],y:y.points[3]},d=Ue(u,E,s),f=Ue(E,c,s),m.splice(v,1,new Fe(Me,[d.x,d.y,i,e]),new Fe(Me,y.invalidTerminal?[f.x,f.y]:[f.x,f.y,c.x,c.y])))):(E=y.lastPoint,m.splice(v,1,new Fe(Ne,[i,e]),new Fe(Ne,[E.x,E.y]))),{atEnd:p,index:v,isCurve:"line"!==n,segments:m}}}function Ve(t,i,e){this._13(t,i,e)}function ze(t,i,e){return new Ve(t,i,e)}function We(t,i,e){return(e=e||nt.BLEND_MODE)==Li.BLEND_MODE_MULTIPLY?t*i:e==Li.BLEND_MODE_DARKEN?Math.min(t,i):e==Li.BLEND_MODE_COLOR_BURN?1-(1-i)/t:e==Li.BLEND_MODE_LINEAR_BURN?t+i-1:e==Li.BLEND_MODE_LIGHTEN?Math.max(t,i):e==Li.BLEND_MODE_SCREEN?t+i-t*i:i}Ye.prototype={toJSON:function(){var i=[];return this._hS.forEach(function(t){i.push(t.toJSON())}),i},parseJSON:function(t){var i=this._hS;t.forEach(function(t){i.push(new Fe(t.type,t.points))})},clear:function(){this._hS.length=0,this.bounds.clear(),this._lJ=0,this._79=!0,this._hS.__l9Segments=null},_fG:!0,_7V:function(t,i){this._fG&&0===this._hS.length&&t!=Pe&&this._hS.push(new Fe(Pe,[0,0])),this._hS.push(new Fe(t,i)),this._79=!0},add:function(t,i){A(this._hS,t,i),this._79=!0},removePathSegment:function(t){if(t>=this._hS.length)return!1;this._hS.splice(t,1),this._79=!0},moveTo:function(t,i){this._7V(Pe,[t,i])},lineTo:function(t,i){this._7V(Ne,[t,i])},quadTo:function(t,i,e,n){this._7V(Me,[t,i,e,n])},curveTo:function(t,i,e,n,o,r){this._7V(Be,[t,i,e,n,o,r])},arcTo:function(t,i,e,n,o){this._7V(Ge,[t,i,e,n,o])},closePath:function(){this._7V(ke)},_92:function(t,i,e,n,o){if(n.selectionColor){if(e==Li.SELECTION_TYPE_SHADOW){if(!n.selectionShadowBlur)return;return t.shadowColor=n.selectionColor,t.shadowBlur=n.selectionShadowBlur*i,t.shadowOffsetX=(n.selectionShadowOffsetX||0)*i,void(t.shadowOffsetY=(n.selectionShadowOffsetY||0)*i)}if(e==Li.SELECTION_TYPE_BORDER){if(!n.selectionBorder)return;t.strokeStyle=n.selectionColor;var r=o.lineWidth||0;o.outline&&(r+=2*o.outline),t.lineWidth=n.selectionBorder+r,this._nB(t),t.stroke()}}},_79:!0,_hS:null,_lJ:0,lineCap:"butt",lineJoin:"round",draw:function(t,i,e,n,o){t.lineCap=e.lineCap||this.lineCap,t.lineJoin=e.lineJoin||this.lineJoin,n&&(o=o||e,this._92(t,i,o.selectionType,o,e));var r=n&&o.selectionType==Li.SELECTION_TYPE_SHADOW;e.outlineStyle&&(this._nB(t),t.lineWidth=e.lineWidth+2*(e.outline||0),t.strokeStyle=e.outlineStyle,t.stroke(),r&&(r=!1,t.shadowColor="rgba(0,0,0,0)")),t.lineWidth=0,this._nB(t),e.fillColor&&(t.fillStyle=e.renderColor||e.fillColor,t.fill()),e.fillGradient&&(t.fillStyle=e._fillGradient||e.fillGradient,t.fill()),e.lineWidth&&(t.lineWidth=e.lineWidth,e.lineDash&&(e.lineFillColor&&(t.strokeStyle=e.lineFillColor,t.stroke(),r&&(t.shadowColor="rgba(0,0,0,0)")),t.lineCap=e.lineDashCap||t.lineCap,t.lineJoin=e.lineDashJoin||t.lineJoin,t.lineDash=e.lineDash,t.lineDashOffset=e.lineDashOffset),t.strokeStyle=e.renderColor||e.strokeStyle,t.stroke(),t.lineDash=[])},_nB:function(t){var i,e,n=this._hS.__l9Segments||this._hS;t.beginPath();for(var o=0,r=n.length;o<r;o++)i=n[o],he._nB(t,i,e),e=i},invalidate:function(){this._79=!0},validate:function(){if(this._79=!1,this.bounds.clear(),(this._lJ=0)!=this._hS.length)for(var t,i,e=this._hS,n=1,o=e[0],r=o,s=e.length;n<s;n++)(t=e[n]).type==Pe?r=t:(he._6I(this.bounds,t,o,r),i=he._6J(t,o,r),t._lJ=i,this._lJ+=i),o=t},getBounds:function(t,i){var e;return this._79&&this.validate(),i=i||new gt,t?(e=t/2,i.set(this.bounds.x-e,this.bounds.y-e,this.bounds.width+t,this.bounds.height+t)):i.set(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height),i},hitTest:function(t,i,e,n,o,r){return function(t,i,e,n,o,r){if(e=e||0,!(o=o||0)&&!r)return!1;if(!n&&!this.getBounds(o).intersectsPoint(t,i,e))return!1;var s=Math.round(2*e)||1,h=Mi(s,s),a=(h.canvas,-t+e),l=-i+e;if(h.setTransform(1,0,0,1,a,l),h.isPointInStroke)return h.lineWidth=(o||0)+2*e,this._nB(h),!(!o||!h.isPointInStroke(e,e))||!!r&&h.isPointInPath(e,e);this._nB(h),o&&h.stroke(),r&&h.fill();var _=Fi(h,0,0,s,s);if(!_)return!1;for(var u=(_=_.data).length/4;0<u;){if(_[4*u-1]>$e)return!0;--u}return!1}.call(this,t,i,e,n,o,r)},toSegments:function(){return[].concat(this._hS)},generator:function(t,i,e,n,o){return function(t,i,e,n,o){this._79&&this.validate();var r=o?this.getBounds(o):this.bounds,a=e/r.width,l=t-a*r.x,_=n/r.height,u=i-_*r.y,s=this._hS,c=[];return L(s,function(t){var i=t.clone(),e=i.points;if(e&&e.length){for(var n=e.length,o=[],r=0;r<n;r++){var s=e[r],h=e[++r],s=a*s+l,h=_*h+u;o.push(s),o.push(h)}i.points=o}c.push(i)},this),new Ye(c)}.call(this,t,i,e,n,o)},getLocation:function(t,i){return oe.call(this,t,i||0)}},q(Ye.prototype,{segments:{get:function(){return this._hS},set:function(t){this.clear(),this._hS=t}},length:{get:function(){return this._79&&this.validate(),this._lJ}},_empty:{get:function(){return 0==this._hS.length}}}),Ve.prototype={_13:function(t,i,e){for(var n,o,r,s,h=t.length,a=0,l=0,_=0;_<h;_+=4)if(0<t[_+3]){n=(_+4)/i/4|0;break}for(_=h-4;0<=_;_-=4)if(0<t[_+3]){o=(_+4)/i/4|0;break}for(a=0;a<i;a++){for(l=n;l<o;l++)if(0<t[l*i*4+4*a+3]){r=a;break}if(0<=r)break}for(a=i-1;0<=a;a--){for(l=n;l<o;l++)if(0<t[l*i*4+4*a+3]){s=a;break}if(0<=s)break}this._x=r,this._y=n,this._width=s-r+1,this._height=o-n+1,this._l2=new gt(r,n,this._width,this._height),this._pixelSize=this._width*this._height,this._originalPixelsWidth=i,this._originalPixels=t},_eX:function(t,i){return this._originalPixels[4*(t+this._x+(this._y+i)*this._originalPixelsWidth)+3]},_jJ:function(t,i,e){(!e||e<=1)&&(e=1),e|=0,t=Math.round(t-this._x)-e,i=Math.round(i-this._y)-e,e+=e;for(var n=t,o=i;o<i+e;){for(n=t;n<t+e;){if(this._eX(n,o))return!0;++n}++o}return!1}},Li.BLEND_MODE_DARKEN="darken",Li.BLEND_MODE_MULTIPLY="multiply",Li.BLEND_MODE_COLOR_BURN="color.burn",Li.BLEND_MODE_LINEAR_BURN="linear.burn",Li.BLEND_MODE_LIGHTEN="lighten",Li.BLEND_MODE_SCREEN="screen",Li.BLEND_MODE_GRAY="gray",nt.BLEND_MODE=Li.BLEND_MODE_LINEAR_BURN;var Ke=function(t,i,e){this._kQ=t,this.scale=i||1,this._jH=e};function Xe(t,i,e,n){return e<1&&(e=1),function(t,i,e,n,o){e=Math.round(e)||1,n=Math.round(n)||1;var r=Mi(e,n);r.setTransform(1,0,0,1,-t,-i),o.draw(r);var s=Fi(r,0,0,e,n);if(!s)return!1;var h=(s=s.data).length/4;for(;0<h--;)if(s[4*h-1]>$e)return!0;return!1}(t-e,i-e,2*e,2*e,n)}Ke.prototype={scale:1,_kQ:null,_kU:null,_jH:!0,_nB:function(t,i,e){if((i=i&&function(t){if("#"==t[0]){if(3==(t=t.substring(1)).length)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];else if(6!=t.length)return;return[(t=parseInt(t,16))>>16&255,t>>8&255,255&t]}if(/^rgb/i.test(t)){var i=t.indexOf("("),e=t.indexOf(")");if(i<0||e<i)return;if((t=(t=t.substring(i+1,e)).split(",")).length<3)return;return[parseInt(t[0]),parseInt(t[1]),parseInt(t[2]),3==t.length?255:parseInt(t[3])]}Si.error("color format error, ["+t+"]")}(i))&&!1!==this._jH){this._kQ instanceof Image&&((n=Ni()).width=this._kQ.width,n.height=this._kQ.height,n.g.drawImage(this._kQ,0,0,this._kQ.width,this._kQ.height),this._kQ=n),this._kU||(this._kU={});var n,o=i+e;if((n=this._kU[o])||((n=function(t,i,e){var n=Fi(t.g,0,0,t.width,t.height);if(n){var o=n.data;if(e instanceof Function)o=e(t,o,i)||o;else{var r=i[0]/255,s=i[1]/255,h=i[2]/255;if(e==Li.BLEND_MODE_GRAY)for(var a=0,l=o.length;a<l;a+=4){var _=77*o[a]+151*o[a+1]+28*o[a+2]>>8;o[a]=_*r|0,o[a+1]=_*s|0,o[a+2]=_*h|0}else for(a=0,l=o.length;a<l;a+=4)o[a]=255*We(r,o[a]/255,e)|0,o[a+1]=255*We(s,o[a+1]/255,e)|0,o[a+2]=255*We(h,o[a+2]/255,e)|0}return(t=Ni(t.width,t.height)).g.putImageData(n,0,0),t}}(this._kQ,i,e))||(this._jH=!1),this._kU[o]=n||this._kQ),n)if(m)try{t.drawImage(n,0,0)}catch(t){}else t.drawImage(n,0,0)}else t.drawImage(this._kQ,0,0)}};var je=function(t,i,e,n,o,r,s,h,a){this._n1=function(t,i,e,n,o,r,s,h,a){if(ft(t,i,e,n,h,a))return null;var l,_,u=new Fe(Ne,[t+e-o,i]),c=new Fe(Me,[t+e,i,t+e,i+r]),d=new Fe(Ne,[t+e,i+n-r]),f=new Fe(Me,[t+e,i+n,t+e-o,i+n]),E=new Fe(Ne,[t+o,i+n]),g=new Fe(Me,[t,i+n,t,i+n-r]),v=new Fe(Ne,[t,i+r]),p=new Fe(Me,[t,i,t+o,i]),y=(new Fe(ke),[u,c,d,f,E,g,v,p]),m=new gt(t+o,i+r,e-o-o,n-r-r);_=h<t?(l=yt,5):t+e<h?(l=mt,1):(l="c",0);a<i?l==yt&&(_=7):i+n<a?l==mt?_=3:"c"==l&&(_=4):l==yt?_=6:l==mt&&(_=2);var T=function(t,i,e,n,o,r,s,h,a,l,_){var u=h/2;switch(r=r||1e-4,s=s||1e-4,t){case 7:var c=[i,e+s,i,e,i+r,e],d=i+r,f=e+s;return Ze(t,c,d,f,i,e,n,o,r,s,h,a,l,_);case 5:return Ze(t,c=[i+r,e+o,i,e+o,i,e+o-s],d=i+r,f=e+o-s,i,e,n,o,r,s,h,a,l,_);case 3:return Ze(t,c=[i+n,e+o-s,i+n,e+o,i+n-r,e+o],d=i+n-r,f=e+o-s,i,e,n,o,r,s,h,a,l,_);case 1:return Ze(t,c=[i+n-r,e,i+n,e,i+n,e+s],d=i+n-r,f=e+s,i,e,n,o,r,s,h,a,l,_);case 0:return function(t,i,e,n,o,r,s,h){var a,l;{var _;t+n<=s-r?a={y:i,x:s-r,_n1NO:0}:(a={y:i+o,x:Math.max(t,s-r)},_=[t,i+o,t,i,t+n,i],c=new lt(s,h,a.x,a.y),(a=c._$i(_))?(V(a)&&(a=a[0].t>a[1].t?a[0]:a[1]),(d=(d=Je(_,[a]))[0])&&(a._n1=new Fe(Me,d.slice(2))),a._n1NO=7):a={y:i,x:t+n,_n1NO:0})}{var u,c,d;s+r<=t+e-n?l={y:i,x:s+r,_n1NO:0}:(l={y:i+o,x:Math.min(t+e,s+r)},u=[t+e-n,i,t+e,i,t+e,i+o],c=new lt(s,h,l.x,l.y),(l=c._$i(u))?(V(l)&&(l=l[0].t<l[1].t?l[0]:l[1]),(d=Je(u,[l]))&&d[d.length-1]&&(l._n1=new Fe(Me,d[d.length-1].slice(2))),l._n1NO=1):l={y:i,x:t+e-n,_n1NO:0})}return[a,l]}(i,e,n,r,s,u,a,l);case 2:return function(t,i,e,n,o,r,s,h,a){var l,_;{var u;i+r<=a-s?l={x:t+e,y:a-s,_n1NO:2}:(l={x:t+e-o,y:Math.max(i,a-s)},u=[t+e-o,i,t+e,i,t+e,i+r],d=new lt(h,a,l.x,l.y),(l=d._$i(u))?(V(l)&&(l=l[0].t>l[1].t?l[0]:l[1]),(f=(f=Je(u,[l]))[0])&&(l._n1=new Fe(Me,f.slice(2))),l._n1NO=1):l={x:t+e,y:i+r,_n1NO:2})}{var c,d,f;a+s<=i+n-r?_={x:t+e,y:a+s,_n1NO:2}:(_={x:t+e-o,y:Math.min(i+n,a+s)},c=[t+e,i+n-r,t+e,i+n,t+e-o,i+n],d=new lt(h,a,_.x,_.y),(_=d._$i(c))?(V(_)&&(_=_[0].t<_[1].t?_[0]:_[1]),(f=Je(c,[_]))[1]&&(_._n1=new Fe(Me,f[1].slice(2))),_._n1NO=3):_={x:t+e,y:i+n-r,_n1NO:2})}return[l,_]}(i,e,n,o,r,s,u,a,l);case 4:return function(t,i,e,n,o,r,s,h,a){var l,_;{var u;t+o<=h-s?_={y:i+n,x:h-s,_n1NO:4}:(_={y:i+n-r,x:Math.max(t,h-s)},u=[t+o,i+n,t,i+n,t,i+n-r],d=new lt(h,a,_.x,_.y),(_=d._$i(u))?(V(_)&&(_=_[0].t<_[1].t?_[0]:_[1]),(f=(f=Je(u,[_]))[f.length-1])&&(_._n1=new Fe(Me,f.slice(2))),_._n1NO=5):_={y:i+n,x:t+o,_n1NO:4})}{var c,d,f;h+s<=t+e-o?l={y:i+n,x:h+s,_n1NO:4}:(l={y:i+n-r,x:Math.min(t+e,h+s)},c=[t+e,i+n-r,t+e,i+n,t+e-o,i+n],d=new lt(h,a,l.x,l.y),(l=d._$i(c))?(V(l)&&(l=l[0].t>l[1].t?l[0]:l[1]),(f=Je(c,[l]))[0]&&(l._n1=new Fe(Me,f[0].slice(2))),l._n1NO=3):l={y:i+n,x:t+e-o,_n1NO:4})}return[l,_]}(i,e,n,o,r,s,u,a,l);case 6:return function(t,i,e,n,o,r,s,h){var a,l;{var _;i+o<=h-r?l={x:t,y:h-r,_n1NO:6}:(l={x:t+n,y:Math.max(i,h-r)},_=[t,i+o,t,i,t+n,i],c=new lt(s,h,l.x,l.y),(l=c._$i(_))?(V(l)&&(l=l[0].t<l[1].t?l[0]:l[1]),(d=(d=Je(_,[l]))[d.length-1])&&(l._n1=new Fe(Me,d.slice(2)))):l={x:t,y:i+o},l._n1NO=7)}{var u,c,d;h+r<=i+e-o?a={x:t,y:h+r,_n1NO:6}:(a={x:t+n,y:Math.min(i+e,h+r)},u=[t+n,i+e,t,i+e,t,i+e-o],c=new lt(s,h,a.x,a.y),(a=c._$i(u))?(V(a)&&(a=a[0].t>a[1].t?a[0]:a[1]),(d=Je(u,[a]))[0]&&(a._n1=new Fe(Me,d[0].slice(2))),a._n1NO=5):a={x:t,y:i+e-o,_n1NO:6})}return[a,l]}(i,e,o,r,s,u,a,l)}}(_,t,i,e,n,o,r,s,h,a,m),O=T[0],A=T[1],S=new Ye,L=S._hS;L.push(new Fe(Pe,[O.x,O.y])),L.push(new Fe(Ne,[h,a])),L.push(new Fe(Ne,[A.x,A.y])),A._n1&&(L.push(A._n1),A._n1NO++);var w=A._n1NO%8,I=O._n1NO;for(;L.push(y[w]),++w,(w%=8)!=I;);O._n1&&L.push(O._n1);return S.closePath(),S}(t,i,e,n,o,r,s,h,a)};function Ze(t,i,e,n,o,r,s,h,a,l,_,u,c,d){var f,E,g,v,p=new lt(u,c,e,n),y=new lt(i[0],i[1],i[4],i[5])._3W(p,_),m=y[0],T=y[1];return m._rest!==S?(m._n1NO=(t-1)%8,T._n1NO=(t+1)%8,f=m._rest,7==t?(m.y=r+l+Math.min(d.height,f),T.x=o+a+Math.min(d.width,f)):5==t?(m.x=o+a+Math.min(d.width,f),T.y=r+h-l-Math.min(d.height,f)):3==t?(m.y=r+h-l-Math.min(d.height,f),T.x=o+s-a-Math.min(d.width,f)):1==t&&(m.x=o+s-a-Math.min(d.width,f),T.y=r+l+Math.min(d.height,f))):(p._nT(p._nX,p._nZ,m.x,m.y),m=p._$i(i),p._nT(p._nX,p._nZ,T.x,T.y),g=(E=Je(i,[m,T=p._$i(i)]))[0],v=E[2],m._n1NO=t,T._n1NO=t,m._n1=new Fe(Me,g.slice(2)),T._n1=new Fe(Me,v.slice(2))),[m,T]}function Je(t,i){for(var e,n,o,r,s,h,a=t[0],l=t[1],_=t[2],u=t[3],c=t[4],d=t[5],f=[],E=0;E<i.length;E++)0!=(h=(s=i[E]).t)&&1!=h?(e=a+(_-a)*h,n=l+(u-l)*h,o=_+(c-_)*h,r=u+(d-u)*h,f.push([a,l,e,n,s.x,s.y]),a=s.x,l=s.y,_=o,u=r):f.push(null);return o!==S&&f.push([s.x,s.y,o,r,c,d]),f}var Qe,qe={server:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(6.75,3.9033,30.5914,27.7447);i.addColorStop(.0493,"#1C6B9D"),i.addColorStop(.0689,"#186493"),i.addColorStop(.0939,"#145E8B"),i.addColorStop(.129,"#115B87"),i.addColorStop(.2266,"#115A85"),i.addColorStop(.2556,"#125C89"),i.addColorStop(.2869,"#176291"),i.addColorStop(.3194,"#1D6C9F"),i.addColorStop(.3525,"#2479B0"),i.addColorStop(.3695,"#2881BB"),i.addColorStop(.5025,"#1F6FA2"),i.addColorStop(.9212,"#115A86"),i.addColorStop(1,"#004063"),t.fillStyle=i,t.beginPath(),t.moveTo(25.677,4.113),t.bezierCurveTo(25.361,2.4410000000000007,23.364,2.7940000000000005,22.14,2.7990000000000004),t.bezierCurveTo(19.261,2.813,16.381,2.8260000000000005,13.502,2.8400000000000003),t.bezierCurveTo(12.185,2.846,10.699000000000002,2.652,9.393,2.8790000000000004),t.bezierCurveTo(9.19,2.897,8.977,2.989,8.805,3.094),t.bezierCurveTo(8.084999999999999,3.5109999999999997,7.436999999999999,4.1259999999999994,6.776,4.63),t.bezierCurveTo(5.718999999999999,5.436,4.641,6.22,3.6029999999999998,7.05),t.bezierCurveTo(4.207,6.5889999999999995,21.601999999999997,36.579,21.028,37.307),t.bezierCurveTo(22.019,36.063,23.009999999999998,34.819,24.000999999999998,33.575),t.bezierCurveTo(24.587999999999997,32.84,25.589999999999996,31.995000000000005,25.593999999999998,30.983000000000004),t.bezierCurveTo(25.595999999999997,30.489000000000004,25.598,29.994000000000003,25.601,29.500000000000004),t.bezierCurveTo(25.612,26.950000000000003,25.622,24.400000000000006,25.633,21.85),t.bezierCurveTo(25.657,16.318,25.680999999999997,10.786000000000001,25.704,5.253),t.bezierCurveTo(25.706,4.885,25.749,4.478,25.677,4.113),t.bezierCurveTo(25.67,4.077,25.697,4.217,25.677,4.113),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(19.763,6.645),t.bezierCurveTo(20.002000000000002,6.643999999999999,20.23,6.691999999999999,20.437,6.778),t.bezierCurveTo(20.644000000000002,6.864999999999999,20.830000000000002,6.991,20.985,7.146999999999999),t.bezierCurveTo(21.14,7.302999999999999,21.266,7.488999999999999,21.352999999999998,7.696999999999999),t.bezierCurveTo(21.438999999999997,7.903999999999999,21.487,8.133,21.487,8.372),t.lineTo(21.398,36.253),t.bezierCurveTo(21.397,36.489,21.349,36.713,21.262,36.917),t.bezierCurveTo(21.174,37.121,21.048000000000002,37.305,20.893,37.458),t.bezierCurveTo(20.738,37.611,20.553,37.734,20.348,37.818999999999996),t.bezierCurveTo(20.141,37.903999999999996,19.916,37.95099999999999,19.679,37.949),t.lineTo(4.675,37.877),t.bezierCurveTo(4.4399999999999995,37.876000000000005,4.216,37.827000000000005,4.012,37.741),t.bezierCurveTo(3.8089999999999997,37.653999999999996,3.6249999999999996,37.528999999999996,3.4719999999999995,37.376),t.bezierCurveTo(3.3179999999999996,37.221,3.1939999999999995,37.037,3.1079999999999997,36.833999999999996),t.bezierCurveTo(3.022,36.629999999999995,2.9739999999999998,36.406,2.9739999999999998,36.172),t.lineTo(2.924,8.431),t.bezierCurveTo(2.923,8.192,2.971,7.964,3.057,7.758),t.bezierCurveTo(3.143,7.552,3.267,7.365,3.4219999999999997,7.209),t.bezierCurveTo(3.5769999999999995,7.052999999999999,3.76,6.925,3.965,6.837),t.bezierCurveTo(4.17,6.749,4.396,6.701,4.633,6.7),t.lineTo(19.763,6.645),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.fillStyle="#efefef",t.beginPath(),t.arc(12.208,26.543,2.208,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.arc(12.208,26.543,1.876,0,6.283185307179586,!0),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#efefef",t.beginPath(),t.moveTo(19.377,17.247),t.bezierCurveTo(19.377,17.724,18.991999999999997,18.108999999999998,18.516,18.108999999999998),t.lineTo(5.882,18.108999999999998),t.bezierCurveTo(5.404999999999999,18.108999999999998,5.02,17.723,5.02,17.247),t.lineTo(5.02,11.144),t.bezierCurveTo(5.02,10.666,5.406,10.281,5.882,10.281),t.lineTo(18.516,10.281),t.bezierCurveTo(18.993,10.281,19.377,10.666,19.377,11.144),t.lineTo(19.377,17.247),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(18.536,13.176),t.bezierCurveTo(18.536,13.518,18.261000000000003,13.794,17.919,13.794),t.lineTo(6.479,13.794),t.bezierCurveTo(6.1370000000000005,13.794,5.861,13.518,5.861,13.176),t.lineTo(5.861,11.84),t.bezierCurveTo(5.861,11.498,6.137,11.221,6.479,11.221),t.lineTo(17.918,11.221),t.bezierCurveTo(18.259999999999998,11.221,18.535,11.497,18.535,11.84),t.lineTo(18.535,13.176),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(18.536,16.551),t.bezierCurveTo(18.536,16.892999999999997,18.261000000000003,17.168999999999997,17.919,17.168999999999997),t.lineTo(6.479,17.168999999999997),t.bezierCurveTo(6.1370000000000005,17.168999999999997,5.861,16.892999999999997,5.861,16.551),t.lineTo(5.861,15.215999999999998),t.bezierCurveTo(5.861,14.872999999999998,6.137,14.596999999999998,6.479,14.596999999999998),t.lineTo(17.918,14.596999999999998),t.bezierCurveTo(18.259999999999998,14.596999999999998,18.535,14.872999999999998,18.535,15.215999999999998),t.lineTo(18.535,16.551),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore()}},exchanger2:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(.4102,24.3613,39.5898,24.3613);i.addColorStop(0,"#1C6B9D"),i.addColorStop(.0788,"#115A85"),i.addColorStop(.2046,"#135D89"),i.addColorStop(.3649,"#186494"),i.addColorStop(.5432,"#1F70A4"),i.addColorStop(.6798,"#257AB2"),i.addColorStop(.7462,"#2377AD"),i.addColorStop(.8508,"#1E6DA0"),i.addColorStop(.98,"#125C89"),i.addColorStop(1,"#105984"),t.fillStyle=i,t.beginPath(),t.moveTo(.41,16.649),t.bezierCurveTo(.633,19.767,.871,20.689,1.094,23.807000000000002),t.bezierCurveTo(1.29,26.548000000000002,3.324,28.415000000000003,5.807,29.711000000000002),t.bezierCurveTo(10.582,32.202000000000005,16.477,32.806000000000004,21.875999999999998,32.523),t.bezierCurveTo(26.929,32.258,32.806,31.197000000000003,36.709999999999994,27.992000000000004),t.bezierCurveTo(38.30499999999999,26.728000000000005,38.83599999999999,25.103000000000005,38.998999999999995,23.161000000000005),t.bezierCurveTo(39.589,16.135000000000005,39.589,16.135000000000005,39.589,16.135000000000005),t.bezierCurveTo(39.589,16.135000000000005,3.26,16.647,.41,16.649),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#2e8ece",t.beginPath(),t.moveTo(16.4,25.185),t.bezierCurveTo(12.807999999999998,24.924999999999997,9.139,24.238,5.857999999999999,22.705),t.bezierCurveTo(3.175999999999999,21.450999999999997,-.32200000000000095,18.971999999999998,.544999999999999,15.533999999999999),t.bezierCurveTo(1.3499999999999992,12.335999999999999,4.987999999999999,10.495999999999999,7.807999999999999,9.428999999999998),t.bezierCurveTo(11.230999999999998,8.133999999999999,14.911999999999999,7.519999999999999,18.558,7.345999999999998),t.bezierCurveTo(22.233,7.169999999999998,25.966,7.437999999999998,29.548000000000002,8.300999999999998),t.bezierCurveTo(32.673,9.052999999999999,36.192,10.296,38.343,12.814999999999998),t.bezierCurveTo(40.86600000000001,15.768999999999998,39.208000000000006,19.066999999999997,36.406000000000006,21.043999999999997),t.bezierCurveTo(33.566,23.046999999999997,30.055000000000007,24.071999999999996,26.670000000000005,24.676999999999996),t.bezierCurveTo(23.289,25.28,19.824,25.436,16.4,25.185),t.bezierCurveTo(13.529,24.977,19.286,25.396,16.4,25.185),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(5.21,21.754),t.lineTo(8.188,17.922),t.lineTo(9.53,18.75),t.lineTo(15.956,16.004),t.lineTo(18.547,17.523),t.lineTo(12.074,20.334),t.lineTo(13.464,21.204),t.lineTo(5.21,21.754),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(17.88,14.61),t.lineTo(9.85,13.522),t.lineTo(11.703,12.757),t.lineTo(7.436,10.285),t.lineTo(10.783,8.942),t.lineTo(15.091,11.357),t.lineTo(16.88,10.614),t.lineTo(17.88,14.61),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(17.88,14.61),t.lineTo(9.85,13.522),t.lineTo(11.703,12.757),t.lineTo(7.436,10.285),t.lineTo(10.783,8.942),t.lineTo(15.091,11.357),t.lineTo(16.88,10.614),t.lineTo(17.88,14.61),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(23.556,15.339),t.lineTo(20.93,13.879),t.lineTo(26.953,11.304),t.lineTo(25.559,10.567),t.lineTo(33.251,9.909),t.lineTo(31.087,13.467),t.lineTo(29.619,12.703),t.lineTo(23.556,15.339),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(30.028,23.383),t.lineTo(24.821,20.366),t.lineTo(22.915,21.227),t.lineTo(21.669,16.762),t.lineTo(30.189,17.942),t.lineTo(28.33,18.782),t.lineTo(33.579,21.725),t.lineTo(30.028,23.383),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(30.028,23.383),t.lineTo(24.821,20.366),t.lineTo(22.915,21.227),t.lineTo(21.669,16.762),t.lineTo(30.189,17.942),t.lineTo(28.33,18.782),t.lineTo(33.579,21.725),t.lineTo(30.028,23.383),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.restore(),t.restore(),t.restore()}},exchanger:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(.2095,20.7588,39.4941,20.7588);i.addColorStop(0,"#6A6969"),i.addColorStop(.0788,"#4F4C4B"),i.addColorStop(.352,"#545252"),i.addColorStop(.6967,"#646262"),i.addColorStop(.8916,"#6F6E6F"),i.addColorStop(.9557,"#4C4948"),i.addColorStop(1,"#494645"),t.fillStyle=i,t.beginPath(),t.moveTo(39.449,12.417),t.lineTo(39.384,9.424),t.bezierCurveTo(39.384,9.424,.7980000000000018,22.264,.3710000000000022,23.024),t.bezierCurveTo(-.026999999999997804,23.733,.4240000000000022,24.903000000000002,.5190000000000022,25.647000000000002),t.bezierCurveTo(.7240000000000022,27.244000000000003,.9240000000000023,28.841,1.1350000000000022,30.437),t.bezierCurveTo(1.3220000000000023,31.843,2.7530000000000023,32.094,3.9620000000000024,32.094),t.bezierCurveTo(8.799000000000003,32.092,13.636000000000003,32.091,18.473000000000003,32.089),t.bezierCurveTo(23.515,32.086999999999996,28.556000000000004,32.086,33.598,32.083999999999996),t.bezierCurveTo(34.859,32.083999999999996,36.286,31.979999999999997,37.266,31.081999999999997),t.bezierCurveTo(37.537,30.820999999999998,37.655,30.535999999999998,37.699999999999996,30.229999999999997),t.lineTo(37.711,30.316999999999997),t.lineTo(39.281,16.498999999999995),t.bezierCurveTo(39.281,16.498999999999995,39.467999999999996,15.126999999999995,39.489,14.666999999999994),t.bezierCurveTo(39.515,14.105,39.449,12.417,39.449,12.417),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(i=t.createLinearGradient(19.8052,7.7949,19.8052,24.7632)).addColorStop(0,"#7D7D7D"),i.addColorStop(.1455,"#808080"),i.addColorStop(.2975,"#888888"),i.addColorStop(.4527,"#939293"),i.addColorStop(.6099,"#9E9D9D"),i.addColorStop(.7687,"#A7A5A4"),i.addColorStop(.9268,"#A9A6A5"),i.addColorStop(.9754,"#A7A4A3"),i.addColorStop(1,"#FFFFFF"),t.fillStyle=i,t.beginPath(),t.moveTo(33.591,24.763),t.bezierCurveTo(23.868000000000002,24.754,14.145,24.746000000000002,4.423000000000002,24.738000000000003),t.bezierCurveTo(3.140000000000002,24.737000000000002,-.48799999999999777,24.838000000000005,.3520000000000021,22.837000000000003),t.bezierCurveTo(1.292000000000002,20.594000000000005,2.2330000000000023,18.351000000000003,3.1730000000000023,16.108000000000004),t.bezierCurveTo(4.113000000000002,13.865000000000006,5.054000000000002,11.623000000000005,5.994000000000002,9.380000000000004),t.bezierCurveTo(6.728000000000002,7.629000000000005,9.521000000000003,7.885000000000004,11.156000000000002,7.880000000000004),t.bezierCurveTo(16.974000000000004,7.861000000000004,22.793000000000003,7.843000000000004,28.612000000000002,7.825000000000005),t.bezierCurveTo(30.976000000000003,7.818000000000005,33.341,7.810000000000005,35.707,7.803000000000004),t.bezierCurveTo(36.157000000000004,7.802000000000004,36.609,7.787000000000004,37.06,7.804000000000005),t.bezierCurveTo(37.793,7.833000000000005,39.389,7.875000000000004,39.385000000000005,9.424000000000005),t.bezierCurveTo(39.38400000000001,9.647000000000006,39.31,10.138000000000005,39.27700000000001,10.359000000000005),t.bezierCurveTo(38.81900000000001,13.361000000000004,38.452000000000005,15.764000000000006,37.99400000000001,18.766000000000005),t.bezierCurveTo(37.806000000000004,19.998000000000005,37.61800000000001,21.230000000000004,37.43000000000001,22.462000000000007),t.bezierCurveTo(37.151,24.271,35.264,24.77,33.591,24.763),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.save(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(10.427,19.292),t.lineTo(5.735,16.452),t.lineTo(12.58,13.8),t.lineTo(12.045,15.07),t.lineTo(20.482,15.072),t.lineTo(19.667,17.887),t.lineTo(11.029,17.851),t.lineTo(10.427,19.292),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(13.041,13.042),t.lineTo(8.641,10.73),t.lineTo(14.82,8.474),t.lineTo(14.373,9.537),t.lineTo(22.102,9.479),t.lineTo(21.425,11.816),t.lineTo(13.54,11.85),t.lineTo(13.041,13.042),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(29.787,16.049),t.lineTo(29.979,14.704),t.lineTo(21.51,14.706),t.lineTo(22.214,12.147),t.lineTo(30.486,12.116),t.lineTo(30.653,10.926),t.lineTo(36.141,13.4),t.lineTo(29.787,16.049),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#f7f8f8",t.beginPath(),t.moveTo(28.775,23.14),t.lineTo(29.011,21.49),t.lineTo(19.668,21.405),t.lineTo(20.523,18.295),t.lineTo(29.613,18.338),t.lineTo(29.815,16.898),t.lineTo(35.832,19.964),t.lineTo(28.775,23.14),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore(),t.restore()}},cloud:{draw:function(t){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(90.75,0),t.lineTo(90.75,62.125),t.lineTo(0,62.125),t.closePath(),t.clip(),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save();var i=t.createLinearGradient(44.0054,6.4116,44.0054,51.3674);i.addColorStop(0,"rgba(159, 160, 160, 0.7)"),i.addColorStop(.9726,"#E9EAEA"),t.fillStyle=i,t.beginPath(),t.moveTo(57.07,20.354),t.bezierCurveTo(57.037,20.354,57.006,20.358,56.974000000000004,20.358),t.bezierCurveTo(54.461000000000006,14.308,48.499,10.049000000000001,41.538000000000004,10.049000000000001),t.bezierCurveTo(33.801,10.049000000000001,27.309000000000005,15.316000000000003,25.408000000000005,22.456000000000003),t.bezierCurveTo(18.988000000000007,23.289,14.025000000000006,28.765000000000004,14.025000000000006,35.413000000000004),t.bezierCurveTo(14.025000000000006,42.635000000000005,19.880000000000006,48.49,27.102000000000004,48.49),t.bezierCurveTo(29.321000000000005,48.49,31.407000000000004,47.933,33.237,46.961),t.bezierCurveTo(34.980000000000004,49.327,37.78,50.867999999999995,40.945,50.867999999999995),t.bezierCurveTo(43.197,50.867999999999995,45.261,50.086,46.896,48.785999999999994),t.bezierCurveTo(49.729,50.78699999999999,53.244,51.98799999999999,57.07,51.98799999999999),t.bezierCurveTo(66.412,51.98799999999999,73.986,44.90699999999999,73.986,36.17099999999999),t.bezierCurveTo(73.986,27.436,66.413,20.354,57.07,20.354),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},node:{width:60,height:100,draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(40,0),t.lineTo(40,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(13.948,31.075),t.lineTo(25.914,31.075),t.quadraticCurveTo(25.914,31.075,25.914,31.075),t.lineTo(25.914,34.862),t.quadraticCurveTo(25.914,34.862,25.914,34.862),t.lineTo(13.948,34.862),t.quadraticCurveTo(13.948,34.862,13.948,34.862),t.lineTo(13.948,31.075),t.quadraticCurveTo(13.948,31.075,13.948,31.075),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(29.679,35.972),t.bezierCurveTo(29.679,36.675000000000004,29.110999999999997,37.244,28.407999999999998,37.244),t.lineTo(11.456,37.244),t.bezierCurveTo(10.751999999999999,37.244,10.183,36.675,10.183,35.972),t.lineTo(10.183,36.136),t.bezierCurveTo(10.183,35.431000000000004,10.751999999999999,34.863,11.456,34.863),t.lineTo(28.407,34.863),t.bezierCurveTo(29.11,34.863,29.678,35.431,29.678,36.136),t.lineTo(29.678,35.972),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(.196,29.346),t.bezierCurveTo(.196,30.301,.9690000000000001,31.075,1.925,31.075),t.lineTo(37.936,31.075),t.bezierCurveTo(38.891,31.075,39.665,30.301,39.665,29.346),t.lineTo(39.665,27.174),t.lineTo(.196,27.174),t.lineTo(.196,29.346),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(37.937,3.884),t.lineTo(1.926,3.884),t.bezierCurveTo(.97,3.884,.19699999999999984,4.657,.19699999999999984,5.614),t.lineTo(.19699999999999984,27.12),t.lineTo(39.666000000000004,27.12),t.lineTo(39.666000000000004,5.615),t.bezierCurveTo(39.665,4.657,38.892,3.884,37.937,3.884),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(6.9609,2.9341,32.9008,28.874);i.addColorStop(0,"#B2CBEA"),i.addColorStop(1,"#2E8ECE"),t.fillStyle=i,t.beginPath(),t.moveTo(35.788,6.39),t.lineTo(4.074,6.39),t.bezierCurveTo(3.315,6.39,2.702,7.003,2.702,7.763),t.lineTo(2.702,24.616),t.lineTo(37.159,24.616),t.lineTo(37.159,7.763),t.bezierCurveTo(37.159,7.003,36.546,6.39,35.788,6.39),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},group:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(47.75,0),t.lineTo(47.75,40),t.lineTo(0,40),t.closePath(),t.clip(),t.translate(0,0),t.translate(0,0),t.scale(1,1),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(10.447,26.005),t.lineTo(18.847,26.005),t.quadraticCurveTo(18.847,26.005,18.847,26.005),t.lineTo(18.847,28.663),t.quadraticCurveTo(18.847,28.663,18.847,28.663),t.lineTo(10.447,28.663),t.quadraticCurveTo(10.447,28.663,10.447,28.663),t.lineTo(10.447,26.005),t.quadraticCurveTo(10.447,26.005,10.447,26.005),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(21.491,29.443),t.bezierCurveTo(21.491,29.935000000000002,21.094,30.338,20.597,30.338),t.lineTo(8.698,30.338),t.bezierCurveTo(8.201,30.338,7.8020000000000005,29.936,7.8020000000000005,29.443),t.lineTo(7.8020000000000005,29.557000000000002),t.bezierCurveTo(7.8020000000000005,29.063000000000002,8.201,28.662000000000003,8.698,28.662000000000003),t.lineTo(20.597,28.662000000000003),t.bezierCurveTo(21.093,28.662000000000003,21.491,29.062,21.491,29.557000000000002),t.lineTo(21.491,29.443),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(.789,24.79),t.bezierCurveTo(.789,25.461,1.334,26.005,2.0060000000000002,26.005),t.lineTo(27.289,26.005),t.bezierCurveTo(27.961000000000002,26.005,28.504,25.461,28.504,24.79),t.lineTo(28.504,23.267),t.lineTo(.789,23.267),t.lineTo(.789,24.79),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(27.289,6.912),t.lineTo(2.006,6.912),t.bezierCurveTo(1.3339999999999996,6.912,.7889999999999997,7.455,.7889999999999997,8.126),t.lineTo(.7889999999999997,23.227),t.lineTo(28.503999999999998,23.227),t.lineTo(28.503999999999998,8.126),t.bezierCurveTo(28.504,7.455,27.961,6.912,27.289,6.912),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(5.54,6.2451,23.7529,24.458);i.addColorStop(0,"#B2CBEA"),i.addColorStop(1,"#2E8ECE"),t.fillStyle=i,t.beginPath(),t.moveTo(25.78,8.671),t.lineTo(3.514,8.671),t.bezierCurveTo(2.9819999999999998,8.671,2.549,9.101999999999999,2.549,9.635),t.lineTo(2.549,21.466),t.lineTo(26.743,21.466),t.lineTo(26.743,9.636),t.bezierCurveTo(26.743,9.102,26.312,8.671,25.78,8.671),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(27.053,33.602),t.lineTo(36.22,33.602),t.quadraticCurveTo(36.22,33.602,36.22,33.602),t.lineTo(36.22,36.501),t.quadraticCurveTo(36.22,36.501,36.22,36.501),t.lineTo(27.053,36.501),t.quadraticCurveTo(27.053,36.501,27.053,36.501),t.lineTo(27.053,33.602),t.quadraticCurveTo(27.053,33.602,27.053,33.602),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(39.104,37.352),t.bezierCurveTo(39.104,37.891,38.67,38.327,38.13,38.327),t.lineTo(25.143,38.327),t.bezierCurveTo(24.602,38.327,24.166,37.891,24.166,37.352),t.lineTo(24.166,37.477999999999994),t.bezierCurveTo(24.166,36.937,24.602,36.501,25.143,36.501),t.lineTo(38.131,36.501),t.bezierCurveTo(38.671,36.501,39.105,36.937,39.105,37.477999999999994),t.lineTo(39.105,37.352),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#c9caca",t.beginPath(),t.moveTo(16.514,32.275),t.bezierCurveTo(16.514,33.004999999999995,17.107,33.601,17.839,33.601),t.lineTo(45.433,33.601),t.bezierCurveTo(46.166,33.601,46.758,33.005,46.758,32.275),t.lineTo(46.758,30.607999999999997),t.lineTo(16.514,30.607999999999997),t.lineTo(16.514,32.275),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(45.433,12.763),t.lineTo(17.839,12.763),t.bezierCurveTo(17.107,12.763,16.514,13.356,16.514,14.089),t.lineTo(16.514,30.57),t.lineTo(46.757999999999996,30.57),t.lineTo(46.757999999999996,14.088),t.bezierCurveTo(46.758,13.356,46.166,12.763,45.433,12.763),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(i=t.createLinearGradient(21.6973,12.0352,41.5743,31.9122)).addColorStop(0,"#B2CBEA"),i.addColorStop(1,"#2E8ECE"),t.fillStyle=i,t.beginPath(),t.moveTo(43.785,14.683),t.lineTo(19.486,14.683),t.bezierCurveTo(18.903000000000002,14.683,18.433,15.153,18.433,15.735),t.lineTo(18.433,28.649),t.lineTo(44.837,28.649),t.lineTo(44.837,15.734),t.bezierCurveTo(44.838,15.153,44.367,14.683,43.785,14.683),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.save(),t.globalAlpha=.5,t.beginPath(),t.moveTo(23.709,36.33),t.lineTo(4.232,36.33),t.lineTo(4.232,27.199),t.lineTo(5.304,27.199),t.lineTo(5.304,35.259),t.lineTo(23.709,35.259),t.lineTo(23.709,36.33),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore()}},subnetwork:{draw:function(t){t.save(),t.translate(0,0),t.beginPath(),t.moveTo(0,0),t.lineTo(60.75,0),t.lineTo(60.75,42.125),t.lineTo(0,42.125),t.closePath(),t.clip(),t.translate(0,.26859504132231393),t.scale(.6694214876033058,.6694214876033058),t.translate(0,0),t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4,t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save();var i=t.createLinearGradient(43.6724,-2.7627,43.6724,59.3806);i.addColorStop(0,"rgba(159, 160, 160, 0.7)"),i.addColorStop(.9726,"#E9EAEA"),t.fillStyle=i,t.beginPath(),t.moveTo(61.732,16.509),t.bezierCurveTo(61.686,16.509,61.644,16.515,61.599,16.515),t.bezierCurveTo(58.126,8.152000000000001,49.884,2.2650000000000006,40.262,2.2650000000000006),t.bezierCurveTo(29.567,2.2650000000000006,20.594,9.545000000000002,17.966,19.415),t.bezierCurveTo(9.09,20.566,2.229,28.136,2.229,37.326),t.bezierCurveTo(2.229,47.309,10.322,55.403000000000006,20.306,55.403000000000006),t.bezierCurveTo(23.374000000000002,55.403000000000006,26.257,54.633,28.787,53.28900000000001),t.bezierCurveTo(31.197,56.56000000000001,35.067,58.69000000000001,39.442,58.69000000000001),t.bezierCurveTo(42.555,58.69000000000001,45.408,57.60900000000001,47.669,55.81200000000001),t.bezierCurveTo(51.586,58.57800000000001,56.443999999999996,60.238000000000014,61.732,60.238000000000014),t.bezierCurveTo(74.64699999999999,60.238000000000014,85.116,50.45000000000002,85.116,38.37400000000001),t.bezierCurveTo(85.116,26.298,74.646,16.509,61.732,16.509),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.fillStyle="#9fa0a0",t.beginPath(),t.moveTo(34.966,44.287),t.lineTo(45.112,44.287),t.quadraticCurveTo(45.112,44.287,45.112,44.287),t.lineTo(45.112,47.497),t.quadraticCurveTo(45.112,47.497,45.112,47.497),t.lineTo(34.966,47.497),t.quadraticCurveTo(34.966,47.497,34.966,47.497),t.lineTo(34.966,44.287),t.quadraticCurveTo(34.966,44.287,34.966,44.287),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#727171",t.beginPath(),t.moveTo(48.306,48.439),t.bezierCurveTo(48.306,49.034,47.824999999999996,49.52,47.226,49.52),t.lineTo(32.854,49.52),t.bezierCurveTo(32.253,49.52,31.771,49.034000000000006,31.771,48.439),t.lineTo(31.771,48.578),t.bezierCurveTo(31.771,47.981,32.253,47.497,32.854,47.497),t.lineTo(47.226,47.497),t.bezierCurveTo(47.824999999999996,47.497,48.306,47.98,48.306,48.578),t.lineTo(48.306,48.439),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#b5b5b6",t.beginPath(),t.moveTo(23.302,42.82),t.bezierCurveTo(23.302,43.63,23.96,44.287,24.772,44.287),t.lineTo(55.308,44.287),t.bezierCurveTo(56.12,44.287,56.775,43.629999999999995,56.775,42.82),t.lineTo(56.775,40.98),t.lineTo(23.302,40.98),t.lineTo(23.302,42.82),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.fillStyle="#3e3a39",t.beginPath(),t.moveTo(55.307,21.229),t.lineTo(24.771,21.229),t.bezierCurveTo(23.959,21.229,23.301000000000002,21.884,23.301000000000002,22.695),t.lineTo(23.301000000000002,40.933),t.lineTo(56.774,40.933),t.lineTo(56.774,22.695),t.bezierCurveTo(56.774,21.884,56.119,21.229,55.307,21.229),t.closePath(),t.fill(),t.stroke(),t.restore(),t.save(),t.save(),t.restore(),t.save(),t.restore(),t.restore(),t.save(),(i=t.createLinearGradient(29.04,20.4219,51.0363,42.4181)).addColorStop(0,"#B2CBEA"),i.addColorStop(1,"#2E8ECE"),t.fillStyle=i,t.beginPath(),t.moveTo(53.485,23.353),t.lineTo(26.592,23.353),t.bezierCurveTo(25.948999999999998,23.353,25.427,23.873,25.427,24.517000000000003),t.lineTo(25.427,38.807),t.lineTo(54.647,38.807),t.lineTo(54.647,24.517000000000003),t.bezierCurveTo(54.648,23.873,54.127,23.353,53.485,23.353),t.closePath(),t.fill(),t.stroke(),t.restore(),t.restore(),t.restore()}}};for(Qe in qe)me("Q-"+Qe,qe[Qe]);function tn(t){this.$layoutByAnchorPoint&&this._o4W&&(t.x-=this._o4W.x,t.y-=this._o4W.y),this.$rotate&&bi(t,this.$rotate),t.x+=this.$offsetX||0,t.y+=this.$offsetY||0;var i=vo(this);return i?bi(t,i):t}function en(t){var i=vo(this);return i&&bi(t,-i),t.x-=this.$offsetX||0,t.y-=this.$offsetY||0,this.$rotate&&bi(t,-this.$rotate),this.$layoutByAnchorPoint&&this._o4W&&(t.x+=this._o4W.x,t.y+=this._o4W.y),t}function nn(){var t=this.$invalidateSize;this.$invalidateSize&&(this.$invalidateSize=!1,this.$invalidateAnchorPoint=!0,this._8Y.setByRect(this._l2),this.$padding&&this._8Y.grow(this.$padding),this.$border&&this._8Y.grow(this.$border));var i,e=this._$w();return e&&(i=this.showPointer&&this.$pointerWidth),this.$invalidateAnchorPoint&&this.$layoutByAnchorPoint&&(this.$invalidateAnchorPoint=!1,i&&(t=!0),this._o4W=Lt(this.$anchorPosition,this._8Y.width,this._8Y.height),this._o4W.x+=this._8Y.x,this._o4W.y+=this._8Y.y),e?(t&&(this._o4ackgroundGradientInvalidateFlag=!0,function(t){var i=this._8Y.x+this.$border/2,e=this._8Y.y+this.$border/2,n=this._8Y.width-this.$border,o=this._8Y.height-this.$border,r=0,s=0;this.$borderRadius&&(U(this.$borderRadius)?r=s=this.$borderRadius:(r=this.$borderRadius.x||0,s=this.$borderRadius.y||0),r=Math.min(r,n/2),s=Math.min(s,o/2));if(t&&(this._pointerX=this._o4W.x-this.$offsetX+this.$pointerX,this._pointerY=this._o4W.y-this.$offsetY+this.$pointerY,!this._8Y.intersectsPoint(this._pointerX,this._pointerY))){var h=new je(i,e,n,o,r,s,this.$pointerWidth,this._pointerX,this._pointerY);return this._nDShape=h._n1,this._nDShape.bounds.set(i,e,n,o),void(this.__n4Pointer=!0)}this._nDShape&&this._nDShape.clear();this._nDShape=ro.getRect(i,e,n,o,r,s,this._nDShape),this._nDShape.bounds.set(i,e,n,o)}.call(this,i)),this._o4ackgroundGradientInvalidateFlag&&(this._o4ackgroundGradientInvalidateFlag=!1,this.backgroundGradient&&this._nDShape&&this._nDShape.bounds?this._o4ackgroundGradient=Se.prototype.generatorGradient.call(this.backgroundGradient,this._nDShape.bounds):this._o4ackgroundGradient=null)):this.__n4Pointer=!1,t}function on(t,i,e,n){if(n&&(t.width<0||t.height<0))return t.x=i,t.y=e,void(t.width=t.height=0);i<t.x?(t.width+=t.x-i,t.x=i):i>t.x+t.width&&(t.width=i-t.x),e<t.y?(t.height+=t.y-e,t.y=e):e>t.y+t.height&&(t.height=e-t.y)}var rn=function(){this.$invalidateRotate=!1;var t=this._hG;t.clear();var i=this.$border||0,e=this._8Y.x+i/2,n=this._8Y.y+i/2,o=this._8Y.width-i,r=this._8Y.height-i,s=tn.call(this,{x:e,y:n});on(t,s.x,s.y,!0),on(t,(s=tn.call(this,{x:e+o,y:n})).x,s.y),on(t,(s=tn.call(this,{x:e+o,y:n+r})).x,s.y),on(t,(s=tn.call(this,{x:e,y:n+r})).x,s.y),this.__n4Pointer&&on(t,(s=tn.call(this,{x:this._pointerX,y:this._pointerY})).x,s.y),i&&t.grow(i/2)};function sn(t,i){var e;i?i._8Y.isEmpty()?(t.$x=i.$x,t.$y=i.$y):(e=function(t,i,e){var n,o=t.position,r=t.layoutByPath===S?this.layoutByPath:t.layoutByPath;return this.$data instanceof Ye&&r?((n=he._o4H(o,this.$data,this.lineWidth,i,e,t.globalDirection)).x*=this._l3,n.y*=this._l5):((n=Lt(o,this._8Y.width,this._8Y.height)).x+=this._8Y.x,n.y+=this._8Y.y),tn.call(this,n)}.call(i,t),t.$x=e.x,t.$y=e.y,t._hostRotate=e.rotate):(t.$x=0,t.$y=0),t.$invalidateRotate&&rn.call(t)}function hn(t){if(t.lineDash===S){var i,e,n;if(t.setLineDash)i=t.getLineDash,e=t.setLineDash;else{if(t.mozDash!==S)n="mozDash";else{if(t.webkitLineDash===S)return;n="webkitLineDash"}e=function(t){this[n]=t},i=function(){return this[n]}}Q(t,"lineDash",{get:function(){return i.call(this)},set:function(t){e.call(this,t)}})}if(t.lineDashOffset===S){var o;if(t.mozDashOffset!==S)o="mozDashOffset";else{if(t.webkitLineDashOffset===S)return;o="webkitLineDashOffset"}Q(t,"lineDashOffset",{get:function(){return this[o]},set:function(t){this[o]=t}})}}function an(t){return t.reduce(function(t,i){return 2*t+i},0)}function ln(t){for(var i=[],e=7;0<=e;e--)i.push(!!(t&1<<e));return i}var _n={_hT:!1,_lL:null,_dP:0,_mI:-1,_mC:null,_fH:function(t){this._lL||(this._lL=[],this._kP=2),this._lL.push(t),this._eF(),this._mH()},_mH:function(){var i;this._mC||((i=this)._mC=setTimeout(function t(){!1===i._eF()?delete i._mC:i._mC=setTimeout(t,i._hV())},this._hV()))},_hV:function(){return Math.max(20,this._lL[this._mI].delay)},_eF:function(){return this._gD(this._mI+1)},_gD:function(t){if(this._hT)t%=this._dP;else if(t>=this._lL.length)return!1;if(this._mI==t)return!1;this._mI=t;var i=this._lL[this._mI],e=i._o6ache;return e||(i._o6ache=e=Ni(this.width,this.height),e.g.putImageData(i.data,0,0),e._pixels=i._pixels),this._m5=e,this.$invalidateSize=!0,this._eU()},_dQ:function(){if(this._lL){if(this._hT=!0,this._dP=this._lL.length,1==this._dP)return this._eU();this._mH()}else this._jF()},_nA:function(){this._mC&&(clearTimeout(this._mC),delete this._mC)},_eU:function(){var t=this._dispatcher.listeners;if(!t||!t.length)return!1;for(var i=new It(this,"image","load",this._m5),e=0,n=t.length;e<n;e++){var o=t[e];o.scope._l7&&o.scope._l7._jDed?(t.splice(e,1),e--,n--):o.onEvent.call(o.scope,i)}return 0<t.length},_o4N:function(t,i){this._dispatcher.addListener(t,i),this._hT&&!this._mC&&this._mH()},_7B:function(t,i){this._dispatcher.removeListener(t,i),this._dispatcher._o65()||this._nA()},_jD:function(){this._nA(),this._dispatcher.clear()},_gW:function(t,i,e){var n=this._m5._o4ufferedImage;return n||(this._m5._o4ufferedImage=n=new Ke(this._m5,1)),n}},un=function(t){this.data=t,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return 255&t.charCodeAt(this.pos++)},this.readBytes=function(t){for(var i=[],e=0;e<t;e++)i.push(this.readByte());return i},this.read=function(t){for(var i="",e=0;e<t;e++)i+=String.fromCharCode(this.readByte());return i},this.readUnsigned=function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}},cn=function(o,r){r=r||{};function s(t){for(var i=[],e=0;e<t;e++)i.push(o.readBytes(3));return i}function h(){for(var t,i="";t=o.readByte(),i+=o.read(t),0!==t;);return i}function i(t){var i,e;switch(t.label=o.readByte(),t.label){case 249:t.extType="gce",function(t){o.readByte();var i=ln(o.readByte());t.reserved=i.splice(0,3),t.disposalMethod=an(i.splice(0,3)),t.userInput=i.shift(),t.transparencyGiven=i.shift(),t.delayTime=o.readUnsigned(),t.transparencyIndex=o.readByte(),t.terminator=o.readByte(),r.gce&&r.gce(t)}(t);break;case 254:t.extType="com",(e=t).comment=h(),r.com&&r.com(e);break;case 1:t.extType="pte",function(t){o.readByte();t.ptHeader=o.readBytes(12),t.ptData=h(),r.pte&&r.pte(t)}(t);break;case 255:t.extType="app",function(t){var i;o.readByte();t.identifier=o.read(8),t.authCode=o.read(3),"NETSCAPE"===t.identifier?function(t){o.readByte();t.unknown=o.readByte(),t.iterations=o.readUnsigned(),t.terminator=o.readByte(),r.app&&r.app.NETSCAPE&&r.app.NETSCAPE(t)}(t):((i=t).appData=h(),r.app&&r.app[i.identifier]&&r.app[i.identifier](i))}(t);break;default:t.extType="unknown",(i=t).data=h(),r.unknown&&r.unknown(i)}}function e(t){t.leftPos=o.readUnsigned(),t.topPos=o.readUnsigned(),t.width=o.readUnsigned(),t.height=o.readUnsigned();var i=t.width*t.height,e=ln(o.readByte());t.lctFlag=e.shift(),t.interlaced=e.shift(),t.sorted=e.shift(),t.reserved=e.splice(0,2),t.lctSize=an(e.splice(0,3)),t.lctFlag&&(t.lct=s(1<<t.lctSize+1)),t.lzwMinCodeSize=o.readByte();var n=h();t.pixels=function(i,n,t){for(var e,o,r=0,s=[],h=1<<i,a=1+h,l=i+1,_=[],u=0;o=e,e=function(t){for(var i=0,e=0;e<t;e++)n.charCodeAt(r>>3)&1<<(7&r)&&(i|=1<<e),r++;return i}(l),!(u++>t);)if(e!==h){if(e===a)break;if(e<_.length)o!==h&&_.push(_[o].concat(_[e][0]));else{if(e!==_.length)throw new Error("Invalid LZW code.");_.push(_[o].concat(_[o][0]))}s.push.apply(s,_[e]),_.length===1<<l&&l<12&&l++}else!function(){_=[],l=i+1;for(var t=0;t<h;t++)_[t]=[t];_[h]=[],_[a]=null}();return s}(t.lzwMinCodeSize,n,i),t.interlaced&&(t.pixels=function(t,i){for(var e,n,o,r=new Array(t.length),s=t.length/i,h=[0,4,2,1],a=[8,8,4,2],l=0,_=0;_<4;_++)for(var u=h[_];u<s;u+=a[_])e=u,n=l,o=void 0,o=t.slice(n*i,(n+1)*i),r.splice.apply(r,[e*i,i].concat(o)),l++;return r}(t.pixels,t.width)),r.img&&r.img(t)}var n=function(){var t={};switch(t.sentinel=o.readByte(),String.fromCharCode(t.sentinel)){case"!":t.type="ext",i(t);break;case",":t.type="img",e(t);break;case";":t.type="eof",r.eof&&r.eof(t);break;default:throw new Error("Unknown block: 0x"+t.sentinel.toString(16))}"eof"!==t.type&&setTimeout(n,0)};!function(){var t={};if(t.sig=o.read(3),t.ver=o.read(3),"GIF"!==t.sig)throw new Error("Not a GIF file.");t.width=o.readUnsigned(),t.height=o.readUnsigned();var i=ln(o.readByte());t.gctFlag=i.shift(),t.colorRes=an(i.splice(0,3)),t.sorted=i.shift(),t.gctSize=an(i.splice(0,3)),t.bgColor=o.readByte(),t.pixelAspectRatio=o.readByte(),t.gctFlag&&(t.gct=s(1<<t.gctSize+1)),r.hdr&&r.hdr(t)}(),setTimeout(n,0)},dn="";function fn(t,i,e,n,o,r,s,h){if(!(t===e&&i===n||o===s&&r===h)){var a=(h-r)*(e-t)-(s-o)*(n-i);if(0!=a){var l=((s-o)*(i-r)-(h-r)*(t-o))/a,_=((e-t)*(i-r)-(n-i)*(t-o))/a;if(!(l<0||1<l||_<0||1<_)){var u=t+l*(e-t),c=i+l*(n-i);if(!(u===o&&c===r||u===s&&c===h))return{x:u,y:c}}}}}function En(t,e){var n;t.forEach(function(t){var i;n&&("l"===t.type||Array.isArray(t)&&2===t.length)&&e(2<=(i=(i=n).points||i).length&&i.slice(i.length-2,i.length),t.points||t,t),n=t})}d.addEventListener&&d.addEventListener("keydown",function(t){var i;t.ctrlKey&&t.shiftKey&&t.altKey&&73==t.keyCode&&(i=Si.name+"\nVersion - "+Si.version+"\nPublish Date - "+Si.publishDate+"\n"+Si.about+"\n"+Si.copyright+dn,Si.alert(i))},!1),dn="\nLicensed to: "+decodeURIComponent("%E7%83%BD%E7%81%AB%E9%80%9A%E4%BF%A1%E7%A7%91%E6%8A%80-%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD%E7%89%A9%E8%81%94%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%EF%BC%88FiLink%EF%BC%89%E7%BD%91%E7%AE%A1%E5%B9%B3%E5%8F%B0");var gn=(vn.prototype.clear=function(){this.currentPaths.length=0},vn.prototype.perLine=function(t){var u,c,d,f;t.__l9Segments=null,this.currentPaths.length&&(u=this.currentPaths,c=t,d=new pn,f=[],En(c,function(n,t,i){var e;if(d.set(n[0],n[1],t[0],t[1]),!(d.length<=8)&&(f.length=0,u.forEach(function(t){En(t,function(t,i){var e=d.getCrossPoint(t[0],t[1],i[0],i[1]);if(e){if(e.distance=at(n[0],n[1],e.x,e.y),e.distance<=4||d.length-e.distance<=4)return;f.push(e)}})}),f.length)){1<f.length&&f.sort(function(t,i){return t.distance-i.distance});for(var o,r,s=[],h=0,a=f.length;h<a;){var l=f[h++];(!o||8<l.distance-o.distance)&&(o&&_(),r=l.distance-4,s.push(new Fe("l",d.getArrayPoint(r,0)))),o=l}_(),c.__l9Segments=c.slice(0),(e=c.__l9Segments).splice.apply(e,function(){for(var t=0,i=0,e=arguments.length;i<e;i++)t+=arguments[i].length;for(var n=Array(t),o=0,i=0;i<e;i++)for(var r=arguments[i],s=0,h=r.length;s<h;s++,o++)n[o]=r[s];return n}([c.__l9Segments.indexOf(i),0],s))}function _(){s.push(new Fe("c",d.getArrayPoint(r,4,!0).concat(d.getArrayPoint(o.distance+4,4,!0)).concat(d.getArrayPoint(o.distance+4,0))))}})),this.currentPaths.push(t)},vn);function vn(){this.currentPaths=[]}var pn=(yn.prototype.set=function(t,i,e,n){this.x1=t,this.x2=e,this.y1=i,this.y2=n,this.cx=.5*(t+e),this.cy=.5*(i+n),this._mS=this._lJ=S},Object.defineProperty(yn.prototype,"length",{get:function(){return this._lJ===S?this._lJ=at(this.x1,this.y1,this.x2,this.y2):this._lJ},enumerable:!0,configurable:!0}),Object.defineProperty(yn.prototype,"angle",{get:function(){return this._mS===S?this._mS=Math.atan2(this.y2-this.y1,this.x2-this.x1):this._mS},enumerable:!0,configurable:!0}),yn.prototype.getArrayPoint=function(t,i,e){return this.getPoint(t,i,e,!0)},yn.prototype.getPoint=function(t,i,e,n){e&&Math.abs(this.angle)<Math.PI/2&&(i=-i);var o=Math.sin(this.angle),r=Math.cos(this.angle),s=this.x1+r*t-o*i,h=this.y1+o*t+r*i;return n?[s,h]:{x:s,y:h}},yn.prototype.getCrossPoint=function(t,i,e,n){return"object"==typeof t?fn(this.x1,this.y1,this.x2,this.y2,t.x1,t.y1,t.x2,t.y2):fn(this.x1,this.y1,this.x2,this.y2,t,i,e,n)},yn);function yn(){}var mn="Q-Canvas";Kt("."+mn,{position:"absolute",userSelect:"none",outline:"none",transformOrigin:"0 0","-webkit-tap-highlight-color":"rgba(0,0,0,0)"});var Tn="Q-CanvasPanel";Kt("."+Tn,{width:"100%",height:"100%",position:"relative",overflow:"hidden",textAlign:"left",outline:"none",tapHighlightColor:"rgba(0,0,0,0)",userSelect:"none"});var On="Q-Graph";function a(t,l){return function t(i){var e=i.length,n=Math.ceil(e/2);return e<=1?i:function(t,i){for(var e=t.length,n=i.length,o=e+n,r=new Array(o),s=0,h=0,a=0;a<o;)s!==e&&(h===n||l(t[s],i[h])<=0)?r[a++]=t[s++]:r[a++]=i[h++];return r}(t(i.slice(0,n)),t(i.slice(n)))}(t)}Kt("."+On,{overflow:"hidden","text-align":"left","-webkit-tap-highlight-color":"rgba(0,0,0,0)",outline:"none"});var An,Sn=f(function(t){this._o6E=new wn,this._nU=new ot,this._9D=[],this._dR=[],this._nBingList=[],this._9B={},this.bounds=new gt,this._lM=new Nn,this._viewport=new Gn,this._lM.listener=function(t){this._80(t)}.bind(this),this._dW(),this.setParent(t)},{_o66:null,_kQ:null,_nU:null,_dR:null,_lM:null,_dC:function(t){return t?(this._79s||(this._79s={}),!this._79s[t]&&(this._79s[t]=!0,void this.invalidate())):this.invalidate()},_o3U:function(t){return this._79s&&this._79s[t]},isInvalidate:function(){return this._79},clear:function(t){this._nU.clear(),this._dR.length=0,this._9B={},this._o4U=!1,t||this.invalidate()},_7X:function(){this._dC("size"),this._30()},_30:function(){this._dC("viewport")},invalidate:function(t){!t&&this._79||(this._79=!0,this._nA||(this._l9ingID=requestAnimationFrame(this._gU.bind(this))))},_7Y:function(t){(this._nA=t)?this._l9ingID&&(cancelAnimationFrame(this._l9ingID),this._l9ingID=null):this._79&&this.invalidate(!0)},_gU:function(){this._l9ingID=null,this._79=!1;var t=this._o4U;this._o4U||(this._dV(),this._o4U=!0),this._dT(!t),this._3Z(),this._l9(),this._2K()},_6L:!1,_dT:function(t){this._o6B=t||this.fullRefresh||this._6L,this._6L=!1,(t||this._79s.size)&&this._o3W(),(t||this._79s.matrix)&&this._81(),this._o69(t),this._4Z(t),this._79s={}},_3Z:function(){this._dR.length=0;var e,n=this._viewport;this._nU.forEach(function(t){var i;!1!==t.__jS&&(i=this._o67(t),n.intersects(i.x,i.y,i.width,i.height)&&this._dR.push(t))}.bind(this)),this._dR=this._k3(this._dR),this._o6B||(e=this._o6E,this._nBingList.length=0,e._o6D(this._viewport),e._k7()||this._dR.forEach(function(t){var i=this._o67(t);e._fT(i.x,i.y,i.width,i.height)&&this._nBingList.push(t)},this))},_k3:function(t){return R?t=a(t,this._o3V):t.sort(this._o3V),t},_o3V:function(t,i){return(t=t.zIndex||0)-(i=i.zIndex||0)},_o67:function(t){return t.boundingBox},_l9:function(){if(this._o6B)return this._fR(),this._7Z(!0),void this.render(this._o6tx,this._dR);this._7Z(this._o4uffer);var t=this._o6E,i=this._o6tx;i.save(),this._o4uffer&&(Ln(i),i.drawImage(this._o4uffer.canvas,this._o4uffer.x,this._o4uffer.y)),t._lQ(i,this._fS.bind(this)),this._fR(),this.render(i,this._nBingList),i.restore()},_7Z:function(t){var i;this._dCCanvasSizeFlag?(this._dCCanvasSizeFlag=!1,this._kQ.setSize(this._width,this._height)):t&&((i=this._kQ).width=i.width)},_o3W:function(){var t=this.width,i=this.height;if(this._width==t&&this._height==i)return!1;this._width&&this._height&&t&&i||(this._o6B=!0),this._width=t,this._height=i,this._dCCanvasSizeFlag=!0},_4Z:function(t){if(!t&&!this._79s.viewport)return!1;var i=this._lM.reverseTransform([0,0]),e=this.scale,n=this._width/e,o=this._height/e,r=this.rotate,s=this._viewport;if(s.x==i[0]&&s.y==i[1]&&s.width==n&&s.height==o&&s.rotate==r)return!1;var h=s.toJSON();return this._viewport.set(i[0],i[1],n,o,r,e),this._3S(this._viewport,h,t),!0},_3S:function(t,i,e){this._o6B||e||(this._o4uffer=this._i2(i,t))},_80:function(t){var i;this._o4U&&(this._nA&&(this._o6urrentMatrix?this._o6urrentMatrix.transMatrix=i=Dn.mul([],this._lM.m,Dn.invert([],this._o6urrentMatrix.m)):i=this._lM.m,this._6C(i)),this._dC("matrix"),this._30())},_6C:function(t){this.__o6ssMatrix=t,kn.setStyle(this._kQ,"transform",t?"matrix("+t.join(",")+")":"")},_81:function(){var t=this._o6urrentMatrix;if(this._o6urrentMatrix={tx:this._lM.m[4],ty:this._lM.m[5],m:this._lM.m.slice(),scale:this._lM._iI(),rotate:this._lM._fY()},this.__o6ssMatrix&&this._6C(null),!this._o6B){if(this._31(this._o6urrentMatrix,t),!t||t.scale!=this._o6urrentMatrix.scale)return this._85(this._o6urrentMatrix.scale,t?t.scale:null),void(this._o6B=!0);if(!t||t.rotate!=this._o6urrentMatrix.rotate)return this._6N(this._o6urrentMatrix.rotate,t?t.rotate:null),void(this._o6B=!0);var i=t.m[4]-this._o6urrentMatrix.m[4],e=t.m[5]-this._o6urrentMatrix.m[5],n=this.ratio;i*=n,e*=n;(1e-4<Math.abs(i-Math.round(i))||1e-4<Math.abs(e-Math.round(e)))&&(this._o6B=!0)}},_83:function(){var i=this.bounds,t=i.clone();i.clear(),this._nU.forEach(function(t){!1!==t.__jS&&i.add(this._o67(t))},this),i.equals(t)||this._41(i,t)},_41:function(t,i){},_o4U:!1,_dV:function(){},_o3Y:function(t){var i=t.ratio;t.scale(i,i),t.transform.apply(t,this._lM.m)},render:function(i,t){t&&t.length&&(i.save(),this._o3Y(i),t.forEach(function(t){if(i.save(),!1!==t.visible)try{t.render(i)}catch(t){Si.error(t)}i.restore()},this),i.restore())},setParent:function(t){H(t)&&(t=d.getElementById(t)),this._nW!=t&&(this._nW&&this._o66&&(Y(this._nW,On),this._nW.removeChild(this._o66)),this._nW=t,this._nW&&($(this._nW,On),this._nW.appendChild(this._84()),this._7X()))},_84:function(){return this._o66||this._dW(),this._o66},_dW:function(){var t=Ni(!0);hn(t.g),t.className=mn;var i=d.createElement("div");return i.addEventListener("mousedown",function(t){if(d.activeElement==this)return t.preventDefault&&t.preventDefault(),!1}.bind(i),!1),i.className=Tn,i.appendChild(t),i.tabIndex=0,this._kQ=t,this._o66=i,this._o6tx=this._kQ.getContext("2d"),t},toLogical:function(t,i){return t instanceof Object&&(it(t)&&(t=this._8P(t)),t=Array.isArray(t)?(i=t[1]||0,t[0]||0):(i=t.y||0,t.x||0)),this._lM.reverseTransform([t,i])},toCanvas:function(t,i){return this._lM.transform([t,i])},_8P:function(t){return function(t,i){t.touches&&(t=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t.touches[0]);var e=t.clientX||0,n=t.clientY||0;G&&x&&(l.pageXOffset&&e==t.pageX&&(e-=l.pageXOffset),l.pageYOffset&&n==t.pageY&&(n-=l.pageYOffset));var o=i.getBoundingClientRect();e-=o.left,n-=o.top;var r=jt(i,o);return r&&1!==r&&(e/=r,n/=r),{x:e,y:n}}(t,this._o66)},_fJ:function(t,i,e){if(t.hitTest instanceof Function)return t.hitTest(i,e);var n=this._o67(t);return n?e?gt.intersects(n.x,n.y,n.width,n.height,i[0]-e,i[1]-e,e+e,e+e):gt.intersects(n.x,n.y,n.width,n.height,i[0],i[1]):t},hitTest:function(t,i){return this._99(t,i)},_99:function(t,i){i=this._o40(i),t=this.toLogical(t);for(var e,n=this._dR.length;0<=--n;)if(e=this._dR[n],this._fJ(e,t,i))return e},_o40:function(t){return t!==S&&null!==t||(t=nt.SELECTION_TOLERANCE),t?t/this.scale:0},getUIByMouseEvent:function(t,i){if(t.uiId)return this._nU.getById(t.uiId);var e=this._99(t,i);return t.uiId=e?e.id:-1,e},_9B:null,invalidateUI:function(t){this._9B[t.id]=t,this.invalidate()},_o41:function(t){t.validate instanceof Function&&t.validate(this)},_dY:function(t,i){t.__l2&&this._i3(t.__l2);var e=t.__jS;if(t.__jS=this._fL(t,i),!t.__jS)return e;var n=t.__l2;this._o41(t);var o=this._o67(t);t.__l2={x:o.x,y:o.y,width:o.width,height:o.height};var r=t.__jS!==e||!gt.equals(n,o);return r&&t.__l2&&this._i3(t.__l2),r},_fL:function(t,i){return!1!==t.visible},_$y:function(i){this._nU.forEach(function(t){this._dY(t,i)},this),this._9B={},this._83()},_o69:function(t){var i=this.scale;if(t)return this._$y(i);var e,n=this._dCBoundsFlag;for(e in this._dCBoundsFlag=!1,this._9B){var o=this._9B[e];n?this._dY(o,i):n=this._dY(o,i)}this._9B={},n&&this._83()},_9D:null,_2K:function(){if(!this._9D.length)return!1;var t=this._9D;this._9D=[],t.forEach(function(t){try{var i=t.call,e=t.scope,n=t.delay;e instanceof Object?i=i.bind(e):e&&!n&&(n=parseInt(e)),n?setTimeout(i,n):i()}catch(t){}},this),this._79&&this._gU()},_eD:function(t,i,e){this._9D.push({call:t,scope:i,delay:e}),this._79||this._2K()},_50:function(t,i){for(var e=this._dR,n=0,o=e.length;n<o;n++)if(!1===t.call(i,e[n]))return!1},_fM:function(t,i){this._nU.forEach(t,i)},_12:function(t,i){for(var e=this._dR,n=e.length-1;0<=n;n--)if(!1===t.call(i,e[n]))return!1},_52:function(t,i){this._nU.forEachReverse(t,i)},_54:function(){return this.bounds},_hW:function(t,i,e){t/=this.scale||1,this._lN(t,i,e)},_lN:function(t,i,e){var n;return!this._o4U||i!==S&&null!==i||(i=(n=this.toLogical(this.width/2,this.height/2))[0]||0,e=n[1]||0),this._lM.scale(t,[i||0,e||0])},_fO:function(t,i){this._lM.translate([t,i],!0)},_o6A:function(t,i,e,n){var o;e!=this.scale||!1===n||(o=this.ratio)!=(0|o)&&(t=Math.round(t*o)/o,i=Math.round(i*o)/o),this._lM.translateTo([t,i],e)},_lO:function(t,i){return this._lN(this._fQ,t,i)},_k5:function(t,i){return this._lN(1/this._fQ,t,i)},_1V:function(){var t=this._54();if(!t.isEmpty()){var i=this.width/t.width,e=this.height/t.height,n=Math.min(i,e);return{scale:n=Math.max(this._i0,Math.min(this._hY,n)),cx:t.cx,cy:t.cy}}},_fQ:1.2,_hY:10,_i0:.1,_o6B:!1,_85:function(t,i){},_6N:function(t,i){},_31:function(){},_fR:function(){this._o4uffer=null,this._o6E._mK()},_fS:function(t){var i=this._lM,e=this._kQ.ratio,n=this.scale;if(!i._fY()){var o=i.transform([t[0],t[1]]);return o[0]*=e,o[1]*=e,e*=n,o[2]=t[2]*e,o[3]=t[3]*e,o}var r=new gt,s=i.transform([t[0],t[1]]);return r.add(s[0],s[1]),s=i.transform([t[0]+t[2],t[1]]),r.add(s[0],s[1]),s=i.transform([t[0],t[1]+t[3]]),r.add(s[0],s[1]),s=i.transform([t[0]+t[2],t[1]+t[3]]),r.add(s[0],s[1]),[r.x*e,r.y*e,r.width*e,r.height*e]},_i2:function(t,i){var e=this._kQ;if(e.width&&e.height){var n=i._4D(t.x,t.y,t.width,t.height);if(n&&n.width&&n.width){var o=this.scale*this.ratio,r=this._o6E,s={};1e-6<n.x&&(s.left=i._5B(0,0,n.x,i.height,o)),1e-6<i.width-n.right&&(s.right=i._5B(n.right,0,i.width-n.right,i.height,o)),1e-6<n.y&&(s.top=i._5B(n.x,0,n.width,n.y,o)),1e-6<i.height-n.bottom&&(s.bottom=i._5B(n.x,n.bottom,n.width,i.height-n.bottom,o)),function(t){var i,e=!0;for(i in t){e=!1;break}return e}(s)||r._56(s);var h=i._jU(t.x,t.y),a=(h[0]-n.x)*o,l=(h[1]-n.y)*o,_=n.width*o,u=n.height*o,a=Math.round(a),l=Math.round(l),_=Math.round(_),u=Math.round(u),c=this._o4ackCanvas;return c||((c=this._o4ackCanvas=d.createElement("canvas")).g=c.getContext("2d")),c.width=_,c.height=u,Ln(c.g),c.g.drawImage(e,a,l),{x:h[0]*o-a,y:h[1]*o-l,canvas:c}}}},_nD:function(t,i,e,n){this._o6E._nQ(t,i,e,n)},_i3:function(t){this._o6E._k9(t)}});function Ln(t){t[An=An||("imageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"imageSmoothingEnabled":"mozImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"mozImageSmoothingEnabled":"msImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"msImageSmoothingEnabled":"webkitImageSmoothingEnabled"in CanvasRenderingContext2D.prototype?"webkitImageSmoothingEnabled":"imageSmoothingEnabled")]=!1}Object.defineProperties(Sn.prototype,{width:{get:function(){return this._o66.clientWidth}},height:{get:function(){return this._o66.clientHeight}},rotate:{get:function(){return this._lM._fY()}},tx:{get:function(){return this._lM._9I()[0]}},ty:{get:function(){return this._lM._9I()[1]}},ratio:{get:function(){if(this._kQ)return this._kQ.ratio}},scale:{get:function(){return this._lM._iI()},set:function(t){this._hW(t)}},renderScale:{get:function(){return this.scale*this.ratio}},uis:{get:function(){return this._nU}},length:{get:function(){return this._nU.length}},viewportBounds:{get:function(){return this._viewport.getGlobalBounds()}}});var wn=f({constructor:function(){this._i6=[],this._l2=new gt,this._i5=m?20:50},_i5:20,_i6:null,_nE:!1,_l2:null,_mK:function(){this._nE=!1,this._i6.length=0,this._viewportClips=null,this._l2.clear()},_k7:function(){return 0==this._i6.length&&!this._viewportClips},_nQ:function(t,i,e,n){e<=0||n<=0||this._i6.push([t,i,e,n])},_k9:function(t){this._nQ(t.x,t.y,t.width,t.height)},_56:function(t){var i,e=this._l2;for(i in t){var n=t[i].getGlobalBounds();e.add(n)}this._viewportClips=t},_o6D:function(t,i){for(var e=[],n=this._i6,o=0,r=n.length;o<r;o++){var s=n[o];t.intersects(s[0],s[1],s[2],s[3])&&(e.push(s),this._l2.addRect(s[0],s[1],s[2],s[3]))}this._i6=e,this._nE=i||e.length>=this._i5},_fT:function(t,i,e,n){if(!this._l2.intersectsRect(t,i,e,n))return!1;if(this._nE)return!0;if(this._viewportClips){var o,r=this._viewportClips;for(o in r)if(r[o].intersects(t,i,e,n))return!0}for(var s,h=0,a=this._i6.length;h<a;h++)if(s=this._i6[h],gt.intersects(t,i,e,n,s[0],s[1],s[2],s[3]))return!0;return!1},_lQ:function(t,i){if(this._k7())return!1;if(t.beginPath(),this._nE)return In(t,(n=i([this._l2.x,this._l2.y,this._l2.width,this._l2.height]))[0],n[1],n[2],n[3]),void t.clip();if(this._viewportClips)for(var e in this._viewportClips){In(t,(n=this._viewportClips[e].canvasBounds)[0],n[1],n[2],n[3])}for(var n,o=this._i6,r=0,s=o.length;r<s;r++){In(t,(n=i(o[r]))[0],n[1],n[2],n[3])}t.clip()}});function In(t,i,e,n,o){n=Z(i+n)-(i=j(i)),o=Z(e+o)-(e=j(e)),t.clearRect(i,e,n,o),t.rect(i,e,n,o)}function j(t){return Math.floor(t)}function Z(t){return Math.ceil(t)}wn._toIntRect=function(t,i,e,n){return t instanceof Object&&(i=t.y,e=t.width,n=t.height,t=t.x),e=Z(t+e)-(t=j(t)),n=Z(i+n)-(i=j(i)),[t,i,e,n]},wn._o6W=j,wn._gL=Z,Li.NAVIGATION_BUTTON="navigation.button",Li.NAVIGATION_SCROLLBAR="navigation.scrollbar",nt.NAVIGATION_TYPE=Li.NAVIGATION_SCROLLBAR;var bn=f({_l9:function(){u(this,bn,"_l9",arguments),this._topCanvas._l9(),this._e0&&this._e0.clear()},_e0:null,enableCrossLine:function(t){this._6L=!0,t?this._e0||(this._e0=new gn):this._e0&&(this._e0=null,this._nU.forEach(function(t){t.data.from&&t.data.to&&t.path._hS&&t.path._hS.__l9Segments&&(t.path._hS.__l9Segments=null)}))},_o3V:function(t,i){return(t=t.$data.zIndex||0)-(i=i.$data.zIndex||0)},super:Sn,constructor:function(t,i){this._mE=t,H(i)&&(i=d.getElementById(i)),i&&i.tagName||(i=d.createElement("div")),c(this,bn,[i]),this._topCanvas=new ar(this,this._o66),this._iA=[],this._mE._$c.addListener(this._1S,this),this._mE._1O.addListener(this._o3O,this),this._mE._19.addListener(this._87,this),this._mE._$q.addListener(this._35,this),this._mE._$u.addListener(this._46,this),this._o6G={},this._4C(nt.NAVIGATION_TYPE,!0)},_6C:function(t){u(this,bn,"_6C",arguments),this._topCanvas._6C(t)},_i8:function(t){if(t.id||(t=this._nU.getById(t)),!t)return!1;this._nU.remove(t),t.destroy(),t.__l2&&this._i3(t.__l2),this._dCBoundsFlag=!0},_i9:function(){this._nU.forEach(function(t){t.destroy()}),this._nU.clear()},_fL:function(t,i){var e=t.data||t;return e._$v&&(e._$v=!1,e._jS=this._67(e,i)),!1!==e._jS},_67:function(t,i){return!!this._43(t,i)&&(!this._mE._jSFilter||!1!==this._mE._jSFilter(t,i))},_o43:function(t){return this._mE._3P==qo(t)},_43:function(t,i){if(!1===t.visible)return!1;if(!(t instanceof Qn))return this._mE._3P==qo(t)&&!t._f0;var e=t.fromAgent,n=t.toAgent;if(!e||!n)return!1;if(e==n&&!t.isLooped())return!1;if(t.isBundleEnabled()){var o=t.getEdgeBundle(!0);if(o&&!o._fL(t,i))return!1}return!(!this._fL(e,i)||!this._fL(n,i))},_o67:function(t){if(t._o4U)return{x:t.$x+t.uiBounds.x,y:t.$y+t.uiBounds.y,width:t.uiBounds.width,height:t.uiBounds.height}},_33:function(t){var i=this._mF(t);if(i){var e=this._o67(i);if(e)return new gt(e)}},_fJ:function(t,i,e){return t.hitTest(i[0],i[1],e)},hitTest:function(t,i){var e=u(this,bn,"hitTest",arguments);if(e){t=this.toLogical(t),i=this._o40(i);var n=e.hitTest(t[0],t[1],i,!0);if(n instanceof Eo)return n}return e},_44:function(t){return this.getUIByMouseEvent(t)},_7Z:function(t){u(this,bn,"_7Z",arguments),this._topCanvas._jV(this.width,this.height)},_mL:1,_dR:null,_9E:null,_9G:null,_nU:null,_nW:null,_kQ:null,_o6E:null,_79:!1,_o4U:!1,_lM:null,_50:function(t,i){for(var e=this._dR,n=0,o=e.length;n<o;n++)if(!1===t.call(i,e[n]))return!1},_fM:function(t,i){this._nU.forEach(t,i)},_12:function(t,i){for(var e=this._dR,n=e.length-1;0<=n;n--)if(!1===t.call(i,e[n]))return!1},_52:function(t,i){this._nU.forEachReverse(t,i)},_3S:function(t,i,e){u(this,bn,"_3S",arguments),this._viewportChanged={value:t}},_dV:function(){this._o3W(),this._4Z(!0),this._originAdjusted||(this._originAdjusted=!0,this._mE&&this._mE.originAtCenter&&this._lM.translateTo([this.width/2,this.height/2]))},_gU:function(){var t,i;this._jDed||this._79&&(this._l9ingID=null,this._79=!1,this._o4U&&this._mE&&this._mE._$v&&(this._mE._$v=!1,this._mE.forEach(function(t){t.invalidateVisibility(!0)})),u(this,bn,"_gU",arguments),this._9GChanged&&(this._8B&&this._8B._lB(),t=this._9GChanged.value,i=this._9GChanged.old,this._9GChanged=null,this._mE._5C(new bt(this._mE,"element.bounds",t,i))),this._viewportChanged&&(this._viewportChanged=!1,this._8B&&this._8B._3S&&this._8B._3S(this._viewport.width*this._viewport.scale,this._viewport.height*this._viewport.scale),this._mE._5C(new bt(this._mE,"viewport",this._viewport))))},_iA:null,_dY:function(t){var i=t.$data;if(!t._1R&&!i._79&&!i._$v)return!1;var e=t.$invalidateSize;return e=u(this,bn,"_dY",arguments)||e},_o41:function(t){var i=t.$data;i.__4N&&(i.__4N=!1,t._4N()),i.__79&&i._jR()&&(t._6A(),i.__79=!1),(t._1R||i._79)&&(i._79=!1,t.validate())},_iC:function(t,i){var e=t.ratio;t.scale(e,e),t.transform.apply(t,this._lM.m);for(var n=this.renderScale,o=[],r=0,s=i.length;r<s;r++){var h=i[r];this._e0&&h.data.from&&h.data.to&&this._e0.perLine(h.path._hS),h._l9(t,n),h._l1&&h._l1.length&&o.push(h)}if(o.length)for(r=0,s=o.length;r<s;r++)o[r]._o3D(t,n)},render:function(t,i){if(i.length){if(t.save(),m)try{this._iC(t,i)}catch(t){}else this._iC(t,i);t.restore()}},_iD:function(t,i,e){var n,o;t.save(),t.translate(-e.x*i,-e.y*i),t.scale(i,i);for(var r=this._nU._kZ.slice(),s=[],h=0,a=(r=this._k3(r)).length;h<a;h++)(n=r[h]).__jS&&(o=this._o67(n),e.intersectsRect(o.x,o.y,o.width,o.height)&&(n._l9(t,i),n._l1&&n._l1.length&&s.push(n)));if(s.length)for(h=0,a=s.length;h<a;h++)s[h]._o3D(t,i);t.restore()},_17:function(t,i){},_1X:function(){for(var t,i,e=this._nU._kZ,n=new gt,o=e.length-1;0<=o;o--)(t=e[o])._jS&&(i=t.uiBounds,n.addRect(t.$x+i.x,t.$y+i.y,i.width,i.height));var r=this._9G;(this._9G=n).equals(r)||this._17(r,n)},_6P:function(){this._dR.length=0,this._9E={}},_mM:function(){this._mK()},_jD:function(){this._mK(),this._jDed=!0,this._79=!1,this._topCanvas.clear(),this._9D.length=0,this._8B&&(this._8B._jD(),delete this._8B)},_mF:function(t){return this._nU.getById(t.id||t)},_$j:function(t){return this._fV(t)},_iF:function(t,i){var e=this.toCanvas(t,i);return{x:e[0],y:e[1]}},_fV:function(t,i){var e=this.toLogical(t,i);return{x:e[0],y:e[1]}},_$k:null,_46:function(t){var i,e,n=t.source,o=t.data;if(o)if(this._o4U){if(V(o))for(r=0,s=o.length;r<s;r++)e=o[r].id,(i=this._nU.getById(e))&&(i.selected=n.containsById(e),i.invalidateRender());else{if(e=o.id,!(i=this._nU.getById(e)))return;i.selected=n.containsById(e),i.invalidateRender()}this._dC()}else{if(this._$k||(this._$k={}),V(o))for(var r=0,s=o.length;r<s;r++)e=o[r].id,this._$k[e]=!0;else e=o.id,this._$k[e]=!0}},_mE:null,_e1:function(t){var i=t.uiClass;if(i)return new i(t,this._mE)},_1S:function(t){if(!this._o4U)return!1;var i=t.source,e=t.kind;"enableSubNetwork"==e&&this._mE.invalidateVisibility(),"uiClass"==e?(this._i8(i.id),this._m9(i)):"expanded"==e&&i._jR()&&t.value&&this._6Q(i);var n=this._nU.getById(i.id);n&&n._o4U&&n.onPropertyChange(t)&&this._dC()},_48:function(t){var i=this._mF(t);i&&(i.invalidateData(),this._dC())},_o3O:function(t){if(!this._o4U)return this._dC(),!1;switch(t.kind){case Bt.KIND_ADD:this._m9(t.data);break;case Bt.KIND_REMOVE:this._iH(t.data);break;case Bt.KIND_CLEAR:this._kA(t.data)}},_mK:function(){this._o6G={},this._i9(),this.clear()},_o6G:null,_m9:function(t){var i=this._e1(t);i&&(this._nU.add(i),this._o4U&&(this._o6G[t.id]=t),this._dC())},_iH:function(t){if(Array.isArray(t)){for(var i,e=[],n=0,o=t.length;n<o;n++)i=t[n].id,e.push(i),delete this._o6G[i];t=e}else t=t.id,delete this._o6G[t],t=[t];t.forEach(function(t){this._i8(t)},this),this._dC()},_kA:function(t){this._mK()},_87:function(t){if(!this._o4U)return!1;t.source instanceof eo&&!this._o6G[t.source.id]&&(t.oldValue&&(this._48(t.oldValue),t.oldValue.__79=!0),t.value&&(this._48(t.value),t.value.__79=!0),this._6Q(t.source))},_35:function(t){if(!this._o4U)return!1;t.source instanceof eo&&!this._o6G[t.source.id]&&this._6Q(t.source)},_37:function(t){if(t._edgeBundleInvalidateFlag){var i=t.getEdgeBundle(!0);if(!i)return t._edgeBundleInvalidateFlag=!1,void t.validateEdgeBundle();i.validate(this._mE),i._o6O(function(t){t.validateEdgeBundle()})}},_$y:function(t){var i=this._mE.graphModel,e=this._nU,n=[],o=1;if(i.forEachByDepthFirst(function(t){return t instanceof Qn?(this._37(t),void n.push(t)):void((c=this._e1(t))&&(e.add(c),t.__mI=o++))},this),e.length)for(var r=e._kZ,o=r.length-1;0<=o;o--)c=r[o],this._4A(c,c.$data,t);for(var o=0,s=n.length;o<s;o++){var h,a,l,_=n[o];(c=this._e1(_))&&(this._4A(c,_,t),e.add(c),h=_.fromAgent,a=_.toAgent,l=h.__mI||0,h!=a&&(l=Math.max(l,a.__mI||0)),_.__mI=l)}if(n.length&&e._kZ.sort(function(t,i){return t.$data.__mI-i.$data.__mI}),this._$k){var u,c,d=i.selectionModel;for(u in this._$k){d.containsById(u)&&(c=e.getById(u))&&(c.selected=!0)}this._$k=null}this._83()},_o69:function(t,i){if(t)return this._$y();var e,n,o,r=this._dCBoundsFlag;for(e in this._dCBoundsFlag=!1,this._o6G){var s=this._o6G[e];s instanceof eo?this._6Q(s):this._6R(s)}this._o6G={};for(var h=this._nU._kZ,a=[],l=h.length-1;0<=l;l--)(o=(n=h[l]).$data)instanceof Qn?(this._37(o),a.push(n)):this._4A(n,o,i)&&!r&&(r=!0);if(a.length)for(var l=0,_=a.length;l<_;l++)n=a[l],this._4A(n,n.$data,i)&&!r&&(r=!0);r&&this._83()},_4A:function(t,i,e){if(i instanceof Qn)return i.__4N&&(i.__4N=!1,t._4N()),this._dY(t,e);if(i.__79&&i._jR()&&(t._6A(),i.__79=!1),this._dY(t,e)){var n=this._59(i);return n&&(n.__79=!0),i.hasEdge()&&i.forEachEdge(function(t){t.__4N=!0},this),!0}},_39:function(t,i){var e=t.fromAgent,n=t.toAgent,o=i.getIndexById(e.id);if(e==n)return o;var r=i.getIndexById(n.id);return Math.max(o,r)},_3A:function(t,i){var e=this.graphModel._h6(t);return e?i.getIndexById(e.id):0},_6Q:function(t){var i=this._nU,e=i.getById(t.id);if(!e)throw new Error("UI '"+t.name+"' not found");var n=this._3A(t,i),o=[e];t.hasChildren()&&s(t,function(t){t instanceof eo&&(e=i.getById(t.id))&&o.push(e)},this),this._58(i,n,o)},_6R:function(t){var i,e=this._nU.getById(t.id);e&&(i=this._39(t,this._nU),this._nU.setIndexBefore(e,i))},_58:function(i,e,t){var n=new ot;function o(t){n.add(t)}L(t,function(t){e=i.setIndexAfter(t,e),t.$data.forEachEdge(o)},this),0!=n.length&&n.forEach(this._6R,this)},_59:function(t){var i=Kn(t);return i&&i.expanded?i:null},_89:null,_8B:null,_4C:function(t,i){if(!i&&t==this._89)return!1;this._89=t,this._8B&&(this._8B._jD(),delete this._8B),t!=Li.NAVIGATION_SCROLLBAR?t!=Li.NAVIGATION_BUTTON||(this._8B=new rr(this,this._o66)):this._8B=new sr(this,this._o66)},_31:function(t,i){this._8B&&this._8B._lB(),this._mE._5C(new bt(this._mE,"transform",t,i))},_85:function(t,i){this._mE._5C(new bt(this._mE,"scale",t,i))},_41:function(t,i){this._9GChanged={value:t,old:i}},_8C:function(){this._7X()}});Object.defineProperties(bn.prototype,{_viewportBounds:{get:function(){return this.viewportBounds}},_scale:{get:function(){return this.scale},set:function(t){this._hW(t)}},_tx:{get:function(){return this.tx}},_ty:{get:function(){return this.ty}},graphModel:{get:function(){return this._mE._mEModel}}});var Dn={};function Cn(t){var e=[];return t.forEach(function(t,i){e.push(-t)}),e}Dn.create=function(){return[1,0,0,1,0,0]},Dn.invert=function(t,i){var e=i[0],n=i[1],o=i[2],r=i[3],s=i[4],h=i[5],a=e*r-n*o;return a?(a=1/a,t[0]=r*a,t[1]=-n*a,t[2]=-o*a,t[3]=e*a,t[4]=(o*h-r*s)*a,t[5]=(n*s-e*h)*a,t):null},Dn.multiply=function(t,i,e){var n=i[0],o=i[1],r=i[2],s=i[3],h=i[4],a=i[5],l=e[0],_=e[1],u=e[2],c=e[3],d=e[4],f=e[5];return t[0]=n*l+r*_,t[1]=o*l+s*_,t[2]=n*u+r*c,t[3]=o*u+s*c,t[4]=n*d+r*f+h,t[5]=o*d+s*f+a,t},Dn.mul=Dn.multiply,Dn.rotate=function(t,i,e){var n=i[0],o=i[1],r=i[2],s=i[3],h=i[4],a=i[5],l=Math.sin(e),_=Math.cos(e);return t[0]=n*_+r*l,t[1]=o*_+s*l,t[2]=n*-l+r*_,t[3]=o*-l+s*_,t[4]=h,t[5]=a,t},Dn.scale=function(t,i,e){var n=i[0],o=i[1],r=i[2],s=i[3],h=i[4],a=i[5],l=e[0],_=e[1];return t[0]=n*l,t[1]=o*l,t[2]=r*_,t[3]=s*_,t[4]=h,t[5]=a,t},Dn.translate=function(t,i,e){var n=i[0],o=i[1],r=i[2],s=i[3],h=i[4],a=i[5],l=e[0],_=e[1];return t[0]=n,t[1]=o,t[2]=r,t[3]=s,t[4]=n*l+r*_+h,t[5]=o*l+s*_+a,t},Dn.transform=function(t,i){var e=i[0],n=i[1];return[e*t[0]+n*t[2]+t[4],e*t[1]+n*t[3]+t[5]]},Dn.reverseTransform=function(t,i){return Dn.transform(Dn.invert([],t),i)};var Rn=Math.PI+Math.PI;function xn(t){return(t%=Rn)<0&&(t+=Rn),t}var Pn=U,Nn=f({equals:function(t){if(!t||!Array.isArray(t))return!1;for(var i=this.m,e=0;e<i.length;){if(i[e]!=t[e])return!1;++e}return!0},constructor:function(t){this.m=t||Dn.create(),this.im=[]},listener:null,_79:!0,invalidate:function(){return this._79=!0,(!this._o4ackM||!this.equals(this._o4ackM))&&(this.listener&&this.listener({target:this,kind:"invalidate"}),this._o4ackM=this.m.slice(),this)},validate:function(){return this._79=!1,Dn.invert(this.im,this.m),this},translate:function(t,i){return Pn(t)&&(t=[arguments[0],arguments[1]],i=arguments[2]),!1!==i?(this.m[4]+=t[0],this.m[5]+=t[1]):Dn.translate(this.m,this.m,t),this.invalidate()},translateTo:function(t,i){return Pn(t)&&(t=[arguments[0],arguments[1]],i=arguments[2]),i&&(i/=this._iI(),Dn.scale(this.m,this.m,[i,i])),this.m[4]=t[0],this.m[5]=t[1],this.invalidate()},scale:function(t,i){return"number"==typeof t&&(t=[t,t]),i?(Dn.translate(this.m,this.m,i),Dn.scale(this.m,this.m,t),Dn.translate(this.m,this.m,Cn(i))):Dn.scale(this.m,this.m,t),this.invalidate()},rotate:function(t,i){return i?(Dn.translate(this.m,this.m,i),Dn.rotate(this.m,this.m,t),Dn.translate(this.m,this.m,Cn(i))):Dn.rotate(this.m,this.m,t),this.invalidate()},transform:function(t){return Dn.transform(this.m,t)},reverseTransform:function(t){return Dn.transform(this._5A(),t)},toString:function(){return"matrix("+this.m.join(",")+")"},_5A:function(){return this._79&&this.validate(),this.im},_fX:function(){var t=this.m[0],i=this.m[1],e=this.m[2],n=this.m[3];return[Math.sqrt(t*t+e*e),Math.sqrt(i*i+n*n)]},_iI:function(){var t=this.m[0],i=this.m[2];return Math.sqrt(t*t+i*i)},_9I:function(){return[this.m[4],this.m[5]]},_e2:function(){var t=this.m[0],i=this.m[1],e=this.m[2],n=this.m[3];return[xn(Math.atan2(i,n)),xn(Math.atan2(-e,t))]},_fY:function(){return xn(Math.atan2(this.m[1],this.m[3]))}});function Mn(t,i){for(var e=0,n=t.length;e<n;){for(var o=t[e],r=t[(e+1)%n],s=0;s<4;){var h=i[s],a=i[(s+1)%n];if(function(t,i,e,n,o,r,s,h){var a=((t*n-i*e)*(o-s)-(t-e)*(o*h-r*s))/((t-e)*(r-h)-(i-n)*(o-s)),l=((t*n-i*e)*(r-h)-(i-n)*(o*h-r*s))/((t-e)*(r-h)-(i-n)*(o-s));if(!isNaN(a)&&!isNaN(l)){if(e<=t){if(!(e<=a&&a<=t))return}else if(!(t<=a&&a<=e))return;if(n<=i){if(!(n<=l&&l<=i))return}else if(!(i<=l&&l<=n))return;if(s<=o){if(!(s<=a&&a<=o))return}else if(!(o<=a&&a<=s))return;if(h<=r){if(!(h<=l&&l<=r))return}else if(!(r<=l&&l<=h))return;return 1}}(o[0],o[1],r[0],r[1],h[0],h[1],a[0],a[1]))return!0;s++}e++}return!1}function Bn(t,i,e,n){return[t*n-i*e,t*e+i*n]}var Gn=f({constructor:function(){},x:0,y:0,width:0,height:0,rotate:0,set:function(t,i,e,n,o,r){return this.x=t,this.y=i,this.width=e,this.height=n,this.rotate=o,this._o6os=Math.cos(o),this._sin=Math.sin(o),this.scale=r,this._globalBounds=null,this},_jU:function(t,i){return t-=this.x,i-=this.y,this.rotate?Bn(t,i,this._sin,this._o6os):[t,i]},_9J:function(t){var i=new gt;return i.add(this._jU(t.x,t.y)),i.add(this._jU(t.x+t.width,t.y)),i.add(this._jU(t.x,t.y+t.height)),i.add(this._jU(t.x+t.width,t.y+t.height)),i},_iJ:function(t,i){var e;return this.rotate&&(t=(e=Bn(t,i,Math.sin(-this.rotate),Math.cos(-this.rotate)))[0],i=e[1]),[this.x+t,this.y+i]},_6T:function(t,i){var e=this._jU(t,i);return t=e[0],i=e[1],0<=t&&0<=i&&t<=this.width&&i<=this.height},intersects:function(t,i,e,n){if(!this.rotate)return gt.intersects(this.x,this.y,this.width,this.height,t,i,e,n);if(!e||!n)return this._6T(t,i);var o=this.getGlobalBounds();if(!o.intersects(t,i,e,n))return!1;for(var r=o.points,s=0;s<r.length;){var h=r[s];if(gt.intersectsPoint(t,i,e,n,h[0],h[1]))return!0;s++}for(var a=[[t,i],[t+e,i],[t,i+n],[t+e,i+n]],s=0;s<a.length;){h=a[s];if(this._6T(h[0],h[1]))return!0;s++}return Mn(r,a)},getGlobalBounds:function(){return this._globalBounds||(this._globalBounds=this._8E(0,0,this.width,this.height)),this._globalBounds},_8E:function(t,i,e,n){if(!this.rotate)return new gt(this.x+t,this.y+i,e,n);var o=[],r=new gt,s=this._iJ(t,i);return o.push(s),r.add(s[0],s[1]),s=this._iJ(t+e,i),o.push(s),r.add(s[0],s[1]),s=this._iJ(t,i+n),o.push(s),r.add(s[0],s[1]),s=this._iJ(t+e,i+n),o.push(s),r.add(s[0],s[1]),r.points=o,r},_5B:function(t,i,e,n,o){var r,s;return(s=this.rotate?(r=this._iJ(t,i),(new Gn).set(r[0],r[1],e,n,this.rotate,this.scale)):(new Gn).set(this.x+t,this.y+i,e,n,0,this.scale)).canvasBounds=[Math.round(o*t),Math.round(o*i),Math.round(o*e),Math.round(o*n)],s},_4D:function(t,i,e,n){if(!this.rotate){var o=gt.intersection(this.x,this.y,this.width,this.height,t,i,e,n);return o&&o.offset(-this.x,-this.y),o}var r=this._jU(t,i);return t=r[0],i=r[1],gt.intersection(0,0,this.width,this.height,r[0],r[1],e,n)},equals:function(t){return this.x==t.x&&this.y==t.y&&this.width==t.width&&this.height==t.height&&this.rotate==t.rotate},toString:function(){return this.x+","+this.y+","+this.width+","+this.height+","+this.rotate},toJSON:function(){return{x:this.x,y:this.y,width:this.width,height:this.height,rotate:this.rotate,scale:this.scale}}}),kn={setStyle:Wt,setStyles:zt,addRule:Kt,pre:Vt};function Fn(t,i,e){if((e=e||i.toAgent)!=t){var n=t.getEdgeBundle(e);return n||(n=new is(t,e),t._linkedNodes[e.id]=n),n._kI(i,t)}}function $n(t,i,e){if((e=e||i.toAgent)!=t){var n=t.getEdgeBundle(e);return n&&n._eB(i,t)}}function Yn(t,i,e){e===S&&(e=i.toAgent),e!=t&&(t._8W||(t._8W=new ot),!1!==t._8W.add(i)&&t._o33++)}function Un(t,i,e){t._8W&&!1!==t._8W.remove(i)&&(t._o33--,$n(t,i,e))}function Hn(t,i){i.fromAgent!=t&&(t._o35||(t._o35=new ot),!1!==t._o35.add(i)&&t._o4P++)}function Vn(t,i){t._o35&&!1!==t._o35.remove(i)&&(t._o4P--,$n(i.fromAgent,i,t))}function zn(t,i,e,n){this.source=t,this.kind=i,this.oldValue=n,this.value=e,this.propertyType=Li.PROPERTY_TYPE_STYLE}t(zn,bt);function Wn(t){this.id=++E,this._d6={},this._kY={},t&&(this.$name=t)}function Kn(t,i){if(i===S&&(i=t instanceof Qn),i){if(t.isInvalid())return null;var e=Kn(t.from,!1);if(t.isLooped())return e;for(var n=Kn(t.to,!1);null!=e&&null!=n;){if(e==n)return e;if(e.isDescendantOf(n))return n;if(n.isDescendantOf(e))return e;e=Kn(e,!1),n=Kn(n,!1)}return null}for(var o=t.parent;null!=o;){if(o._jR())return o;o=o.parent}return null}function Xn(t,i){i.parent?i.parent.setChildIndex(i,i.parent.childrenCount-1):t.roots.setIndex(i,t.roots.length-1)}function jn(t,i){i.parent?i.parent.setChildIndex(i,0):t.roots.setIndex(i,0)}function Zn(t,i){if(i instanceof Qn)i.isInvalid()||function(t,i){var e=i.fromAgent;{var n;i.isLooped()?Xn(t,e):(n=i.toAgent,Xn(t,e),Xn(t,n))}}(t,i);else for(Xn(t,i);i=i.parent;)Xn(t,i)}function Jn(t,i){if(i instanceof Qn)i.isInvalid()||function(t,i){var e=i.fromAgent;{var n;i.isLooped()?jn(t,e):(n=i.toAgent,jn(t,e),jn(t,n))}}(t,i);else for(jn(t,i);i=i.parent;)jn(t,i)}Wn.prototype={_kY:null,getStyle:function(t){return this._kY[t]},setStyle:function(t,i){var e=this._kY[t];return!(e===i||e&&i&&e.equals&&e.equals(i))&&this._o4Q(t,i,new zn(this,t,i,e),this._kY)},putStyles:function(t,i){for(var e in t){var n=t[e];i?this._kY[e]=n:this.setStyle(e,n)}},_$v:!0,invalidateVisibility:function(t){this._$v=!0,t||(this instanceof eo&&this.hasEdge()&&this.forEachEdge(function(t){t._$v=!0}),this._jR()&&this.hasChildren()&&this.forEachChild(function(t){t.invalidateVisibility()}))},onParentChanged:function(t,i){this.invalidateVisibility()},_jR:function(){return!this._4L&&this instanceof co},invalidate:function(){this.onEvent(new It(this,"ui","invalidate"))},_d5:null,addUI:function(t,i){if(this._d5||(this._d5=new ot),t.id||(t.id=++E),this._d5.containsById(t.id))return!1;var e={id:t.id,ui:t,bindingProperties:i};this._d5.add(e);var n=new It(this,"ui","add",e);return this.onEvent(n)},removeUI:function(t){if(!this._d5)return!1;var i=this._d5.getById(t.id||t);if(!i)return!1;this._d5.remove(i),this.onEvent(new It(this,"ui","remove",i))},clearUIs:function(){this.bindingUIs&&this.bindingUIs.toDatas().forEach(function(t){this.removeUI(t.ui)}.bind(this))},toString:function(){return this.$name||this.id},type:"Q.Element",_4L:!1,_jS:!0,inGroup:function(t){var i=Kn(this);return i==t||i&&t instanceof co&&i.isDescendantOf(t)}},t(Wn,Gt),i(Wn.prototype,["uiClass","name","zIndex","tooltip"]),q(Wn.prototype,{enableSubNetwork:{get:function(){return this._4L},set:function(t){var i;this._4L!=t&&(i=this._4L,this._4L=t,this instanceof eo&&this._15(),this.onEvent(new bt(this,"enableSubNetwork",t,i)))}},bindingUIs:{get:function(){return this._d5}},styles:{get:function(){return this._kY},set:function(t){if(this._kY!=t){for(var i in this._kY)i in t||(t[i]=S);this.putStyles(t),this._kY=t}}}}),Si.findGroup=Kn;var Qn=function(t,i,e){this.id=++E,this._d6={},this._kY={},e&&(this.$name=e),this.$from=t,this.$to=i,this.connect()};function qn(t,i){return i=i||new ot,t.forEachEdge(function(t){i.add({id:t.id,edge:t,fromAgent:t.$from._f0,toAgent:t.$to._f0})}),t.forEachChild(function(t){t instanceof eo&&qn(t,i)}),i}function to(t,i,e){if(t._h4)for(var n=t._h4;n;){if(!1===i.call(e,n))return!1;n=n._kD}}function io(t,i,e){if(t._jM)for(var n=t._jM;n;){if(!1===i.call(e,n))return!1;n=n._lS}}Qn.prototype={$uiClass:Bo,_lR:null,_kC:null,_lS:null,_kD:null,_g0:!1,type:"Q.Edge",otherNode:function(t){return t==this.from?this.to:t==this.to?this.from:void 0},connect:function(){return!this._g0&&(!(!this.$from||!this.$to)&&(this._g0=!0,void(this.$from!=this.$to?(function(t,i){if(t._o4P++,!t._jM)return t._jM=i,t._kW=i;i._lR=t._kW,t._kW._lS=i,t._kW=i}(this.$to,this),function(t,i){if(t._o33++,!t._h4)return t._h4=i,t._jN=i;i._kC=t._jN,t._jN._kD=i,t._jN=i}(this.$from,this),Fn(this.$from,this,this.$to),(t=this.fromAgent)!=(i=this.toAgent)&&(this.$from._f0&&(Yn(t,this,i),e=!0),this.$to._f0&&(Hn(i,this),e=!0),e&&Fn(t,this,i))):this.$from._jP(this))));var t,i,e},disconnect:function(){if(!this._g0)return!1;var t,i,e;this._g0=!1,this.$from!=this.$to?(function(t,i){t._o33--,t._jN==i&&(t._jN=i._kC);i._kC?i._kC._kD=i._kD:t._h4=i._kD;i._kD&&(i._kD._kC=i._kC);i._kC=null,i._kD=null,$n(t,i,i.$to)}(this.$from,this),function(t,i){t._o4P--,t._kW==i&&(t._kW=i._lR);i._lR?i._lR._lS=i._lS:t._jM=i._lS;i._lS&&(i._lS._lR=i._lR);i._lR=null,i._lS=null}(this.$to,this),$n(this.$from,this,this.$to),(t=this.fromAgent)!=(i=this.toAgent)&&(this.$from._f0&&(Un(t,this,i),e=!0),this.$to._f0&&(Vn(i,this),e=!0),e&&$n(t,this,i))):this.$from._d2(this)},isConnected:function(){return this._g0},isInvalid:function(){return!this.$from||!this.$to},isLooped:function(){return this.$from==this.$to},getEdgeBundle:function(t){return t?this._3B():this.isLooped()?this.$from._4J:this.$from.getEdgeBundle(this.$to)},hasEdgeBundle:function(){var t=this.getEdgeBundle(!0);return t&&1<t.edges.length},_3B:function(){var t=this.fromAgent,i=this.toAgent;return t===i?this.$from._f0||this.$to._f0?null:this.$from._4J:t.getEdgeBundle(i)},_o3I:null,hasPathSegments:function(){return this._o3I&&!this._o3I.isEmpty()},isBundleEnabled:function(){return this.bundleEnabled&&!this.hasPathSegments()&&!this.edgeType},firePathChange:function(t){this.onEvent(new bt(this,"path.segment",t))},addPathSegment:function(t,i,e){var n=new Fe(i||Ne,t);this._o3I||(this._o3I=new ot),this._o3I.add(n,e),this.firePathChange(n)},addPathSegement:function(){return Si.log('change "edge.addPathSegement(...)" to "edge.addPathSegment(...)"'),this.addPathSegment.apply(this,arguments)},removePathSegmentByIndex:function(t){return this.removePathSegment(t)},removePathSegment:function(t){if(!this._o3I)return!1;U(t)&&(t=this._o3I.getByIndex(t)),t&&(this._o3I.remove(t),this.firePathChange(t))},movePathSegment:function(i,e,t){if(!this._o3I)return!1;if(i=i||0,e=e||0,Si.isNumber(t)){var n=this._o3I.getByIndex(t);return n?(n.move(i,e),void this.firePathChange()):!1}L(function(t){t.move(i,e)}),this.firePathChange()},move:function(i,e){if(!this._o3I)return!1;this._o3I.forEach(function(t){t.move(i,e)},this),this.firePathChange()},validateEdgeBundle:function(){}},t(Qn,Wn),q(Qn.prototype,{pathSegments:{get:function(){return this._o3I},set:function(t){Si.isArray(t)&&(t=new ot(t)),this._o3I=t,this.firePathChange()}},from:{get:function(){return this.$from},set:function(t){var i;this.$from!=t&&(i=new bt(this,"from",t,this.$from),!1!==this.beforeEvent(i)&&(this.disconnect(),this.$from=t,this.connect(),this.onEvent(i)))}},to:{get:function(){return this.$to},set:function(t){var i;this.$to!=t&&(i=new bt(this,"to",t,this.$to),!1!==this.beforeEvent(i)&&(this.disconnect(),this.$to=t,this.connect(),this.onEvent(i)))}},fromAgent:{get:function(){return this.$from?this.$from._f0||this.$from:null}},toAgent:{get:function(){return this.$to?this.$to._f0||this.$to:null}}}),i(Qn.prototype,["edgeType",{name:"bundleEnabled",value:!0},"angle"]);var eo=function(t,i,e){2==arguments.length&&U(t)&&(e=i,i=t,t=null),this.id=++E,this._d6={},this._kY={},t&&(this.$name=t),this.$image="Q-node",this.$anchorPosition=pt.CENTER_MIDDLE,this.$location={x:i||0,y:e||0},this._linkedNodes={}};function no(t,i){i.forEach(function(t){var i=t.fromAgent,e=t.toAgent,n=(t=t.edge).$from._f0,o=t.$to._f0;i!=e&&(i&&Un(i,t,e||t.$to),e&&Vn(e,t,i||t.$from)),n!=o&&(n&&Yn(n,t,o||t.$to),o&&Hn(o,t,n||t.$from),Fn(n||t.$from,t,o||t.$to))},t)}eo.prototype={$uiClass:Go,_f0:null,forEachEdge:function(t,i,e){return!(!e&&this._m7&&!1===this._m7.forEach(t,i))&&(!1!==io(n=this,o=t,r=i)&&to(n,o,r));var n,o,r},forEachOutEdge:function(t,i){return to(this,t,i)},forEachInEdge:function(t,i,e){return io(this,t,i)},getEdges:function(){var i=[];return this.forEachEdge(function(t){i.push(t)}),i},_jM:null,_h4:null,_kW:null,_jN:null,_o4P:0,_o33:0,hasInEdge:function(){return null!=this._jM},hasOutEdge:function(){return null!=this._h4},hasEdge:function(){return null!=this._jM||null!=this._h4||this.hasLoops()},linkedWith:function(t){return t.from==this||t.to==this||t.fromAgent==this||t.toAgent==this},hasEdgeWith:function(t){var i=this.getEdgeBundle(t);return i&&0<i.edges.length},_m7:null,_4J:null,hasLoops:function(){return this._m7&&0<this._m7.length},_jP:function(t){return this._m7||(this._m7=new ot,this._4J=new is(this,this,this._m7)),this._4J._kI(t)},_d2:function(t){if(this._4J)return this._4J._eB(t)},getEdgeBundle:function(t){return t==this?this._4J:this._linkedNodes[t.id]||t._linkedNodes[this.id]},_7E:function(){return this._o35&&this._o35.length},_61:function(){return this._8W&&this._8W.length},_o34:function(){return this._7E()||this._61()},_8W:null,_o35:null,_d3:function(){var t,i,e=this._f0,n=(t=this).parent?(t=t.parent)._f0?t._f0:t instanceof co&&!1===t._iR?t:null:null;e!=n&&(i=qn(this),this._o39(n),no(this,i))},onParentChanged:function(t,i){Si.doSuper(this,eo,"onParentChanged",arguments),this._d3()},_8X:null,_15:function(){var t;if(this._4L?t=null:(t=this._f0)||!1!==this._iR||(t=this),this._8X==t)return!1;if(this._8X=t,this._hE&&this._hE._kZ.length)for(var i,e=this._hE._kZ,n=0,o=e.length;n<o;n++)(i=e[n])instanceof eo&&i._o39(t)},setLocation:function(t,i){if(this.$location&&this.$location.x==t&&this.$location.y==i)return!1;var e=this.$location?{x:this.$location.x,y:this.$location.y}:this.$location,n=new bt(this,"location",e,{x:t,y:i});return!1!==this.beforeEvent(n)&&(this.$location?(this.$location.x=t,this.$location.y=i):this.$location=new ht(t,i),this.onEvent(n),!0)},_f2:null,addFollower:function(t){return null!=t&&(t.host=this)},removeFollower:function(t){return!(!this._f2||!this._f2.contains(t))&&(t.host=null)},hasFollowers:function(){return this._f2&&!this._f2.isEmpty()},toFollowers:function(){return this.hasFollowers()?this._f2.toDatas():null},clearFollowers:function(){this.hasFollowers()&&(this.toFollowers(),L(this.toFollowers(),function(t){t.host=null}))},getFollowerIndex:function(t){return this._f2&&this._f2.contains(t)?this._f2.indexOf(t):-1},setFollowerIndex:function(t,i){if(!this._f2||!this._f2.contains(t))return-1;this._f2.setIndex(t,i)},getFollowerCount:function(){return this._f2?this._f2.length:0},_o37:function(){return this._f2||(this._f2=new ot),this._f2},isFollow:function(t){if(!t||!this._host)return!1;for(var i=this._host;i;){if(i==t)return!0;i=i._host}return!1},_o39:function(t){if(t==this._f0)return!1;this._f0=t,this.invalidateVisibility(),this._15()},type:"Q.Node"},t(eo,Wn),q(eo.prototype,{loops:{get:function(){return this._m7}},edgeCount:{get:function(){return this._o4P+this._o33}},agentNode:{get:function(){return this._f0||this}},host:{set:function(t){if(this==t||t==this._host)return!1;var i=new bt(this,"host",this._host,t);if(!1===this.beforeEvent(i))return!1;var e=null,n=null,o=this._host;return(null==t||(e=new bt(t,"follower.add",null,this),!1!==t.beforeEvent(e)))&&((null==o||(n=new bt(o,"follower.remove",null,this),!1!==o.beforeEvent(n)))&&(null!=(this._host=t)&&t._o37().add(this),null!=o&&o._o37().remove(this),this.onEvent(i),null!=t&&t.onEvent(e),null!=o&&o.onEvent(n),!0))},get:function(){return this._host}}}),i(eo.prototype,["location","size","image","rotate","anchorPosition"]),q(eo.prototype,{x:{get:function(){return this.location.x},set:function(t){t!=this.location.x&&(this.location=new ht(t,this.location.y))}},y:{get:function(){return this.location.y},set:function(t){t!=this.location.y&&(this.location=new ht(this.location.x,t))}}});var oo=function(t,i){t instanceof Ye&&(i=t,t=S),_(this,oo,[t]),this.path=i||new Ye,this.anchorPosition=null,this.uiClass=hr,nt.SHAPENODE_STYLES||(nt.SHAPENODE_STYLES={},nt.SHAPENODE_STYLES[mo.ARROW_TO]=!1),this.putStyles(nt.SHAPENODE_STYLES)};oo.prototype={$uiClass:hr,type:"Q.ShapeNode",moveTo:function(t,i){this.path.moveTo(t,i),this.firePathChange()},lineTo:function(t,i){this.path.lineTo(t,i),this.firePathChange()},quadTo:function(t,i,e,n){this.path.quadTo(t,i,e,n),this.firePathChange()},curveTo:function(t,i,e,n,o,r){this.path.curveTo(t,i,e,n,o,r),this.firePathChange()},arcTo:function(t,i,e,n,o){this.path.arcTo(t,i,e,n,o),this.firePathChange()},closePath:function(){this.path.closePath(),this.firePathChange()},clear:function(){this.path.clear(),this.firePathChange()},removePathSegmentByIndex:function(t){!1!==this.path.removePathSegment(t)&&this.firePathChange()},firePathChange:function(){this.path._79=!0,this.onEvent(new bt(this,"path.segment"))},addPathSegment:function(t,i,e){this.path.add(new Fe(i||Ne,t),e),this.firePathChange()}},t(oo,eo),q(oo.prototype,{path:{get:function(){return this.image},set:function(t){this.image=t}},pathSegments:{get:function(){return this.path.segments},set:function(t){this.path.segments=t||[],this.firePathChange()}},length:{get:function(){return this.path.length}}}),Si.ShapeNode=oo;var ro={_lT:{},register:function(t,i){ro._lT[t]=i},getShape:function(t,i,e,n,o,r){n===S&&(n=i,o=e,e=i=0),n=n||50,o=o||50;var s=ro._lT[t];if(s)return s.generator instanceof Function?s.generator(i,e,n,o,r):s},getRect:function(t,i,e,n,o,r,s){return t instanceof Object&&"width"in t&&(i=t.y,e=t.width,n=t.height,o=t.rx,r=t.ry,s=t.path,t=t.x),so(s||new Ye,t,i,e,n,o,r)},getAllShapes:function(t,i,e,n,o){var r,s={};for(r in ro._lT){var h=ro.getShape(r,t,i,e,n,o);h&&(s[r]=h)}return s},createRegularShape:lo};function so(t,i,e,n,o,r,s){return r||s?(r=r||0,s=s===S?r:s||0,r=Math.min(r,n/2),s=Math.min(s,o/2),t.moveTo(i+r,e),t.lineTo(i+n-r,e),t.quadTo(i+n,e,i+n,e+s),t.lineTo(i+n,e+o-s),t.quadTo(i+n,e+o,i+n-r,e+o),t.lineTo(i+r,e+o),t.quadTo(i,e+o,i,e+o-s),t.lineTo(i,e+s),t.quadTo(i,e,i+r,e)):(t.moveTo(i,e),t.lineTo(i+n,e),t.lineTo(i+n,e+o),t.lineTo(i,e+o)),t.closePath(),t}function ho(t,i,e,n,o){i instanceof Qi&&(n=i.width,o=i.height,e=i.cy-o/2,i=i.cx-n/2);var r=n/2*.5522848,s=o/2*.5522848,h=i+n,a=e+o,l=i+n/2,_=e+o/2;return t.moveTo(i,_),t.curveTo(i,_-s,l-r,e,l,e),t.curveTo(l+r,e,h,_-s,h,_),t.curveTo(h,_+s,l+r,a,l,a),t.curveTo(l-r,a,i,_+s,i,_),t}function ao(t,i,e,n,o,r){return t.moveTo(i,e),t.lineTo(i+n,e+o/2),t.lineTo(i,e+o),r||(t.lineTo(i+.25*n,e+o/2),t.closePath()),t}function lo(t,i,e,n,o){if(!t||t<3)throw new Error("edge number must greater than 2");t|=0,n=n||50,o=o||0,i=i||0,e=e||0;for(var r,s,h=0,a=2*Math.PI/t,l=new Ye;h<t;)r=i+n*Math.cos(o),s=e+n*Math.sin(o),h?l.lineTo(r,s):l.moveTo(r,s),++h,o+=a;return l.closePath(),l}function _o(t,i){_(this,_o,arguments),this.busLayout=!0}function uo(){_(this,uo),this._$z=new Mt}!function(){var t,i,e,n,o,r,s,h,a,l,_,u,c,d,f,E,g,v,p,y,m,T,O;ro.register(Li.SHAPE_CIRCLE,ho(new Ye,0,0,100,100)),ro.register(Li.SHAPE_RECT,so(new Ye,0,0,100,100)),ro.register(Li.SHAPE_ROUNDRECT,so(new Ye,0,0,100,100,20,20)),ro.register(Li.SHAPE_STAR,(t=new Ye,r=2*(n=100),s=2*(o=100),h=(i=0)+n/2,a=(e=0)+o/2,t.moveTo(h-r/4,a-s/12),t.lineTo(i+.306*n,e+.579*o),t.lineTo(h-r/6,a+s/4),t.lineTo(i+n/2,e+.733*o),t.lineTo(h+r/6,a+s/4),t.lineTo(i+.693*n,e+.579*o),t.lineTo(h+r/4,a-s/12),t.lineTo(i+.611*n,e+.332*o),t.lineTo(h+0,a-s/4),t.lineTo(i+.388*n,e+.332*o),t.closePath(),t)),ro.register(Li.SHAPE_TRIANGLE,(l=new Ye,u=_=0,d=c=100,l.moveTo(_,u),l.lineTo(_+c,u+d/2),l.lineTo(_,u+d),l.closePath(),l)),ro.register(Li.SHAPE_PENTAGON,lo(5)),ro.register(Li.SHAPE_HEXAGON,lo(6)),ro.register(Li.SHAPE_DIAMOND,(f=new Ye,g=E=0,p=v=100,f.moveTo(E,g+p/2),f.lineTo(E+v/2,g),f.lineTo(E+v,g+p/2),f.lineTo(E+v/2,g+p),f.closePath(),f)),ro.register(Li.SHAPE_HEART,((y=new Ye).moveTo(75,40),y.curveTo(75,37,70,25,50,25),y.curveTo(20,25,20,62.5,20,62.5),y.curveTo(20,80,40,102,75,120),y.curveTo(110,102,130,80,130,62.5),y.curveTo(130,62.5,130,25,100,25),y.curveTo(85,25,75,37,75,40),y)),ro.register(Li.SHAPE_TRAPEZIUM,((m=new Ye).moveTo(20,0),m.lineTo(80,0),m.lineTo(100,100),m.lineTo(0,100),m.closePath(),m)),ro.register(Li.SHAPE_RHOMBUS,((T=new Ye).moveTo(100,0),T.lineTo(100,80),T.lineTo(0,100),T.lineTo(0,20),T.closePath(),T)),ro.register(Li.SHAPE_PARALLELOGRAM,((O=new Ye).moveTo(20,0),O.lineTo(100,0),O.lineTo(80,100),O.lineTo(0,100),O.closePath(),O));var A,S,L,w,I,b,D,C,R=new Ye;R.moveTo(20,0),R.lineTo(40,0),R.lineTo(40,20),R.lineTo(60,20),R.lineTo(60,40),R.lineTo(40,40),R.lineTo(40,60),R.lineTo(20,60),R.lineTo(20,40),R.lineTo(0,40),R.lineTo(0,20),R.lineTo(20,20),R.closePath(),ro.register(Li.SHAPE_CROSS,R),ro.register(Li.SHAPE_ARROW_STANDARD,ao(new Ye,0,0,100,100)),ro.register(Li.SHAPE_ARROW_1,((A=new Ye).moveTo(43,23),A.lineTo(28,10),A.lineTo(37,2),A.lineTo(63,31),A.lineTo(37,59),A.lineTo(28,52),A.lineTo(44,38),A.lineTo(3,38),A.lineTo(3,23),A.closePath(),A)),ro.register(Li.SHAPE_ARROW_2,((S=new Ye).moveTo(1,8),S.lineTo(7,2),S.lineTo(32,26),S.lineTo(7,50),S.lineTo(1,44),S.lineTo(18,26),S.closePath(),S.moveTo(27,8),S.lineTo(33,2),S.lineTo(57,26),S.lineTo(33,50),S.lineTo(27,44),S.lineTo(44,26),S.closePath(),S)),ro.register(Li.SHAPE_ARROW_3,((L=new Ye).moveTo(0,15),L.lineTo(23,15),L.lineTo(23,1),L.lineTo(47,23),L.lineTo(23,43),L.lineTo(23,29),L.lineTo(0,29),L.closePath(),L)),ro.register(Li.SHAPE_ARROW_4,((w=new Ye).moveTo(0,21),w.lineTo(30,21),w.lineTo(19,0),w.lineTo(25,0),w.lineTo(47,25),w.lineTo(25,48),w.lineTo(19,48),w.lineTo(30,28),w.lineTo(0,28),w.closePath(),w)),ro.register(Li.SHAPE_ARROW_5,((I=new Ye).moveTo(0,0),I.lineTo(34,24),I.lineTo(0,48),I.lineTo(14,24),I.closePath(),I)),ro.register(Li.SHAPE_ARROW_6,((b=new Ye).moveTo(20,0),b.lineTo(34,14),b.lineTo(20,28),b.lineTo(22,18),b.lineTo(1,25),b.lineTo(10,14),b.lineTo(1,3),b.lineTo(22,10),b.closePath(),b)),ro.register(Li.SHAPE_ARROW_7,((D=new Ye).moveTo(4,18),D.lineTo(45,18),D.lineTo(37,4),D.lineTo(83,25),D.lineTo(37,46),D.lineTo(45,32),D.lineTo(4,32),D.closePath(),D)),ro.register(Li.SHAPE_ARROW_8,((C=new Ye).moveTo(17,11),C.lineTo(27,11),C.lineTo(42,27),C.lineTo(27,42),C.lineTo(17,42),C.lineTo(28,30),C.lineTo(4,30),C.lineTo(4,23),C.lineTo(28,23),C.closePath(),C)),ro.register(Li.SHAPE_ARROW_OPEN,ao(new Ye,0,0,100,100,!0))}(),_o.prototype={type:"Q.Bus"},t(_o,oo),Si.Bus=_o,uo.prototype={_h6:function(t){var i=t._l7,e=i?i._hE:this.$roots,n=e.indexOf(t);if(n<0)throw new Error("data '"+t+"' not exist in the box");for(;0<=n;){if(0==n)return i instanceof eo?i:null;--n;var o=e.getByIndex(n);if(o=function t(i){if(!i.hasChildren())return i instanceof eo?i:null;for(var e,n=i._hE._kZ,o=n.length-1;0<=o;){if(e=t(n[o]))return e;o--}return null}(o))return o}return null},forEachNode:function(i,e){this.forEach(function(t){if(t instanceof eo&&!1===i.call(e,t))return!1})},_3P:null},t(uo,Ft),q(uo.prototype,{propertyChangeDispatcher:{get:function(){return this._$z}},currentSubNetwork:{get:function(){return this._3P},set:function(t){var i;t&&!t.enableSubNetwork&&(t=null),this._3P!=t&&(i=this._3P,this._3P=t,this._$z.onEvent(new bt(this,"currentSubNetwork",t,i)))}}}),nt.GROUP_TYPE=Li.GROUP_TYPE_RECT,nt.GROUP_PADDING=5,nt.GROUP_EXPANDED=!0,nt.GROUP_MIN_SIZE={width:60,height:60};var co=function(t,i,e){_(this,co,arguments),i!==S&&e!==S||(this.$location.invalidateFlag=!0),this.$groupType=nt.GROUP_TYPE,this.$padding=nt.GROUP_PADDING,this.$image=qe.group,this.$minSize=nt.GROUP_MIN_SIZE,this.expanded=nt.GROUP_EXPANDED};function fo(t,i,e){_(this,fo,arguments),this.$image=null}co.prototype={type:"Q.Group",$uiClass:tr,_o45:function(){return!this._iR&&!this._f0},forEachOutEdge:function(t,i,e){return!1!==to(this,t,i)&&(!e&&this._o45()&&this._8W?this._8W.forEach(t,i):void 0)},forEachInEdge:function(t,i,e){return!1!==io(this,t,i)&&(!e&&this._o45()&&this._o35?this._o35.forEach(t,i):void 0)},forEachEdge:function(t,i,e){return!1!==v(this,co,"forEachEdge",arguments)&&(e||e||!this._o45()?void 0:(!this._o35||!1!==this._o35.forEach(t,i))&&(this._8W?this._8W.forEach(t,i):void 0))},hasInEdge:function(t){return t?null!=this._jM:null!=this._jM||this._7E()},hasOutEdge:function(t){return t?null!=this._h4:null!=this._h4||this._61()},hasEdge:function(t){return t?null!=this._jM||null!=this._h4:null!=this._jM||null!=this._h4||this._o34()}},t(co,eo),q(co.prototype,{expanded:{get:function(){return this._iR},set:function(t){var i;this._iR!=t&&(i=new bt(this,"expanded",t,this._iR),!1!==this.beforeEvent(i)&&(this._iR=t,this._15(),this.onEvent(i),this._f0||function(){if(!0!==this._iR){qn(this).forEach(function(t){var i=(t=t.edge).$from,e=t.$to,n=i.isDescendantOf(this),o=e.isDescendantOf(this);n&&!o?(Yn(this,t),Fn(this,t)):o&&!n&&(Hn(this,t),Fn(t.fromAgent,t,this))},this)}else{var t,i=this._8W,e=this._o35;if(i)for(i=i._kZ;i.length;){Un(this,t=i[0],t.toAgent)}if(e)for(e=e._kZ;e.length;){Vn(this,t=e[0],t.fromAgent)}no(this,qn(this))}}.call(this)))}}}),i(co.prototype,["minSize","groupType","padding","groupImage"]),Si.Group=co,fo.prototype.type="Q.Text",t(fo,eo),Si.Text=fo;var Eo=function(t){this._l2=new gt,this._8Y=new gt,this._hG=new gt,this.id=++E,t&&(this.data=t)};function go(t,i){var e,n,o={},r={};for(e in i){var s=i[e];s.validateFlags&&s.validateFlags.forEach(function(t,i,e){e[i]="$invalidate"+t,r[t]=!0}),o[e]=function(t,e,i,n){return t[e]=i,n?{get:function(){return this[e]},set:function(t){if(t!==this[e]){this[e]=t,this._o4U,this._1R=!0;for(var i=n.length;0<=--i;)this[n[i]]=!0}}}:{get:function(){return this[e]},set:function(t){t!==this[e]&&(this[e]=t)}}}(t,"$"+e,s.value,s.validateFlags)}for(n in r)t["$invalidate"+n]=!0;Object.defineProperties(t,o)}function vo(t){if(t.$rotatable&&t.$_hostRotate){var i=t.$_hostRotate;return t.globalDirection&&ne(i)?i+Math.PI:i}}Eo.prototype={invalidate:function(){this.invalidateData()},_1R:!0,_l2:null,_8Y:null,_hG:null,_o4U:!1,_l3:1,_l5:1,_jS:!0,_90:0,_7F:0,_l7:null,_o4W:null,borderColor:"#444",borderLineDash:null,borderLineDashOffset:null,syncSelection:!0,syncSelectionStyles:!0,_1F:function(){this.$anchorPoint=Lt(this.anchorPosition,this._90,this._7F)},setMeasuredBounds:function(t,i,e,n){if(t instanceof Object&&(e=t.x,n=t.y,i=t.height,t=t.width),this._l2.width==t&&this._l2.height==i&&this._l2.x==e&&this._l2.y==n)return!1;this._l2.set(e||0,n||0,t||0,i||0)},initialize:function(){},measure:function(){},draw:function(t,i,e,n){},_92:function(t,i,e){e.selectionType==Li.SELECTION_TYPE_SHADOW?(t.shadowColor=e.selectionColor,t.shadowBlur=e.selectionShadowBlur*i,t.shadowOffsetX=(e.selectionShadowOffsetX||0)*i,t.shadowOffsetY=(e.selectionShadowOffsetY||0)*i):this._2C(t,i,e)},_2C:function(t,i,e){var n=e.selectionBorder||0;e.selectionBackgroundColor&&(t.fillStyle=e.selectionBackgroundColor,t.fillRect(this._8Y.x-n/2,this._8Y.y-n/2,this._8Y.width+n,this._8Y.height+n)),t.strokeStyle=e.selectionColor,t.lineWidth=n,t.strokeRect(this._8Y.x-n/2,this._8Y.y-n/2,this._8Y.width+n,this._8Y.height+n)},_l9:function(t,i,e,n){if(!this._jS)return!1;this.syncSelection||(e=this.selected),(!e||this.syncSelectionStyles)&&n||(n=this),t.save(),1!=this.$alpha&&(t.globalAlpha=this.$alpha),t.translate(this.$x,this.$y);var o,r=vo(this);r&&t.rotate(r),(this.offsetX||this.offsetY)&&t.translate(this.offsetX,this.offsetY),this.$rotate&&t.rotate(this.$rotate),this.$layoutByAnchorPoint&&this._o4W&&t.translate(-this._o4W.x,-this._o4W.y),this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*i,t.shadowOffsetX=this.shadowOffsetX*i,t.shadowOffsetY=this.shadowOffsetY*i),e&&n.selectionType==Li.SELECTION_TYPE_BORDER_RECT&&(this._2C(t,i,n),e=!1),this._$w()&&this._nDShape&&!this._nDShape._empty&&(this._nDShape.validate(),o={lineWidth:this.$border,strokeStyle:this.borderColor,lineDash:this.borderLineDash,lineDashOffset:this.borderLineDashOffset,fillColor:this.$backgroundColor,fillGradient:this._o4ackgroundGradient,lineCap:"butt",lineJoin:"round"},this._nDShape.draw(t,i,o,e,n),e=!1,t.shadowColor="rgba(0,0,0,0)"),t.beginPath(),this.draw(t,i,e,n),t.restore()},invalidateData:function(){this.$invalidateData=!0,this.$invalidateSize=!0,this._1R=!0},invalidateSize:function(){this.$invalidateSize=!0,this._1R=!0},invalidateRender:function(){this._1R=!0},_67:function(){},_$w:function(){return this.$backgroundColor||this.$backgroundGradient||this.$border},_4M:function(){return this.$backgroundColor||this.$backgroundGradient},doValidate:function(){return this.$invalidateData&&(this.$invalidateData=!1)!==this.measure()&&(this.$invalidateSize=!0),this.$invalidateSize&&this.validateSize&&this.validateSize(),nn.call(this)?(this.$invalidateRotate=!0,this.onBoundsChanged&&this.onBoundsChanged(),!0):this.$invalidateLocation?(this.$invalidateRotate=!0,!(this.$invalidateLocation=!1)):void 0},validate:function(){var t=this._jS;return this.$invalidateVisibility&&(this.$invalidateVisibility=!1,this._jS=this.$visible,!this._jS||(this.$data||this.$showEmpty)&&!1!==this._67()||(this._jS=!1)),this._jS?(this._1R=!1,this._o4U||(this.initialize(),this._o4U=!0),this.doValidate()):t!=this._jS},_jU:function(t,i){return t-=this.$x,i-=this.$y,en.call(this,{x:t,y:i})},hitTest:function(t,i,e,n){if(t-=this.$x,i-=this.$y,!this._hG.intersectsPoint(t,i,e))return!1;var o=en.call(this,{x:t,y:i});return t=o.x,i=o.y,!(n||!this._$w()||!this._nDShape||!this._nDShape.hitTest(t,i,e,!1,this.$border,this.$backgroundColor||this.$backgroundGradient))||this.doHitTest(t,i,e)},doHitTest:function(t,i,e){return this._l2.intersectsPoint(t,i,e)},hitTestByBounds:function(t,i,e,n){var o=this._jU(t,i);return!(n||!this._$w()||!this._nDShape||!this._nDShape.hitTest(t,i,e,!1,this.$border,this.$backgroundColor||this.$backgroundGradient))||this._l2.intersectsPoint(o.x,o.y,e)},onDataChanged:function(t,i){this.$invalidateData=!0,this._1R=!0,this.$invalidateVisibility=!0},getBounds:function(){var t=this._hG.clone();return t.offset(this.x,this.y),this.parent&&(this.parent.rotate&&Di(t,this.parent.rotate,t),t.offset(this.parent.x||0,this.parent.y||0)),t},destroy:function(){this._jDed=!0},_f5:!1},q(Eo.prototype,{originalBounds:{get:function(){return this._l2}},data:{get:function(){return this.$data},set:function(t){var i;this.$data!=t&&(i=this.$data,this.$data=t,this.onDataChanged(t,i))}},parent:{get:function(){return this._l7}},showOnTop:{get:function(){return this._f5},set:function(t){t!=this._f5&&(this._f5=t,this._1R=!0,this._l7&&this._l7._o4S&&this._l7._o4S(this))}}}),go(Eo.prototype,{globalDirection:{value:!1,validateFlags:["Location"]},visible:{value:!0,validateFlags:["Visibility","Location"]},showEmpty:{validateFlags:["Visibility"]},anchorPosition:{value:pt.CENTER_MIDDLE,validateFlags:["AnchorPoint","Location"]},position:{value:pt.CENTER_MIDDLE,validateFlags:["Location"]},offsetX:{value:0,validateFlags:["Location"]},offsetY:{value:0,validateFlags:["Location"]},layoutByAnchorPoint:{value:!0,validateFlags:["Size","AnchorPoint","Location"]},padding:{value:0,validateFlags:["Size"]},border:{value:0,validateFlags:["Size"]},borderRadius:{value:nt.BORDER_RADIUS},showPointer:{value:!1,validateFlags:["Size"]},pointerX:{value:0,validateFlags:["Size"]},pointerY:{value:0,validateFlags:["Size"]},pointerWidth:{value:nt.POINTER_WIDTH},backgroundColor:{validateFlags:["Size"]},backgroundGradient:{validateFlags:["Size","BackgroundGradient"]},selected:{value:!1,validateFlags:["Size"]},selectionBorder:{value:nt.SELECTION_BORDER,validateFlags:["Size"]},selectionShadowBlur:{value:nt.SELECTION_SHADOW_BLUR,validateFlags:["Size"]},selectionColor:{value:nt.SELECTION_COLOR,validateFlags:["Size"]},selectionType:{value:nt.SELECTION_TYPE,validateFlags:["Size"]},selectionShadowOffsetX:{value:0,validateFlags:["Size"]},selectionShadowOffsetY:{value:0,validateFlags:["Size"]},shadowBlur:{value:0,validateFlags:["Size"]},shadowColor:{validateFlags:["Size"]},shadowOffsetX:{value:0,validateFlags:["Size"]},shadowOffsetY:{value:0,validateFlags:["Size"]},renderColorBlendMode:{},renderColor:{},x:{value:0,validateFlags:["Location"]},y:{value:0,validateFlags:["Location"]},rotatable:{value:!0,validateFlags:["Rotate","Size"]},rotate:{value:0,validateFlags:["Rotate","Size"]},_hostRotate:{validateFlags:["Rotate"]},lineWidth:{value:0,validateFlags:["Data"]},alpha:{value:1}});var po=[Li.PROPERTY_TYPE_ACCESSOR,Li.PROPERTY_TYPE_STYLE,Li.PROPERTY_TYPE_CLIENT];function yo(){po.forEach(function(t){this[t]={}},this)}yo.prototype={removeBinding:function(i){for(var t=po.length;0<=--t;){var e,n=this[po[t]];for(e in n){var o=n[e];Array.isArray(o)?(function(t,i,e){for(var n=t instanceof ot,o=t._kZ||t,r=0,s=o.length;r<s;r++){var h=o[r];i.call(e,h)&&(n?t.remove(h):t.splice(r,1),r--,s--)}}(o,function(t){return t.target==i},this),o.length||delete n[e]):o.target==i&&delete n[e]}}},_29:function(t,i,e){if(!e&&!(e=this[i.propertyType||Li.PROPERTY_TYPE_ACCESSOR]))return!1;var n=e[t];n?(Array.isArray(n)||(e[t]=n=[n]),n.push(i)):e[t]=i},_2V:function(t,i,e,n,o,r){var s=this[t=t||Li.PROPERTY_TYPE_ACCESSOR];if(!s)return!1;var h={property:i,propertyType:t,bindingProperty:n,target:e,callback:o,invalidateSize:r};this._29(i,h,s)},onBindingPropertyChange:function(t,i,e,n){var o=this[e||Li.PROPERTY_TYPE_ACCESSOR];if(!o)return!1;var r=o[i];return!!r&&(t._1R=!0,function t(i,e,n,o){if(Array.isArray(e))for(var r=e.length;0<=--r;)t(i,e[r],n,o);else{var s,h=e.target;if(h){if(h instanceof Eo||(h=i[h]),!h)return}else h=i;o=o||i.getProperty(e.property,n),e.bindingProperty&&(h[e.bindingProperty]=o),e.callback&&((s=e.callback)instanceof Function||(s=i[s]),s instanceof Function&&s.call(i,o,h))}}(t,r,e,n),!0)},initBindingProperties:function(t,i){for(var e=po.length;0<=--e;){var n,o=po[e],r=this[o];for(n in r){var s=r[n];if(s.bindingProperty){var h,a=s.target;if(a){if(!(a instanceof Eo||(a=t[a])))continue}else a=t;(h=!1===i?t.getProperty(s.property,o):o==Li.PROPERTY_TYPE_STYLE?t.graph.getStyle(t.$data,s.property):t.$data[s.property])!==S&&(a[s.bindingProperty]=h)}}}}};var mo={SELECTION_COLOR:"selection.color",SELECTION_BORDER:"selection.border",SELECTION_SHADOW_BLUR:"selection.shadow.blur",SELECTION_SHADOW_OFFSET_X:"selection.shadow.offset.x",SELECTION_SHADOW_OFFSET_Y:"selection.shadow.offset.y",SELECTION_TYPE:"selection.type",RENDER_COLOR:"render.color",RENDER_COLOR_BLEND_MODE:"render.color.blend.mode",ALPHA:"alpha",SHADOW_BLUR:"shadow.blur",SHADOW_COLOR:"shadow.color",SHADOW_OFFSET_X:"shadow.offset.x",SHADOW_OFFSET_Y:"shadow.offset.y",SHAPE_STROKE:"shape.stroke",SHAPE_STROKE_STYLE:"shape.stroke.style",SHAPE_LINE_FILL_COLOR:"shape.stroke.fill.color",SHAPE_LINE_DASH:"shape.line.dash",SHAPE_LINE_DASH_OFFSET:"shape.line.dash.offset",SHAPE_FILL_COLOR:"shape.fill.color",SHAPE_FILL_GRADIENT:"shape.fill.gradient",SHAPE_OUTLINE:"shape.outline",SHAPE_OUTLINE_STYLE:"shape.outline.style",LAYOUT_BY_PATH:"layout.by.path",BACKGROUND_COLOR:"background.color",BACKGROUND_GRADIENT:"background.gradient",BORDER:"border.width",BORDER_COLOR:"border.color",BORDER_LINE_DASH:"border.line.dash",BORDER_LINE_DASH_OFFSET:"border.line.dash.offset",BORDER_RADIUS:"border.radius",PADDING:"padding",LINE_CAP:"line.cap",LINE_JOIN:"line.join",LINE_DASH_CAP:"line.dash.cap",LINE_DASH_JOIN:"line.dash.join",IMAGE_BACKGROUND_COLOR:"image.background.color",IMAGE_BACKGROUND_GRADIENT:"image.background.gradient",IMAGE_BORDER:"image.border.width"};mo.IMAGE_BORDER_STYLE=mo.IMAGE_BORDER_COLOR="image.border.style",mo.IMAGE_BORDER_LINE_DASH="image.border.line.dash",mo.IMAGE_BORDER_LINE_DASH_OFFSET="image.border.line.dash.offset",mo.IMAGE_RADIUS=mo.IMAGE_BORDER_RADIUS="image.radius",mo.IMAGE_PADDING="image.padding",mo.IMAGE_Z_INDEX="image.z.index",mo.IMAGE_ADJUST="image.adjust",mo.IMAGE_ALPHA="image.alpha",mo.LABEL_ROTATE="label.rotate",mo.LABEL_POSITION="label.position",mo.LABEL_GLOBAL_DIRECTION="label.global.direction",mo.LABEL_VISIBLE="label.visible",mo.LABEL_ANCHOR_POSITION="label.anchor.position",mo.LABEL_COLOR="label.color",mo.LABEL_FONT_SIZE="label.font.size",mo.LABEL_FONT_FAMILY="label.font.family",mo.LABEL_FONT_STYLE="label.font.style",mo.LABEL_PADDING="label.padding",mo.LABEL_POINTER_WIDTH="label.pointer.width",mo.LABEL_POINTER="label.pointer",mo.LABEL_RADIUS="label.radius",mo.LABEL_OFFSET_X="label.offset.x",mo.LABEL_OFFSET_Y="label.offset.y",mo.LABEL_SIZE="label.size",mo.LABEL_MAX_WIDTH="label.max.width",mo.LABEL_ALIGN_POSITION="label.align.position",mo.LABEL_BORDER="label.border",mo.LABEL_BORDER_LINE_DASH="label.border.line.dash",mo.LABEL_BORDER_LINE_DASH_OFFSET="label.border.line.dash.offset",mo.LABEL_BORDER_STYLE="label.border.style",mo.LABEL_BACKGROUND_COLOR="label.background.color",mo.LABEL_BACKGROUND_GRADIENT="label.background.gradient",mo.LABEL_ROTATABLE="label.rotatable",mo.LABEL_SHADOW_BLUR="label.shadow.blur",mo.LABEL_SHADOW_COLOR="label.shadow.color",mo.LABEL_SHADOW_OFFSET_X="label.shadow.offset.x",mo.LABEL_SHADOW_OFFSET_Y="label.shadow.offset.y",mo.LABEL_Z_INDEX="label.z.index",mo.LABEL_ON_TOP="label.on.top",mo.GROUP_BACKGROUND_COLOR="group.background.color",mo.GROUP_BACKGROUND_GRADIENT="group.background.gradient",mo.GROUP_RADIUS="group.radius",mo.GROUP_STROKE="group.stroke",mo.GROUP_STROKE_STYLE="group.stroke.color",mo.GROUP_STROKE_LINE_DASH="group.stroke.line.dash",mo.GROUP_STROKE_LINE_DASH_OFFSET="group.stroke.line.dash.offset",mo.EDGE_BUNDLE_LABEL_ROTATE="edge.bundle.label.rotate",mo.EDGE_BUNDLE_LABEL_POSITION="edge.bundle.label.position",mo.EDGE_BUNDLE_LABEL_ANCHOR_POSITION="edge.bundle.label.anchor.position",mo.EDGE_BUNDLE_LABEL_COLOR="edge.bundle.label.color",mo.EDGE_BUNDLE_LABEL_FONT_SIZE="edge.bundle.label.font.size",mo.EDGE_BUNDLE_LABEL_FONT_FAMILY="edge.bundle.label.font.family",mo.EDGE_BUNDLE_LABEL_FONT_STYLE="edge.bundle.label.font.style",mo.EDGE_BUNDLE_LABEL_PADDING="edge.bundle.label.padding",mo.EDGE_BUNDLE_LABEL_POINTER_WIDTH="edge.bundle.label.pointer.width",mo.EDGE_BUNDLE_LABEL_POINTER="edge.bundle.label.pointer",mo.EDGE_BUNDLE_LABEL_RADIUS="edge.bundle.label.radius",mo.EDGE_BUNDLE_LABEL_OFFSET_X="edge.bundle.label.offset.x",mo.EDGE_BUNDLE_LABEL_OFFSET_Y="edge.bundle.label.offset.y",mo.EDGE_BUNDLE_LABEL_BORDER="edge.bundle.label.border",mo.EDGE_BUNDLE_LABEL_BORDER_STYLE="edge.bundle.label.border.color",mo.EDGE_BUNDLE_LABEL_BACKGROUND_COLOR="edge.bundle.label.background.color",mo.EDGE_BUNDLE_LABEL_BACKGROUND_GRADIENT="edge.bundle.label.background.gradient",mo.EDGE_BUNDLE_LABEL_ROTATABLE="edge.bundle.label.rotatable",mo.EDGE_WIDTH="edge.width",mo.EDGE_COLOR="edge.color",mo.EDGE_OUTLINE="edge.outline",mo.EDGE_OUTLINE_STYLE="edge.outline.style",mo.EDGE_LINE_DASH="edge.line.dash",mo.EDGE_LINE_DASH_OFFSET="edge.line.dash.offset",mo.EDGE_FROM_OFFSET="edge.from.offset",mo.EDGE_TO_OFFSET="edge.to.offset",mo.EDGE_FILL_COLOR="edge.fill.color",mo.EDGE_BUNDLE_TYPE="edge.bundle.type",mo.EDGE_BUNDLE_GAP="edge.bundle.gap",mo.EDGE_LOOPED_EXTAND="edge.looped.extand",mo.EDGE_EXTEND="edge.extend",mo.EDGE_CONTROL_POINT="edge.control.point",mo.EDGE_SPLIT_BY_PERCENT="edge.split.by.percent",mo.EDGE_SPLIT_PERCENT="edge.split.percent",mo.EDGE_SPLIT_VALUE="edge.split.value",mo.EDGE_CORNER="edge.corner",mo.EDGE_CORNER_RADIUS="edge.corner.radius",mo.EDGE_FROM_AT_EDGE="edge.from.at.edge",mo.EDGE_TO_AT_EDGE="edge.to.at.edge",mo.EDGE_FROM_PORT="edge.from.port",mo.EDGE_TO_PORT="edge.to.port",mo.ARROW_FROM="arrow.from",mo.ARROW_FROM_SIZE="arrow.from.size",mo.ARROW_FROM_OFFSET="arrow.from.offset",mo.ARROW_FROM_STROKE="arrow.from.stroke",mo.ARROW_FROM_STROKE_STYLE="arrow.from.stroke.style",mo.ARROW_FROM_OUTLINE="arrow.from.outline",mo.ARROW_FROM_OUTLINE_STYLE="arrow.from.outline.style",mo.ARROW_FROM_LINE_DASH="arrow.from.line.dash",mo.ARROW_FROM_LINE_DASH_OFFSET="arrow.from.line.dash.offset",mo.ARROW_FROM_FILL_COLOR="arrow.from.fill.color",mo.ARROW_FROM_FILL_GRADIENT="arrow.from.fill.gradient",mo.ARROW_FROM_LINE_CAP="arrow.from.line.cap",mo.ARROW_FROM_LINE_JOIN="arrow.from.line.join",mo.ARROW_TO="arrow.to",mo.ARROW_TO_SIZE="arrow.to.size",mo.ARROW_TO_OFFSET="arrow.to.offset",mo.ARROW_TO_STROKE="arrow.to.stroke",mo.ARROW_TO_STROKE_STYLE="arrow.to.stroke.style",mo.ARROW_TO_OUTLINE="arrow.to.outline",mo.ARROW_TO_OUTLINE_STYLE="arrow.to.outline.style",mo.ARROW_TO_LINE_DASH="arrow.to.line.dash",mo.ARROW_TO_LINE_DASH_OFFSET="arrow.to.line.dash.offset",mo.ARROW_TO_FILL_COLOR="arrow.to.fill.color",mo.ARROW_TO_FILL_GRADIENT="arrow.to.fill.gradient",mo.ARROW_TO_LINE_CAP="arrow.to.line.cap",mo.ARROW_TO_LINE_JOIN="arrow.to.line.join";var To=new yo,Oo=Li.PROPERTY_TYPE_ACCESSOR,Ao=Li.PROPERTY_TYPE_STYLE;To._2V(Ao,mo.SELECTION_TYPE,null,"selectionType"),To._2V(Ao,mo.SELECTION_BORDER,null,"selectionBorder"),To._2V(Ao,mo.SELECTION_SHADOW_BLUR,null,"selectionShadowBlur"),To._2V(Ao,mo.SELECTION_COLOR,null,"selectionColor"),To._2V(Ao,mo.SELECTION_SHADOW_OFFSET_X,null,"selectionShadowOffsetX"),To._2V(Ao,mo.SELECTION_SHADOW_OFFSET_Y,null,"selectionShadowOffsetY"),To._2V(Oo,"name","label","data"),To._2V(Ao,mo.LABEL_VISIBLE,"label","visible"),To._2V(Ao,mo.LABEL_POSITION,"label","position"),To._2V(Ao,mo.LABEL_GLOBAL_DIRECTION,"label","globalDirection"),To._2V(Ao,mo.LABEL_ANCHOR_POSITION,"label","anchorPosition"),To._2V(Ao,mo.LABEL_COLOR,"label","color"),To._2V(Ao,mo.LABEL_FONT_SIZE,"label","fontSize"),To._2V(Ao,mo.LABEL_BORDER,"label","border"),To._2V(Ao,mo.LABEL_BORDER_LINE_DASH,"label","borderLineDash"),To._2V(Ao,mo.LABEL_BORDER_LINE_DASH_OFFSET,"label","borderLineDashOffset"),To._2V(Ao,mo.LABEL_BORDER_STYLE,"label","borderColor"),To._2V(Ao,mo.LABEL_BACKGROUND_COLOR,"label","backgroundColor"),To._2V(Ao,mo.LABEL_ON_TOP,"label","showOnTop"),To._2V(Ao,mo.SHADOW_BLUR,null,"shadowBlur"),To._2V(Ao,mo.SHADOW_COLOR,null,"shadowColor"),To._2V(Ao,mo.SHADOW_OFFSET_X,null,"shadowOffsetX"),To._2V(Ao,mo.SHADOW_OFFSET_Y,null,"shadowOffsetY"),To._2V(Ao,mo.LABEL_FONT_FAMILY,"label","fontFamily"),To._2V(Ao,mo.LABEL_FONT_STYLE,"label","fontStyle"),To._2V(Ao,mo.LABEL_ALIGN_POSITION,"label","alignPosition"),To._2V(Ao,mo.LABEL_ROTATE,"label","rotate"),To._2V(Ao,mo.LABEL_PADDING,"label","padding"),To._2V(Ao,mo.LABEL_POINTER_WIDTH,"label","pointerWidth"),To._2V(Ao,mo.LABEL_POINTER,"label","showPointer"),To._2V(Ao,mo.LABEL_RADIUS,"label","borderRadius"),To._2V(Ao,mo.LABEL_OFFSET_X,"label","offsetX"),To._2V(Ao,mo.LABEL_OFFSET_Y,"label","offsetY"),To._2V(Ao,mo.LABEL_ROTATABLE,"label","rotatable"),To._2V(Ao,mo.LABEL_BACKGROUND_GRADIENT,"label","backgroundGradient"),To._2V(Ao,mo.LABEL_SIZE,"label","size"),To._2V(Ao,mo.LABEL_MAX_WIDTH,"label","maxWidth"),To._2V(Ao,mo.LABEL_SHADOW_BLUR,"label","shadowBlur"),To._2V(Ao,mo.LABEL_SHADOW_COLOR,"label","shadowColor"),To._2V(Ao,mo.LABEL_SHADOW_OFFSET_X,"label","shadowOffsetX"),To._2V(Ao,mo.LABEL_SHADOW_OFFSET_Y,"label","shadowOffsetY"),To._2V(Ao,mo.LABEL_Z_INDEX,"label","zIndex"),To._2V(Ao,mo.RENDER_COLOR,null,"renderColor"),To._2V(Ao,mo.RENDER_COLOR_BLEND_MODE,null,"renderColorBlendMode"),To._2V(Ao,mo.ALPHA,null,"alpha");var So=new yo;So._2V(Oo,"location"),So._2V(Oo,"anchorPosition",null,"_2X"),So._2V(Oo,"rotate",null,"rotate"),So._2V(Ao,mo.BACKGROUND_COLOR,null,"backgroundColor"),So._2V(Ao,mo.BACKGROUND_GRADIENT,null,"backgroundGradient"),So._2V(Ao,mo.PADDING,null,"padding"),So._2V(Ao,mo.BORDER,null,"border"),So._2V(Ao,mo.BORDER_RADIUS,null,"borderRadius"),So._2V(Ao,mo.BORDER_COLOR,null,"borderColor"),So._2V(Ao,mo.BORDER_LINE_DASH,null,"borderLineDash"),So._2V(Ao,mo.BORDER_LINE_DASH_OFFSET,null,"borderLineDashOffset"),So._2V(Oo,"image","image","data","_dA"),So._2V(Oo,"size","image","size"),So._2V(Ao,mo.SHAPE_STROKE,"image","lineWidth"),So._2V(Ao,mo.SHAPE_STROKE_STYLE,"image","strokeStyle"),So._2V(Ao,mo.SHAPE_FILL_COLOR,"image","fillColor"),So._2V(Ao,mo.LAYOUT_BY_PATH,"image","layoutByPath"),So._2V(Ao,mo.IMAGE_ADJUST,"image","adjustType"),So._2V(Ao,mo.SHAPE_OUTLINE,"image","outline"),So._2V(Ao,mo.SHAPE_OUTLINE_STYLE,"image","outlineStyle"),So._2V(Ao,mo.SHAPE_FILL_GRADIENT,"image","fillGradient"),So._2V(Ao,mo.SHAPE_LINE_DASH,"image","lineDash"),So._2V(Ao,mo.SHAPE_LINE_DASH_OFFSET,"image","lineDashOffset"),So._2V(Ao,mo.LINE_CAP,"image","lineCap"),So._2V(Ao,mo.LINE_JOIN,"image","lineJoin"),So._2V(Ao,mo.IMAGE_BACKGROUND_COLOR,"image","backgroundColor"),So._2V(Ao,mo.IMAGE_BACKGROUND_GRADIENT,"image","backgroundGradient"),So._2V(Ao,mo.IMAGE_PADDING,"image","padding"),So._2V(Ao,mo.IMAGE_BORDER,"image","border"),So._2V(Ao,mo.IMAGE_BORDER_RADIUS,"image","borderRadius"),So._2V(Ao,mo.IMAGE_BORDER_COLOR,"image","borderColor"),So._2V(Ao,mo.IMAGE_BORDER_LINE_DASH,"image","borderLineDash"),So._2V(Ao,mo.IMAGE_BORDER_LINE_DASH_OFFSET,"image","borderLineDashOffset"),So._2V(Ao,mo.IMAGE_Z_INDEX,"image","zIndex"),So._2V(Ao,mo.IMAGE_ALPHA,"image","alpha"),So._2V(Oo,"expanded",null,null,"checkBody"),So._2V(Oo,"enableSubNetwork",null,null,"checkBody");var Lo=new yo;Lo._2V(Oo,"groupType",null,null,"_6A"),Lo._2V(Oo,"groupImage",null,null,"_6A"),Lo._2V(Oo,"minSize",null,null,"_6A"),Lo._2V(Oo,"padding",null,null,"_6A"),Lo._2V(Ao,mo.GROUP_BACKGROUND_COLOR,"shape","fillColor"),Lo._2V(Ao,mo.GROUP_BACKGROUND_GRADIENT,"shape","fillGradient"),Lo._2V(Ao,mo.GROUP_STROKE,"shape","lineWidth"),Lo._2V(Ao,mo.GROUP_STROKE_STYLE,"shape","strokeStyle"),Lo._2V(Ao,mo.GROUP_STROKE_LINE_DASH,"shape","lineDash"),Lo._2V(Ao,mo.GROUP_STROKE_LINE_DASH_OFFSET,"shape","lineDashOffset"),Lo._2V(Ao,mo.GROUP_RADIUS,null,null,"_6A");var wo=new yo;wo._2V(Oo,"from","shape",null,"_4N"),wo._2V(Oo,"to","shape",null,"_4N"),wo._2V(Oo,"edgeType","shape",null,"_4N"),wo._2V(Ao,mo.EDGE_EXTEND,"shape",null,"_4N"),wo._2V(Ao,mo.EDGE_BUNDLE_TYPE,"shape",null,"_4N"),wo._2V(Ao,mo.EDGE_WIDTH,"shape","lineWidth"),wo._2V(Ao,mo.EDGE_COLOR,"shape","strokeStyle"),wo._2V(Ao,mo.ARROW_FROM,"shape","fromArrow"),wo._2V(Ao,mo.ARROW_TO,"shape","toArrow"),wo._2V(Ao,mo.LINE_DASH_CAP,"shape","lineDashCap"),wo._2V(Ao,mo.LINE_DASH_JOIN,"shape","lineDashJoin"),wo._2V(Ao,mo.EDGE_FILL_COLOR,"shape","lineFillColor"),wo._2V(Ao,mo.EDGE_FROM_AT_EDGE,null,"fromAtEdge","_4N"),wo._2V(Ao,mo.EDGE_TO_AT_EDGE,null,"toAtEdge","_4N"),wo._2V(Ao,mo.EDGE_OUTLINE,"shape","outline"),wo._2V(Ao,mo.EDGE_OUTLINE_STYLE,"shape","outlineStyle"),wo._2V(Ao,mo.EDGE_LINE_DASH,"shape","lineDash"),wo._2V(Ao,mo.EDGE_LINE_DASH_OFFSET,"shape","lineDashOffset"),wo._2V(Ao,mo.EDGE_CONTROL_POINT,"shape",null,"_4N"),wo._2V(Ao,mo.EDGE_FROM_OFFSET,"shape",null,"_4N"),wo._2V(Ao,mo.EDGE_TO_OFFSET,"shape",null,"_4N"),wo._2V(Ao,mo.EDGE_FROM_PORT,"shape",null,"_4N"),wo._2V(Ao,mo.EDGE_TO_PORT,"shape",null,"_4N"),wo._2V(Ao,mo.LINE_CAP,"shape","lineCap"),wo._2V(Ao,mo.LINE_JOIN,"shape","lineJoin"),wo._2V(Oo,"path.segment",null,null,"_4N",!0),wo._2V(Oo,"angle",null,null,"_4N",!0),wo._2V(Ao,mo.ARROW_FROM_SIZE,"shape","fromArrowSize"),wo._2V(Ao,mo.ARROW_FROM_OFFSET,"shape","fromArrowOffset"),wo._2V(Ao,mo.ARROW_FROM_STROKE,"shape","fromArrowStroke"),wo._2V(Ao,mo.ARROW_FROM_STROKE_STYLE,"shape","fromArrowStrokeStyle"),wo._2V(Ao,mo.ARROW_FROM_OUTLINE,"shape","fromArrowOutline"),wo._2V(Ao,mo.ARROW_FROM_OUTLINE_STYLE,"shape","fromArrowOutlineStyle"),wo._2V(Ao,mo.ARROW_FROM_FILL_COLOR,"shape","fromArrowFillColor"),wo._2V(Ao,mo.ARROW_FROM_FILL_GRADIENT,"shape","fromArrowFillGradient"),wo._2V(Ao,mo.ARROW_FROM_LINE_DASH,"shape","fromArrowLineDash"),wo._2V(Ao,mo.ARROW_FROM_LINE_DASH_OFFSET,"shape","fromArrowLineDashOffset"),wo._2V(Ao,mo.ARROW_FROM_LINE_JOIN,"shape","fromArrowLineJoin"),wo._2V(Ao,mo.ARROW_FROM_LINE_CAP,"shape","fromArrowLineCap"),wo._2V(Ao,mo.ARROW_TO_SIZE,"shape","toArrowSize"),wo._2V(Ao,mo.ARROW_TO_OFFSET,"shape","toArrowOffset"),wo._2V(Ao,mo.ARROW_TO_STROKE,"shape","toArrowStroke"),wo._2V(Ao,mo.ARROW_TO_STROKE_STYLE,"shape","toArrowStrokeStyle"),wo._2V(Ao,mo.ARROW_TO_OUTLINE,"shape","toArrowOutline"),wo._2V(Ao,mo.ARROW_TO_OUTLINE_STYLE,"shape","toArrowOutlineStyle"),wo._2V(Ao,mo.ARROW_TO_FILL_COLOR,"shape","toArrowFillColor"),wo._2V(Ao,mo.ARROW_TO_FILL_GRADIENT,"shape","toArrowFillGradient"),wo._2V(Ao,mo.ARROW_TO_LINE_DASH,"shape","toArrowLineDash"),wo._2V(Ao,mo.ARROW_TO_LINE_DASH_OFFSET,"shape","toArrowLineDashOffset"),wo._2V(Ao,mo.ARROW_TO_LINE_JOIN,"shape","toArrowLineJoin"),wo._2V(Ao,mo.ARROW_TO_LINE_CAP,"shape","toArrowLineCap");var Io=new yo;Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_COLOR,"bundleLabel","color"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_POSITION,"bundleLabel","position"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_ANCHOR_POSITION,"bundleLabel","anchorPosition"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_FONT_SIZE,"bundleLabel","fontSize"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_ROTATABLE,"bundleLabel","rotatable"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_ROTATE,"bundleLabel","rotate"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_FONT_FAMILY,"bundleLabel","fontFamily"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_FONT_STYLE,"bundleLabel","fontStyle"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_PADDING,"bundleLabel","padding"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_POINTER_WIDTH,"bundleLabel","pointerWidth"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_POINTER,"bundleLabel","showPointer"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_RADIUS,"bundleLabel","borderRadius"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_OFFSET_X,"bundleLabel","offsetX"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_OFFSET_Y,"bundleLabel","offsetY"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_BORDER,"bundleLabel","border"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_BORDER_STYLE,"bundleLabel","borderColor"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_BACKGROUND_COLOR,"bundleLabel","backgroundColor"),Io._2V(Ao,mo.EDGE_BUNDLE_LABEL_BACKGROUND_GRADIENT,"bundleLabel","backgroundGradient");var bo=new yo;bo._2V(Oo,"location"),bo._2V(Ao,mo.BACKGROUND_COLOR,null,"backgroundColor"),bo._2V(Ao,mo.BACKGROUND_GRADIENT,null,"backgroundGradient"),bo._2V(Ao,mo.PADDING,null,"padding"),bo._2V(Ao,mo.BORDER,null,"border"),bo._2V(Ao,mo.BORDER_RADIUS,null,"borderRadius"),bo._2V(Ao,mo.BORDER_COLOR,null,"borderColor"),bo._2V(Ao,mo.BORDER_LINE_DASH,null,"borderLineDash"),bo._2V(Ao,mo.BORDER_LINE_DASH_OFFSET,null,"borderLineDashOffset"),bo._2V(Oo,"rotate",null,"rotate"),bo._2V(Oo,"path.segment",null,null,"invalidateShape"),bo._2V(Oo,"path","image","data"),bo._2V(Oo,"size","image","size"),bo._2V(Ao,mo.SHAPE_STROKE,"image","lineWidth"),bo._2V(Ao,mo.SHAPE_STROKE_STYLE,"image","strokeStyle"),bo._2V(Ao,mo.SHAPE_FILL_COLOR,"image","fillColor"),bo._2V(Ao,mo.SHAPE_FILL_GRADIENT,"image","fillGradient"),bo._2V(Ao,mo.LINE_DASH_CAP,"image","lineDashCap"),bo._2V(Ao,mo.LINE_DASH_JOIN,"image","lineDashJoin"),bo._2V(Ao,mo.SHAPE_LINE_FILL_COLOR,"image","lineFillColor"),bo._2V(Ao,mo.SHAPE_OUTLINE,"image","outline"),bo._2V(Ao,mo.SHAPE_OUTLINE_STYLE,"image","outlineStyle"),bo._2V(Ao,mo.SHAPE_LINE_DASH,"image","lineDash"),bo._2V(Ao,mo.SHAPE_LINE_DASH_OFFSET,"image","lineDashOffset"),bo._2V(Ao,mo.LINE_CAP,"image","lineCap"),bo._2V(Ao,mo.LINE_JOIN,"image","lineJoin"),bo._2V(Ao,mo.LAYOUT_BY_PATH,"image","layoutByPath"),bo._2V(Ao,mo.IMAGE_BACKGROUND_COLOR,"image","backgroundColor"),bo._2V(Ao,mo.IMAGE_BACKGROUND_GRADIENT,"image","backgroundGradient"),bo._2V(Ao,mo.IMAGE_PADDING,"image","padding"),bo._2V(Ao,mo.IMAGE_BORDER,"image","border"),bo._2V(Ao,mo.IMAGE_BORDER_RADIUS,"image","borderRadius"),bo._2V(Ao,mo.IMAGE_BORDER_COLOR,"image","borderColor"),bo._2V(Ao,mo.IMAGE_BORDER_LINE_DASH,"image","borderLineDash"),bo._2V(Ao,mo.IMAGE_BORDER_LINE_DASH_OFFSET,"image","borderLineDashOffset"),bo._2V(Ao,mo.ARROW_FROM,"image","fromArrow"),bo._2V(Ao,mo.ARROW_FROM_SIZE,"image","fromArrowSize"),bo._2V(Ao,mo.ARROW_FROM_OFFSET,"image","fromArrowOffset"),bo._2V(Ao,mo.ARROW_FROM_STROKE,"image","fromArrowStroke"),bo._2V(Ao,mo.ARROW_FROM_STROKE_STYLE,"image","fromArrowStrokeStyle"),bo._2V(Ao,mo.ARROW_FROM_FILL_COLOR,"image","fromArrowFillColor"),bo._2V(Ao,mo.ARROW_FROM_FILL_GRADIENT,"image","fromArrowFillGradient"),bo._2V(Ao,mo.ARROW_FROM_LINE_DASH,"image","fromArrowLineDash"),bo._2V(Ao,mo.ARROW_FROM_LINE_DASH_OFFSET,"image","fromArrowLineDashOffset"),bo._2V(Ao,mo.ARROW_FROM_LINE_JOIN,"image","fromArrowLineJoin"),bo._2V(Ao,mo.ARROW_FROM_LINE_CAP,"image","fromArrowLineCap"),bo._2V(Ao,mo.ARROW_TO_SIZE,"image","toArrowSize"),bo._2V(Ao,mo.ARROW_TO_OFFSET,"image","toArrowOffset"),bo._2V(Ao,mo.ARROW_TO,"image","toArrow"),bo._2V(Ao,mo.ARROW_TO_STROKE,"image","toArrowStroke"),bo._2V(Ao,mo.ARROW_TO_STROKE_STYLE,"image","toArrowStrokeStyle"),bo._2V(Ao,mo.ARROW_TO_FILL_COLOR,"image","toArrowFillColor"),bo._2V(Ao,mo.ARROW_TO_FILL_GRADIENT,"image","toArrowFillGradient"),bo._2V(Ao,mo.ARROW_TO_LINE_DASH,"image","toArrowLineDash"),bo._2V(Ao,mo.ARROW_TO_LINE_DASH_OFFSET,"image","toArrowLineDashOffset"),bo._2V(Ao,mo.ARROW_TO_LINE_JOIN,"image","toArrowLineJoin"),bo._2V(Ao,mo.ARROW_TO_LINE_CAP,"image","toArrowLineCap");function Do(t,i){return(t=t.zIndex)==(i=i.zIndex)?0:(i=i||0)<(t=t||0)?1:t<i?-1:void 0}var Co=function(t,i){this.uiBounds=new gt,_(this,Co,arguments),this.id=this.$data.id,this.graph=i,this._hE=[],this._d8=new yo};function Ro(t,i,e,n){if(n!=Li.PROPERTY_TYPE_ACCESSOR)if(n!=Li.PROPERTY_TYPE_CLIENT){if(n!=Li.PROPERTY_TYPE_STYLE)return!1;t.setStyle(e,i)}else t.set(e,i);else t[e]=i}Co.prototype={syncSelection:!1,graph:null,layoutByAnchorPoint:!1,_d8:null,_hE:null,addChild:function(t,i){t._l7=this,i!==S?A(this._hE,t,i):this._hE.push(t),t._f5&&this._o4S(t),this.invalidateChildrenIndex(),this.invalidateSize(),this.$invalidateChild=!0},removeChild:function(t){this._d8.removeBinding(t),t._l7=null,w(this._hE,t),this._l1&&this._l1.remove(t),this.invalidateSize(),this.$invalidateChild=!0},getProperty:function(t,i){return i==Li.PROPERTY_TYPE_STYLE?this.graph.getStyle(this.$data,t):i==Li.PROPERTY_TYPE_CLIENT?this.$data.get(t):this.$data[t]},getStyle:function(t){return this.graph.getStyle(this.$data,t)},_10:function(t,i,e){var n=this._d8.onBindingPropertyChange(this,t,i,e);return To.onBindingPropertyChange(this,t,i,e)||n},onPropertyChange:function(t){if("zIndex"==t.kind)return this.invalidateRender(),!0;if("ui"!=t.type)return this._10(t.kind,t.propertyType||Oo,t.value);if("invalidate"==t.kind)return this.invalidate(),!0;var i=t.value;return!(!i||!i.ui)&&("add"==t.kind?this._o3B(i):"remove"==t.kind&&this.removeChild(i.ui),!0)},label:null,initLabel:function(){var t=new No;t.name="label",this.addChild(t),this.label=t},initialize:function(){this.initLabel(),this.$data._d5&&this.$data._d5.forEach(this._o3B,this),To.initBindingProperties(this),this._d8.initBindingProperties(this,!1)},addBinding:function(t,i){if(!i.property)return!1;i.target=t,this._d8._29(i.property,i)},_hF:function(t,i){var e=this.$data;if(!e._d5)return!1;var n=e._d5.getById(t.id);if(!n||!n.bindingProperties)return!1;var o=n.bindingProperties;if(V(o)){var r=!1;return L(o,function(t){if("data"==t.bindingProperty)return r=Ro(e,i,t.property,t.propertyType),!1},this),r}return"data"==o.bindingProperty&&Ro(e,i,o.property,o.propertyType)},_o3B:function(t){var i,e=t.ui;e&&((i=t.bindingProperties)&&(Array.isArray(i)?i.forEach(function(t){this.addBinding(e,t)},this):this.addBinding(e,i)),this.addChild(e))},validate:function(){return this._o4U||(this.initialize(),this._o4U=!0),this.doValidate()},_$g:!0,invalidateChildrenIndex:function(){this._$g=!0},doValidate:function(){if(this._1R&&(this._1R=!1,this.validateChildren()&&(this.measure(),this.$invalidateSize=!0),this._$g&&(this._$g=!1,R?this._hE=a(this._hE,Do):this._hE.sort(Do))),nn.call(this)&&(this.$invalidateRotate=!0),this.$invalidateRotate){rn.call(this),this.uiBounds.setByRect(this._hG);var t=this.$selectionBorder||0,i=Math.max(this.$selectionBorder||0,this.$shadowOffsetX||0,this.$selectionShadowOffsetX||0),e=Math.max(this.$shadowOffsetY||0,this.$selectionShadowOffsetY||0),n=Math.max(t,this.$shadowBlur,this.$selectionShadowBlur),o=(n+=nt.UI_BOUNDS_GROW||0)-i,r=n+i,s=n-e,h=n+e;return o<0&&(o=0),r<0&&(r=0),s<0&&(s=0),h<0&&(h=0),this.uiBounds.grow(s,o,h,r),this.onBoundsChanged&&this.onBoundsChanged(),this.$invalidateBounds=!0}},validateChildren:function(){var t=this.$invalidateChild;this.$invalidateChild=!1;var i=this._o4ody,e=this.bodyChanged;i&&(i.$renderColor=this.$renderColor,i.$renderColorBlendMode=this.$renderColorBlendMode,i.$shadowColor=this.$shadowColor,i.$shadowBlur=this.$shadowBlur,i.$shadowOffsetX=this.$shadowOffsetX,i.$shadowOffsetY=this.$shadowOffsetY),this.bodyChanged=!1,i&&i._1R&&(e=i.validate()||e,i.$x=0,i.$y=0,i.$invalidateRotate&&rn.call(i),t=!0);for(var n=0,o=this._hE.length;n<o;n++){var r,s=this._hE[n];s!=i&&(((r=s._1R&&s.validate())||e)&&s._jS&&sn(s,i),!t&&r&&(t=!0))}return t},measure:function(){var t,i;this._l2.clear();for(var e=0,n=this._hE.length;e<n;e++)(t=this._hE[e])._jS&&((i=t._hG).width<=0||i.height<=0||this._l2.addRect(t.$x+i.x,t.$y+i.y,i.width,i.height))},_l1:null,_o4S:function(t){return this._l1?t.showOnTop?this._l1.add(t):this._l1.remove(t):t.showOnTop?(this._l1=new ot,this._l1.add(t)):void 0},draw:function(t,i,e,n){for(var o,r=0,s=this._hE.length;r<s;r++)(o=this._hE[r])._jS&&!o.showOnTop&&o._l9(t,i,e,this)},_o3D:function(t,i){if(!this._jS||!this._l1||!this._l1.length)return!1;var e;t.save(),t.translate(this.$x,this.$y),this.$rotate&&t.rotate(this.$rotate),this.$layoutByAnchorPoint&&this._o4W&&t.translate(-this._o4W.x,-this._o4W.y),this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur*i,t.shadowOffsetX=this.shadowOffsetX*i,t.shadowOffsetY=this.shadowOffsetY*i),t.beginPath();for(var n=0,o=this._hE.length;n<o;n++)(e=this._hE[n])._jS&&e.showOnTop&&e._l9(t,i,this.selected,this);t.restore()},doHitTest:function(t,i,e){if(e){if(!this._l2.intersectsRect(t-e,i-e,2*e,2*e))return!1}else if(!this._l2.intersectsPoint(t,i))return!1;return this.hitTestChildren(t,i,e)},hitTestChildren:function(t,i,e){for(var n,o=this._hE.length-1;0<=o;o--)if((n=this._hE[o])._jS&&n.hitTest(t,i,e))return n;return!1},destroy:function(){this._jDed=!0;for(var t=this._hE.length-1;0<=t;t--)this._hE[t].destroy()}},t(Co,Eo),q(Co.prototype,{renderColorBlendMode:{get:function(){return this.$renderColorBlendMode},set:function(t){this.$renderColorBlendMode=t,this._1R=!0,this.body&&(this.body.renderColorBlendMode=this.$renderColorBlendMode)}},renderColor:{get:function(){return this.$renderColor},set:function(t){this.$renderColor=t,this._1R=!0,this.body&&(this.body.renderColor=this.$renderColor)}},bodyBounds:{get:function(){var t,i;return this.$invalidateBounds&&(this.$invalidateBounds=!1,i=(t=this.body)&&t._jS&&!this._$w()?t._hG.clone():this._8Y.clone(),this.rotate&&(i.original=i.clone(),i.rotate=this.rotate,i.tx=this.x,i.ty=this.y,Di(i,this.rotate,i)),i.x+=this.$x,i.y+=this.$y,this._dH=i),this._dH}},bounds:{get:function(){return new gt((this.$x||0)+this.uiBounds.x,(this.$y||0)+this.uiBounds.y,this.uiBounds.width,this.uiBounds.height)}},body:{get:function(){return this._o4ody},set:function(t){t&&this._o4ody!=t&&(this._o4ody=t,this.bodyChanged=!0,this.invalidateSize())}}}),nt.UI_BOUNDS_GROW=1;var xo=function(t){_(this,xo,arguments)};function Po(t,i,e,n,o){var r=t.measureText(i).width;if(o=o||t.measureText(n).width,r<=e||r<=o)return i;if(e<=o)return n;e-=o;var s=Math.round(e/(r/i.length))||1;return i.substring(0,function(t,i,e,n){var o;n<1&&(n=1),o=n<i.length?i.substring(0,n):(n=i.length,i);var r=t.measureText(o).width;if(r<e){for(;n<i.length;){if(e<=(r+=t.measureText(i[n]).width))return n;n++}return n}if(r==e)return n;for(n--;1<n;){if((r-=t.measureText(i[n]).width)<=e)return n;n--}return n}(t,i,e,s))+n}xo.prototype={strokeStyle:"#000",lineWidth:0,fillColor:null,fillGradient:null,_l3:1,_l5:1,outline:0,onDataChanged:function(t,i){v(this,xo,"onDataChanged",arguments),this._m5&&this._8Q&&this._m5._7B(this._8Q,this),t&&this._dA(t)},_dA:function(t){this._m5=Te(t),this._m5.validate(),this._m5._mY!=de&&!this._m5._7A()||(this._8Q||(this._8Q=function(t){this.invalidateData(),this._l7&&this._l7.graph&&(this._l7.invalidateSize(),this._l7.graph.invalidate())}),this._m5._o4N(this._8Q,this))},_m5:null,initialize:function(){this._dA(this.$data)},_67:function(){return this._m5&&this._m5.draw},_o3W:function(t){if(!t||t.width<=0||t.height<=0||!this.$size||!(this.size instanceof Object))return this._l3=1,void(this._l5=1);var i=this.size.width,e=this.size.height;if(i!==S&&null!==i||(i=-1),e!==S&&null!==e||(e=-1),i<0&&e<0)return this._l3=1,void(this._l5=1);var n,o,r=t.width,s=t.height;0<=i&&(n=i/r),0<=e&&(o=e/s),i<0?n=o:e<0&&(o=n),this._l3=n,this._l5=o},validateSize:function(){var t;this.$invalidateScale&&(this.$invalidateScale=!1,t=this._originalBounds,this._l3,this._l5,this._o3W(t),this.setMeasuredBounds(t.width*this._l3,t.height*this._l5,t.x*this._l3,t.y*this._l5))},measure:function(){var t=this._m5.getBounds(this.lineWidth+this.outline);if(t)return this.$invalidateScale=!0,void(this._originalBounds=t.clone());this._l2.set(0,0,0,0)},onBoundsChanged:function(){this.$invalidateFillGradient=!0},_1Y:function(){this.$invalidateFillGradient=!1,this.fillGradient?this._fillGradient=Se.prototype.generatorGradient.call(this.$fillGradient,this._8Y):this._fillGradient=null},_lV:function(t){var i,e;if("flip"==this.$adjustType)e=-(i=1);else{if("mirror"!=this.$adjustType)return;i=-1,e=1}var n=this._l2.cx,o=this._l2.cy;t.translate(n,o),t.scale(i,e),t.translate(-n,-o)},draw:function(t,i,e,n){if(this._l3&&this._l5){if(this.$invalidateFillGradient&&this._1Y(),t.save(),this.$adjustType&&this._lV(t),this._m5._mY==Ee)return t.scale(this._l3,this._l5),this._m5._mX.draw(t,i,this,e,n||this),void t.restore();e&&this._92(t,i,n),this._m5.draw(t,i,this,this._l3,this._l5),t.restore()}},doHitTest:function(t,i,e){if(this._m5.hitTest){"flip"==this.$adjustType?i=2*this._l2.cy-i:"mirror"==this.$adjustType&&(t=2*this._l2.cx-t),t/=this._l3,i/=this._l5;var n=(this._l3+this._l5)/2;return 1<n&&(e/=n,e|=0),this._m5._mX instanceof Ye?this._m5._mX.hitTest(t,i,e,!0,this.$lineWidth,this.$fillColor||this.$fillGradient):this._m5.hitTest(t,i,e)}return!0},$invalidateScale:!0,$invalidateFillGradient:!0},t(xo,Eo),go(xo.prototype,{adjustType:{},fillColor:{},size:{validateFlags:["Size","Scale"]},fillGradient:{validateFlags:["FillGradient"]}}),q(xo.prototype,{originalBounds:{get:function(){return this._originalBounds}}}),nt.ALIGN_POSITION=pt.CENTER_MIDDLE,nt.TEXT_OVERFLOW_ELLIPSIS=String.fromCharCode(8230);var No=function(t){_(this,No,arguments),this.color=nt.LABEL_COLOR};No.prototype={color:nt.LABEL_COLOR,showPointer:!0,fontSize:null,fontFamily:null,fontStyle:null,_iK:null,alignPosition:null,_mN:null,measure:function(){var t,e,n,o,r,s;this.$data=""+this.$data,this.font,this._mN=this.$data.split("\n"),this.maxWidth&&((t=Mi()).font=this.$font||ki(this.$fontFamily,this.$fontSize,this.$fontStyle),e=t,n=this._mN,o=this.maxWidth,r=nt.TEXT_OVERFLOW_ELLIPSIS,s=e.measureText(r).width,n.forEach(function(t,i){n[i]=Po(e,t,o,r,s)}));var i=function t(i,e,n,o,r,s){if(!i||!i.length)return{width:0,height:0};if(e=e||nt.FONT_SIZE,Bi&&e<Gi){var h=e/Gi,a=t(i,Gi,n,o,r);return a.width*=h,a.height*=h,a}var l=Mi();l.font=s||ki(n,e,o);for(var _=e*(r=r||nt.LINE_HEIGHT),u=0,c=0,d=0,f=i.length;d<f;d++){var E=i[d],u=Math.max(l.measureText(E).width,u);c+=_}return{width:u,height:c}}(this._mN,this.$fontSize,this.$fontFamily,this.$fontStyle,nt.LINE_HEIGHT,this.$font);if(this._iK=i,this.$size){var h=this.$size.width||0,a=this.$size.height||0;return this.setMeasuredBounds(h>i.width?h:i.width,a>i.height?a:i.height)}return this.setMeasuredBounds(i.width,i.height)},doHitTest:function(t,i,e){return!!this.$data&&Xe(t,i,e,this)},draw:function(t,i,e,n){e&&this._92(t,i,n);var o,r=vo(this);r&&(o=re(r),st<o&&o<3*st&&(t.translate(this._l2.width/2,this._l2.height/2),t.rotate(Math.PI),t.translate(-this._l2.width/2,-this._l2.height/2)));var s=this.alignPosition||nt.ALIGN_POSITION,h=s.horizontalPosition,a=s.verticalPosition,l=0;"c"==h?(h="center",l+=this._l2.width/2):h==mt?(h="right",l+=this._l2.width):h="left";var _=0;"m"==a?_=(this._l2.height-this._iK.height)/2:a==Ot&&(_=this._l2.height-this._iK.height),t.fillStyle=this.color,function(t,i,e,n,o,r,s,h,a,l){var _;t.save(),t.translate(e,n),Bi&&s<Gi&&(_=s/Gi,t.scale(_,_),s=Gi,l=null),a=a||nt.LINE_HEIGHT,a*=s=s||nt.FONT_SIZE,t.font=l||ki(r,s,h),t.textAlign=o,t.textBaseline="middle";for(var u=a/2,c=0,d=i.length;c<d;c++){var f=i[c];t.fillText(f,0,u),u+=a}t.restore()}(t,this._mN,l,_,h,this.$fontFamily,this.$fontSize,this.$fontStyle,nt.LINE_HEIGHT,this.$font)},_67:function(){return null!=this.$data||this.$size},$invalidateFont:!0},t(No,Eo),go(No.prototype,{maxWidth:{validateFlags:["Data"]},size:{validateFlags:["Data"]},fontStyle:{validateFlags:["Data","Font"]},fontSize:{validateFlags:["Data","Font"]},fontFamily:{validateFlags:["Data","Font"]}}),q(No.prototype,{font:{get:function(){return this.$invalidateFont&&(this.$invalidateFont=!1,this.$font=(this.$fontStyle||nt.FONT_STYLE)+" "+(this.$fontSize||nt.FONT_SIZE)+"px "+(this.$fontFamily||nt.FONT_FAMILY)),this.$font}}});var Mo=function(t){t=t||new Ye,this.pathBounds=new gt,_(this,Mo,[t])};function Bo(t,i){_(this,Bo,arguments)}function Go(t,i){_(this,Go,arguments)}Mo.prototype={layoutByPath:!0,layoutByAnchorPoint:!1,measure:function(){this.$invalidateFromArrow=!0,this.$invalidateToArrow=!0,this.$data.getBounds(this.$lineWidth+this.$outline,this.pathBounds),this.setMeasuredBounds(this.pathBounds)},validateSize:function(){var t,i;(this.$invalidateFromArrow||this.$invalidateToArrow)&&(t=this.pathBounds.clone(),this.$invalidateFromArrow&&(this.$invalidateFromArrow=!1,(i=this.validateFromArrow())&&t.add(i)),this.$invalidateToArrow&&(this.$invalidateToArrow=!1,(i=this.validateToArrow())&&t.add(i)),this.setMeasuredBounds(t))},validateFromArrow:function(){if(this.$data._lJ&&this.$fromArrow){var t=this.$data,i=0,e=0,n=this.$fromArrowOffset;n&&(isNaN(n)&&(n.x||n.y)?(i+=n.x||0,e+=n.y||0):i+=n||0,0<i&&i<1&&(i*=t._lJ)),this.fromArrowLocation=t.getLocation(i,e),this.fromArrowLocation.rotate=Math.PI+this.fromArrowLocation.rotate||0,this.$fromArrowShape=Vo(this.$fromArrow,this.$fromArrowSize);var o=this.$fromArrowShape.getBounds(this.fromArrowStyles.lineWidth+this.fromArrowStyles.outline);return this.fromArrowFillGradient instanceof Si.Gradient?this.fromArrowStyles._fillGradient=Se.prototype.generatorGradient.call(this.fromArrowFillGradient,o):this.fromArrowStyles&&(this.fromArrowStyles._fillGradient=null),o.offset(this.fromArrowLocation.x,this.fromArrowLocation.y),Ci(o,this.fromArrowLocation.rotate,o,this.fromArrowLocation.x,this.fromArrowLocation.y),o}this.$fromArrowShape=null},validateToArrow:function(){if(this.$data._lJ&&this.$toArrow){var t=this.$data,i=0,e=0,n=this.$toArrowOffset;n&&(isNaN(n)&&(n.x||n.y)?(i+=n.x||0,e+=n.y||0):i+=n||0),i<0&&-1<i&&(i*=t._lJ),i+=t._lJ,this.toArrowLocation=t.getLocation(i,e),this.$toArrowShape=Vo(this.$toArrow,this.$toArrowSize);var o=this.$toArrowShape.getBounds(this.toArrowStyles.lineWidth+this.toArrowStyles.outline);return this.toArrowFillGradient instanceof Si.Gradient?this.toArrowStyles._fillGradient=Se.prototype.generatorGradient.call(this.toArrowFillGradient,o):this.toArrowStyles&&(this.toArrowStyles._fillGradient=null),o.offset(this.toArrowLocation.x,this.toArrowLocation.y),Ci(o,this.toArrowLocation.rotate,o,this.toArrowLocation.x,this.toArrowLocation.y),o}this.$toArrowShape=null},_2M:function(t){var i=t?"from":"to",e=this[i+"ArrowStroke"];e===S&&(e=this.$lineWidth);var n=this[i+"ArrowStrokeStyle"];n===S&&(n=this.strokeStyle);var o=this[i+"ArrowStyles"];o||(this[i+"ArrowStyles"]=o={}),o.lineWidth=e,o.strokeStyle=n,o.lineDash=this[i+"ArrowLineDash"],o.lineDashOffset=this[i+"ArrowLineDashOffset"],o.fillColor=this[i+"ArrowFillColor"],o.fillGradient=this[i+"ArrowFillGradient"],o.lineCap=this[i+"ArrowLineCap"],o.lineJoin=this[i+"ArrowLineJoin"],o.outline=this[i+"ArrowOutline"]||0,o.outlineStyle=this[i+"ArrowOutlineStyle"]},doValidate:function(){return this.$fromArrow&&this._2M(!0),this.$toArrow&&this._2M(!1),v(this,Mo,"doValidate")},drawArrow:function(t,i,e,n){var o,r,s,h;this.$fromArrow&&this.$fromArrowShape&&(t.save(),r=(o=this.fromArrowLocation).x,s=o.y,h=o.rotate,t.translate(r,s),h&&t.rotate(h),this.$fromArrowShape.draw(t,i,this.fromArrowStyles,e,n),t.restore()),this.$toArrow&&this.$toArrowShape&&(t.save(),r=(o=this.toArrowLocation).x,s=o.y,h=o.rotate,t.translate(r,s),h&&t.rotate(h),this.$toArrowShape.draw(t,i,this.toArrowStyles,e,n),t.restore())},outlineStyle:null,outline:0,onBoundsChanged:function(){this.$invalidateFillGradient=!0},_1Y:function(){this.$invalidateFillGradient=!1,this.$fillGradient?this._fillGradient=Se.prototype.generatorGradient.call(this.$fillGradient,this._8Y):this._fillGradient=null},draw:function(t,i,e,n){this.$invalidateFillGradient&&this._1Y(),this.$data.draw(t,i,this,e,n),this.drawArrow(t,i,e,n)},doHitTest:function(t,i,e){if(this.$data.hitTest(t,i,e,!0,this.$lineWidth+this.$outline,this.$fillColor||this.$fillGradient))return!0;if(this.$toArrow&&this.$toArrowShape){var n=t-this.toArrowLocation.x,o=i-this.toArrowLocation.y;this.toArrowLocation.rotate&&(n=(s=wi(n,o,-this.toArrowLocation.rotate)).x,o=s.y);var r=this.toArrowStyles.fillColor||this.toArrowStyles.fillGradient;if(this.$toArrowShape.hitTest(n,o,e,!0,this.toArrowStyles.lineWidth,r))return!0}if(this.$fromArrow&&this.$fromArrowShape){var s,n=t-this.fromArrowLocation.x,o=i-this.fromArrowLocation.y;this.fromArrowLocation.rotate&&(n=(s=wi(n,o,-this.fromArrowLocation.rotate)).x,o=s.y);r=this.fromArrowStyles.fillColor||this.fromArrowStyles.fillGradient;if(this.$fromArrowShape.hitTest(n,o,e,!0,this.fromArrowStyles.lineWidth,r))return!0}return!1},$fromArrowOutline:0,$toArrowOutline:0,$invalidateFillGradient:!0,$invalidateFromArrow:!0,$invalidateToArrow:!0},t(Mo,Eo),go(Mo.prototype,{strokeStyle:{validateFlags:["FromArrow","ToArrow"]},fillColor:{},fillGradient:{validateFlags:["FillGradient"]},fromArrowOffset:{validateFlags:["FromArrow","Size"]},fromArrowSize:{validateFlags:["FromArrow","Size"]},fromArrow:{validateFlags:["FromArrow","Size"]},fromArrowOutline:{validateFlags:["FromArrow","Size"]},fromArrowStroke:{validateFlags:["FromArrow","Size"]},fromArrowStrokeStyle:{validateFlags:["FromArrow"]},toArrowOffset:{validateFlags:["ToArrow","Size"]},toArrowSize:{validateFlags:["ToArrow","Size"]},toArrow:{validateFlags:["ToArrow","Size"]},toArrowOutline:{validateFlags:["ToArrow","Size"]},toArrowStroke:{validateFlags:["ToArrow","Size"]},toArrowStrokeStyle:{validateFlags:["ToArrow"]},outline:{value:0,validateFlags:["Data"]}}),q(Mo.prototype,{length:{get:function(){return this.data.length}}}),Bo.prototype={shape:null,path:null,initialize:function(){v(this,Bo,"initialize"),this.path=new Ye,this.path._fG=!1,this.shape=new Mo(this.path),this.addChild(this.shape,0),this._o4ody=this.shape,wo.initBindingProperties(this)},_1P:!0,_65:null,_$w:function(){return!1},_4M:function(){return!1},validatePoints:function(){this.shape.invalidateData();var t=this.$data,i=this.path;i.clear();var e=t.fromAgent,n=t.toAgent;e&&n&&function(t,i,e,n,o){var r=n==o,s=t.graph.getUI(n),h=r?s:t.graph.getUI(o);if(!s||!h)return;var a=i.edgeType,l=t.getEndPointBounds(s),_=r?l:t.getEndPointBounds(h),u=i.hasPathSegments();if(r&&!u)return t.drawLoopedEdge(t.path,s,a,l);var c,d,f,E,g=function(t,i,e){var n=i.getPortPoint(t.getStyle(mo.EDGE_FROM_PORT),e),o=t.getStyle(mo.EDGE_FROM_OFFSET);o&&(n.x+=o.x||0,n.y+=o.y||0);return n}(t,s,l),v=function(t,i,e){var n=i.getPortPoint(t.getStyle(mo.EDGE_TO_PORT),e),o=t.getStyle(mo.EDGE_TO_OFFSET);o&&(n.x+=o.x||0,n.y+=o.y||0);return n}(t,h,_);if(!r&&!a&&!u){var p=n.busLayout,y=o.busLayout;if(p!=y){var m=i.angle;E=p?(c=s,d=l,f=h,_):(c=h,d=_,f=s,l);var T=function(t,i,e,n,o,r){var s=o.cx,h=o.cy,a=Math.cos(r),l=Math.sin(r),_=jo(i,t,{x:s,y:h},-a,-l);{var u,c,d,f,E,g,v,p;_||(u=s<t.x,c=s>t.right,d=h<t.y,f=h>t.bottom,E=t.cx,g=t.cy,v=u||c,p=d||f,r=Math.atan2(h-g,s-E),v||p||(r+=Math.PI),a=Math.cos(r),l=Math.sin(r),_=jo(i,t,{x:s,y:h},-a,-l)||{x:E,y:g})}var y=jo(n,o,{x:_.x,y:_.y},-_.perX||a,-_.perY||l,!1)||{x:s,y:h};if(e)return[_,y];return[y,_]}(d,c,p,f,E,m);if(T&&2==T.length){var O=T[0],A=T[1];return e.moveTo(O.x,O.y),A.x==O.x&&A.y==O.y&&(A.y+=.01),e.lineTo(A.x,A.y),e._79=!0}}}t._3R(i,e,s,h,a,l,_,g,v),(!r&&!1!==e._hS._linkTerminalPoint||u)&&function(t,i,e,n,o,r,s,h){var a=t.fromAtEdge,l=t.toAtEdge;if(!a&&!l)return Ko(i._hS,s,h);var _,u=i._hS;{var c,d,f,E,g,v,p,y;u.length?(a&&(c=u[0].firstPoint,Xo(e,o,c,s,S,S)),l&&(d=u[u.length-1],f=d.lastPoint,E=d.points.length,g=d.invalidTerminal||f.x===S||f.y===S,4<=E&&(g||r.contains(f.x,f.y))&&(g||(h=f),_=!0,f={x:d.points[E-4],y:d.points[E-3]},r.contains(f.x,f.y)&&(h=f,6<=E?(f={x:d.points[E-6],y:d.points[E-5]},d.points=d.points.slice(0,4),d.type=Me):1==u.length?(f={x:s.x,y:s.y},d.points=d.points.slice(0,2),d.type=Ne):(d=u[u.length-2],f=d.lastPoint))),Xo(n,r,f,h,S,S),_&&(E=d.points.length,d.points[E-2]=h.x,d.points[E-1]=h.y,h=null))):(v=Math.atan2(h.y-s.y,h.x-s.x),p=Math.cos(v),y=Math.sin(v),a&&Xo(e,o,h,s,p,y),l&&Xo(n,r,s,h,-p,-y))}Ko(i._hS,s,h)}(t,e,s,h,l,_,g,v);delete e._hS._linkTerminalPoint,e._79=!0}(this,t,i,e,n)},getEndPointBounds:function(t){return t.getLinkableBounds()},_3R:function(t,i,e,n,o,r,s,h,a){t.hasPathSegments()?i.segments=t.pathSegments.toDatas():e!=n?this.drawEdge(i,e,n,o,r,s,h,a):this.drawLoopedEdge(i,e,o,r,h,a)},drawLoopedEdge:function(t,i,e,n,o,r){!function(t,i,e){var n=t.getStyle(mo.EDGE_LOOPED_EXTAND),o=t._2B(),r=n+.2*o,s=i.x+i.width-r,h=i.y,a=i.x+i.width,l=i.y+r;n+=o;var _=i.x+i.width,u=i.y,c={x:s,y:h},d={x:_+.707*n,y:u+-.707*n},f={x:a,y:l},E=c.x,g=d.x,v=f.x,p=c.y,y=d.y,m=f.y,T=((m-p)*(y*y-p*p+g*g-E*E)+(y-p)*(p*p-m*m+E*E-v*v))/(2*(g-E)*(m-p)-2*(v-E)*(y-p)),O=((v-E)*(g*g-E*E+y*y-p*p)+(g-E)*(E*E-v*v+p*p-m*m))/(2*(y-p)*(v-E)-2*(m-p)*(g-E)),r=Math.sqrt((E-T)*(E-T)+(p-O)*(p-O)),A=Math.atan2(c.y-O,c.x-T),S=Math.atan2(f.y-O,f.x-T)-A;S<0&&(S+=2*Math.PI);(function(t,i,e,n,o,r,s){var h,a,l,_,u,c,d,f,E,g;Math.abs(n)>2*Math.PI&&(n=2*Math.PI);if(_=Math.ceil(Math.abs(n)/(Math.PI/4)),h=n/_,a=e,0<_){u=t+Math.cos(a)*o,c=i+Math.sin(a)*r,moveTo?s.moveTo(u,c):s.lineTo(u,c);for(var v=0;v<_;v++)l=(a+=h)-h/2,d=t+Math.cos(a)*o,f=i+Math.sin(a)*r,E=t+Math.cos(l)*(o/Math.cos(h/2)),g=i+Math.sin(l)*(r/Math.cos(h/2)),s.quadTo(E,g,d,f)}})(T,O,A,S,r,r,e)}(this,n,t)},drawEdge:function(t,i,e,n,o,r,s,h){if(n==Li.EDGE_TYPE_ZIGZAG){var a=(s.x+h.x)/2,l=(s.y+h.y)/2,_=s.x-h.x,u=s.y-h.y,c=Math.sqrt(_*_+u*u),d=Math.atan2(u,_);d+=Math.PI/6,30<(c*=.04)&&(c=30);var f=Math.cos(d)*c,E=Math.sin(d)*c;return t.lineTo(a-E,l+f),void t.lineTo(a+E,l-f)}var g=function(t,i,e,n,o,r){if(i.hasPathSegments())return i._o3I;var s=i.edgeType;if(Ho(s)){var h=function(t,i,e,n,o,r){var s=function(t,i,e){if(null!=t){if(t==Li.EDGE_TYPE_ELBOW_HORIZONTAL||t==Li.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||t==Li.EDGE_TYPE_HORIZONTAL_VERTICAL||t==Li.EDGE_TYPE_EXTEND_LEFT||t==Li.EDGE_TYPE_EXTEND_RIGHT)return!0;if(t==Li.EDGE_TYPE_ELBOW_VERTICAL||t==Li.EDGE_TYPE_ORTHOGONAL_VERTICAL||t==Li.EDGE_TYPE_VERTICAL_HORIZONTAL||t==Li.EDGE_TYPE_EXTEND_TOP||t==Li.EDGE_TYPE_EXTEND_BOTTOM)return!1}var n=function(t,i){return Math.max(t.x+(t.width||0),i.x+(i.width||0))-Math.min(t.x,i.x)-(t.width||0)-(i.width||0)}(i,e),o=function(t,i){return Math.max(t.y+(t.height||0),i.y+(i.height||0))-Math.min(t.y,i.y)-(t.height||0)-(i.height||0)}(i,e);return o<=n}(t,i,e),h=[];!function(t){return t&&(t==Li.EDGE_TYPE_ELBOW||t==Li.EDGE_TYPE_ELBOW_HORIZONTAL||t==Li.EDGE_TYPE_ELBOW_VERTICAL)}(t)?function(t,i,e,n,o,r,s,h){var a=r.getStyle(mo.EDGE_CONTROL_POINT),l=null==a;{var _;null!=a?(_=(new gt).union(i).union(e)).intersects(a)||(o=function(t,i,e,n,o,r){if(i<e&&n-t<e-i&&t-r<e-i||o<i&&n-t<i-o&&t-r<i-o)return!1;return!0}(a.x,a.y,_.y,_.x,_.bottom,_.right)):a=function(t,i,e,n,o,r,s){if(t==Li.EDGE_TYPE_HORIZONTAL_VERTICAL)return{x:s.x,y:r.y};if(t==Li.EDGE_TYPE_VERTICAL_HORIZONTAL)return{x:r.x,y:s.y};var h;if(function(t){return null!=t&&(t==Li.EDGE_TYPE_EXTEND_TOP||t==Li.EDGE_TYPE_EXTEND_LEFT||t==Li.EDGE_TYPE_EXTEND_BOTTOM||t==Li.EDGE_TYPE_EXTEND_RIGHT)}(t)){var a=Math.min(e.y,n.y),l=Math.min(e.x,n.x),_=Math.max(e.bottom,n.bottom),u=Math.max(e.right,n.right);if(h=o.getStyle(mo.EDGE_EXTEND),t==Li.EDGE_TYPE_EXTEND_TOP)return new ht((l+u)/2,a-h);if(t==Li.EDGE_TYPE_EXTEND_LEFT)return new ht(l-h,(a+_)/2);if(t==Li.EDGE_TYPE_EXTEND_BOTTOM)return new ht((l+u)/2,_+h);if(t==Li.EDGE_TYPE_EXTEND_RIGHT)return new ht(u+h,(a+_)/2)}var c=function(t){return t.getStyle(mo.EDGE_SPLIT_BY_PERCENT)}(o);if((h=c?function(t,i,e,n){return function(t,i,e,n){return i?$o(t,e.x,e.right,n.x,n.right):$o(t,e.y,e.bottom,n.y,n.bottom)}(n,t,i,e)*n}(i,e,n,o.getStyle(mo.EDGE_SPLIT_PERCENT)):o.getStyle(mo.EDGE_SPLIT_VALUE))==Number.NEGATIVE_INFINITY||h==Number.POSITIVE_INFINITY)return new ht(n.x+n.width/2,n.y+n.height/2);if(0==h)return new ht(e.x+e.width/2,e.y+e.height/2);if(i){var d=e.x+e.right<n.x+n.right;return new ht(Yo(d,h,e.x,e.width),e.y+e.height/2)}var f=e.y+e.bottom<n.y+n.bottom;return new ht(e.x+e.width/2,Yo(f,h,e.y,e.height))}(t,o,i,e,r,s,h)}(o?function(t,i,e,n,o,r,s){var h=Math.max(t.x,i.x),a=Math.min(t.x+t.width,i.x+i.width),l=null!=e?e.x:a+(h-a)/2,_=r?r.y:t.y+t.height/2,u=s?s.y:i.y+i.height/2;0==o&&null!=e&&(e.y>=t.y&&e.y<=t.y+t.height&&(_=e.y),e.y>=i.y&&e.y<=i.y+i.height&&(u=e.y));Uo(i,l,_)||Uo(t,l,_)||n.push(new ht(l,_));Uo(i,l,u)||Uo(t,l,u)||n.push(new ht(l,u));{var c,d;0==n.length&&(null!=e?Uo(i,l,e.y)||Uo(t,l,e.y)||n.push(new ht(l,e.y)):(c=Math.max(t.y,i.y),d=Math.min(t.y+t.height,i.y+i.height),n.push(new ht(l,c+(d-c)/2))))}}:function(t,i,e,n,o,r,s){var h=Math.max(t.y,i.y),a=Math.min(t.y+t.height,i.y+i.height),l=null!=e?e.y:a+(h-a)/2,_=r?r.x:t.x+t.width/2,u=s?s.x:i.x+i.width/2;0==o&&null!=e&&(e.x>=t.x&&e.x<=t.x+t.width&&(_=e.x),e.x>=i.x&&e.x<=i.x+i.width&&(u=e.x));Uo(i,_,l)||Uo(t,_,l)||n.push(new ht(_,l));Uo(i,u,l)||Uo(t,u,l)||n.push(new ht(u,l));{var c,d;0==n.length&&(null!=e?Uo(i,e.x,l)||Uo(t,e.x,l)||n.push(new ht(e.x,l)):(c=Math.max(t.x,i.x),d=Math.min(t.x+t.width,i.x+i.width),n.push(new ht(c+(d-c)/2,l))))}})(i,e,a,n,l,s,h)}(t,i,e,h,s,n,o,r):function(t,i,e,n,o,r,s){(t?function(t,i,e,n,o,r){var s=i.x+i.width<t.x,h=t.x+t.width<i.x,a=s?t.x:t.x+t.width,l=o.y,_=h?i.x:i.x+i.width,u=r.y,c=n,d=s?-c:c,f=new ht(a+d,l),E=new ht(_+(d=h?-c:c),u);{var g,v;s==h?(g=s?Math.min(a,_)-n:Math.max(a,_)+n,e.push(new ht(g,l)),e.push(new ht(g,u))):(f.x<E.x==s?(v=l+(u-l)/2,e.push(f),e.push(new ht(f.x,v)),e.push(new ht(E.x,v))):e.push(f),e.push(E))}}:function(t,i,e,n,o,r){var s=i.y+i.height<t.y,h=t.y+t.height<i.y,a=o.x,l=s?t.y:t.y+t.height,_=r.x,u=h?i.y:i.y+i.height,c=n,d=s?-c:c,f=new ht(a,l+d),E=new ht(_,u+(d=h?-c:c));{var g,v;s==h?(g=s?Math.min(l,u)-n:Math.max(l,u)+n,e.push(new ht(a,g)),e.push(new ht(_,g))):(f.y<E.y==s?(v=a+(_-a)/2,e.push(f),e.push(new ht(v,f.y)),e.push(new ht(v,E.y))):e.push(f),e.push(E))}})(i,e,n,o,r,s)}(s,i,e,h,n.getStyle(mo.EDGE_EXTEND),o,r);return h}(s,e,n,t,o,r);if(!h||!h.length)return null;A(h,o,0),h.push(r),s!=Li.EDGE_TYPE_ELBOW&&function(t,i){var e=t.length;if(e<3)return;var n=i.getStyle(mo.EDGE_CORNER);if(n==Li.EDGE_CORNER_NONE)return;var o,r,s=i.getStyle(mo.EDGE_CORNER_RADIUS),h=0,a=0;s&&(U(s)?h=a=s:(h=s.x||0,a=s.y||0));for(var l,_,u=t[0],c=t[1],d=2;d<e;d++){var f=t[d],E=c.x-u.x,g=c.y-u.y,v=f.x-c.x,p=f.y-c.y,y=!g||-ie<g&&g<ie,m=!v||-ie<v&&v<ie,T=!p||-ie<p&&p<ie,O=y;((!E||-ie<E&&E<ie)&&T||y&&m)&&(_=O?(o=Math.min(2==d?Math.abs(E):Math.abs(E)/2,h),r=Math.min(d==e-1?Math.abs(p):Math.abs(p)/2,a),l=new ht(c.x-(0<E?o:-o),c.y),new ht(c.x,c.y+(0<p?r:-r))):(o=Math.min(d==e-1?Math.abs(v):Math.abs(v)/2,h),r=Math.min(2==d?Math.abs(g):Math.abs(g)/2,a),l=new ht(c.x,c.y-(0<g?r:-r)),new ht(c.x+(0<v?o:-o),c.y)),w(t,c),d--,e--,l.x==u.x&&l.y==u.y||(A(t,l,d),d++,e++),n==Li.EDGE_CORNER_BEVEL?(A(t,_,d),d++,e++):n==Li.EDGE_CORNER_ROUND&&(A(t,[c,_],d),d++,e++)),u=c,c=f}0}(h,t);for(var a=[],l=h.length,_=1;_<l-1;_++){var u=h[_];V(u)?a.push(new Fe(Me,[u[0].x,u[0].y,u[1].x,u[1].y])):a.push(new Fe(Ne,[u.x,u.y]))}return a}if(i.$bundleEnabled){var c=t._2B();if(!c)return;return function(t,i,e,n,o,r){i=ut(n,i.x,i.y,e.x,e.y),e=ut(o,e.x,e.y,i.x,i.y);var s=Math.PI/2+Math.atan2(e.y-i.y,e.x-i.x),h=t*Math.cos(s),a=t*Math.sin(s);i.x+=h,i.y+=a,e.x+=h,e.y+=a;var l=e.x-i.x,_=e.y-i.y;if(r==Li.EDGE_BUNDLE_TYPE_PARALLEL){var u=[new Fe(Pe,[i.x,i.y]),new Fe(Ne,[e.x,e.y])];return u._linkTerminalPoint=!1,u}if(r!=Li.EDGE_BUNDLE_TYPE_ELBOW)return[new Fe(Be,[i.x+.25*l,i.y+.25*_,i.x+.75*l,i.y+.75*_,S,S])];var c=Math.sqrt(l*l+_*_);10<c&&(s=Math.atan2(e.y-i.y,e.x-i.x),l=5*Math.cos(s),_=5*Math.sin(s),i.x+=l,i.y+=_,e.x-=l,e.y-=_);return[new Fe(Ne,[i.x,i.y]),new Fe(Ne,[e.x,e.y])]}(c,o,r,e,n,t.getStyle(mo.EDGE_BUNDLE_TYPE))}}(this,this.data,o,r,s,h);g&&(t._hS=g)},_2B:function(){if(!this.data.isBundleEnabled())return null;var t=this.data.getEdgeBundle(!0);if(!t||!t.canBind(this.graph)||!t._iR)return null;var i=t.getYOffset(this);return t.isPositiveOrder(this.$data)||(i=-i),i},checkBundleLabel:function(){var t=this.getBundleLabel();t?(this.bundleLabel||this.createBundleLabel(),this.bundleLabel._jS=!0,this.bundleLabel.data=t):this.bundleLabel&&(this.bundleLabel._jS=!1,this.bundleLabel.data=null)},createBundleLabel:function(){var t=new No;t.editable=!1,this.bundleLabel=t,this.addChild(this.bundleLabel),Io.initBindingProperties(this)},getBundleLabel:function(){return this.graph.getBundleLabel(this.data)},doValidate:function(){return this._1P&&(this._1P=!1,this.validatePoints()),this.checkBundleLabel(),v(this,Bo,"doValidate")},_4N:function(){this._1P=!0,this.invalidateSize()},_10:function(t,i,e){var n=this._d8.onBindingPropertyChange(this,t,i,e),n=To.onBindingPropertyChange(this,t,i,e)||n;return this.bundleLabel&&this.bundleLabel.$data&&(n=Io.onBindingPropertyChange(this,t,i,e)||n),wo.onBindingPropertyChange(this,t,i,e)||n}},t(Bo,Co),Bo.drawReferenceLine=function(t,i,e,n){var o,r,s,h,a,l,_,u,c,d,f,E;t.moveTo(i.x,i.y),n&&n!=Li.EDGE_TYPE_DEFAULT&&(n==Li.EDGE_TYPE_VERTICAL_HORIZONTAL?t.lineTo(i.x,e.y):n==Li.EDGE_TYPE_HORIZONTAL_VERTICAL?t.lineTo(e.x,i.y):0==n.indexOf(Li.EDGE_TYPE_ORTHOGONAL)?(o=n==Li.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||n!=Li.EDGE_TYPE_ORTHOGONAL_VERTICAL&&Math.abs(i.x-e.x)>Math.abs(i.y-e.y),a=(i.x+e.x)/2,l=(i.y+e.y)/2,o?(t.lineTo(a,i.y),t.lineTo(a,e.y)):(t.lineTo(i.x,l),t.lineTo(e.x,l))):0==n.indexOf(Li.EDGE_TYPE_ELBOW)?(r=ko[mo.EDGE_EXTEND]||0,(o=n==Li.EDGE_TYPE_ELBOW_HORIZONTAL||n!=Li.EDGE_TYPE_ELBOW_VERTICAL&&Math.abs(i.x-e.x)>Math.abs(i.y-e.y))?(t.lineTo(i.x+r,i.y),t.lineTo(e.x-r,e.y)):(t.lineTo(i.x,i.y+r),t.lineTo(e.x,e.y-r))):0==n.indexOf("extend.")?(r=ko[mo.EDGE_EXTEND]||0,n==Li.EDGE_TYPE_EXTEND_TOP?(s=Math.min(i.y,e.y)-r,t.lineTo(i.x,s),t.lineTo(e.x,s)):n==Li.EDGE_TYPE_EXTEND_BOTTOM?(s=Math.max(i.y,e.y)+r,t.lineTo(i.x,s),t.lineTo(e.x,s)):n==Li.EDGE_TYPE_EXTEND_LEFT?(h=Math.min(i.x,e.x)-r,t.lineTo(h,i.y),t.lineTo(h,e.y)):n==Li.EDGE_TYPE_EXTEND_RIGHT&&(h=Math.max(i.x,e.x)+r,t.lineTo(h,i.y),t.lineTo(h,e.y))):n==Li.EDGE_TYPE_ZIGZAG&&(a=(i.x+e.x)/2,l=(i.y+e.y)/2,_=i.x-e.x,u=i.y-e.y,c=Math.sqrt(_*_+u*u),d=Math.atan2(u,_),d+=Math.PI/6,30<(c*=.04)&&(c=30),f=Math.cos(d)*c,E=Math.sin(d)*c,t.lineTo(a-E,l+f),t.lineTo(a+E,l-f))),t.lineTo(e.x,e.y)},q(Bo.prototype,{length:{get:function(){return this.path?this.path.length:0}}}),Bo.prototype.addPoint=function(t,i,e){var n=He(this.path,t,i,this.data.addSegmentType,e);if(!n)return!1;var o,r,s=n.segments;2<s.length&&(o=this.data,(r=s[s.length-1]).type==Ne?o.pathSegments=s.splice(1,s.length-2):(n.atEnd&&(r.invalidTerminal=!0),o.pathSegments=s.splice(1,s.length-1)))},Go.prototype={_2X:null,image:null,initialize:function(){v(this,Go,"initialize"),this._o4X(),So.initBindingProperties(this)},_dA:function(){this.data.image?this.image&&(this.body=this.image):this.label&&(this.body=this.label)},_o4X:function(){this.image=new xo,this.addChild(this.image,0),this._dA()},doValidate:function(){this.body&&(this instanceof tr&&!this.$data.groupImage&&this._69()?this.body.$layoutByAnchorPoint=!1:(this.body.$layoutByAnchorPoint=null!=this._2X,this.body.anchorPosition=this._2X));var t=this.$data.$location,i=0,e=0;t&&(i=t.x,e=t.y);var n=this.$x!=i||this.$y!=e;return n&&(this.$invalidateBounds=!0),this.$x=i,this.$y=e,Co.prototype.doValidate.call(this)||n},_10:function(t,i,e){var n=this._d8.onBindingPropertyChange(this,t,i,e),n=To.onBindingPropertyChange(this,t,i,e)||n;return So.onBindingPropertyChange(this,t,i,e)||n},getLinkablePorts:function(){return this.data.linkablePorts},getLinkableBounds:function(){return this.bodyBounds},getDefaultPortPoint:function(t){return St(pt.CENTER_MIDDLE,t||this.getLinkableBounds())},getPortPoint:function(t,i){return t?((i=i||this.getLinkableBounds()).original?(e=St(t,i.original),i.rotate&&(e=Ii(e.x,e.y,i.rotate,i.rotateX||0,i.rotateY||0)),e.x+=i.tx||0,e.y+=i.ty||0):e=St(t,i),e.port=t,e):this.getDefaultPortPoint(i);var e},getPortPoints:function(){var t=this.getLinkablePorts();if(t&&Array.isArray(t)){var i=[],e=this.getLinkableBounds();return t.forEach(function(t){i.push(this.getPortPoint(t,e))}.bind(this)),i}}},t(Go,Co);var ko={};function Fo(t,i,e,n){return Math.max(i,n)-Math.min(t,e)-(i-t+n-e)}function $o(t,i,e,n,o){var r=Fo(i,e,n,o),s=i+e<n+o;if(0<r){if(1==t)return r+(o-n)/2;if(0<=t&&t<1)return r;if(t<0)return s?n-i:e-o}return s&&0<t||!s&&t<0?Math.abs(e-o):Math.abs(i-n)}function Yo(t,i,e,n){return t==0<i?e+n+Math.abs(i):e-Math.abs(i)}function Uo(t,i,e){return i>=t.x&&i<=t.right&&e>=t.y&&e<=t.bottom}function Ho(t){return t==Li.EDGE_TYPE_ORTHOGONAL||t==Li.EDGE_TYPE_ORTHOGONAL_HORIZONTAL||t==Li.EDGE_TYPE_HORIZONTAL_VERTICAL||t==Li.EDGE_TYPE_ORTHOGONAL_VERTICAL||t==Li.EDGE_TYPE_VERTICAL_HORIZONTAL||t==Li.EDGE_TYPE_EXTEND_TOP||t==Li.EDGE_TYPE_EXTEND_LEFT||t==Li.EDGE_TYPE_EXTEND_BOTTOM||t==Li.EDGE_TYPE_EXTEND_RIGHT||t==Li.EDGE_TYPE_ELBOW||t==Li.EDGE_TYPE_ELBOW_HORIZONTAL||t==Li.EDGE_TYPE_ELBOW_VERTICAL}function Vo(t,i){var e,n;i&&i.width&&i.height?(e=i.width,n=i.height):e=n=isNaN(i)?nt.ARROW_SIZE:i;var o=ro.getShape(t,-e,-n/2,e,n);return o||((o=new Ye).moveTo(-e,-n/2),o.lineTo(0,0),o.lineTo(-e,n/2)),o}function zo(t,i){var e=Math.sin(i),n=Math.cos(i),o=t.x,r=t.y;return t.x=o*n-r*e,t.y=o*e+r*n,t}function Wo(t,i,e,n,o,r){var s=Math.atan2(n-i,e-t),h=new ht(o,r);return h.rotate=s,zo(h,s),h.x+=t,h.y+=i,h}function Ko(t,i,e){if(A(t,new Fe(Pe,[i.x,i.y]),0),e){if(1<t.length){var n=t[t.length-1];if(Me==n.type&&(n.invalidTerminal||n.points[2]===S||null===n.points[2]))return n.points[2]=e.x,n.points[3]=e.y,void(n.invalidTerminal=!0);if(Be==n.type&&(n.invalidTerminal||n.points[4]===S||null===n.points[4]))return n.points[4]=e.x,n.points[5]=e.y,void(n.invalidTerminal=!0)}t.push(new Fe(Ne,[e.x,e.y]))}}function Xo(t,i,e,n,o,r){var s;for(o===S&&(s=Math.atan2(e.y-n.y,e.x-n.x),o=Math.cos(s),r=Math.sin(s)),e={x:e.x,y:e.y},i.contains(e.x,e.y)||(e=ut(i,n.x,n.y,e.x,e.y));;){if(!i.contains(e.x,e.y))return n;if(t.hitTest(e.x-o,e.y-r,nt.LOOKING_EDGE_ENDPOINT_TOLERANCE)){n.x=e.x-o/2,n.y=e.y-r/2;break}e.x-=o,e.y-=r}return n}function jo(t,i,e,n,o,r){return i.contains(e.x,e.y)?!1===r?Zo(t,i,e,n,o):Zo(t,i,{x:e.x,y:e.y,perX:n,perY:o},n,o)||Zo(t,i,e,-n,-o):(e=function t(i,e,n,o,r,s){var h,a,l=e<i.x,_=e>i.right,u=n<i.y,c=n>i.bottom;if(l&&0<o&&(h=n+(i.x-e)*r/o)>=i.y&&h<=i.bottom)return{x:i.x,y:h,perX:o,perY:r};if(_&&o<0&&(h=n+(i.right-e)*r/o)>=i.y&&h<=i.bottom)return{x:i.right,y:h,perX:o,perY:r};if(u&&0<r&&(a=e+(i.y-n)*o/r)>=i.x&&a<=i.right)return{x:a,y:i.y,perX:o,perY:r};if(c&&r<0&&(a=e+(i.bottom-n)*o/r)>=i.x&&a<=i.right)return{x:a,y:i.bottom,perX:o,perY:r};if(!1!==s)return t(i,e,n,-o,-r,!1)}(i,e.x,e.y,n,o,r))?Zo(t,i,e,e.perX,e.perY):void 0}function Zo(t,i,e,n,o){for(;;){if(!i.contains(e.x,e.y))return;if(t.hitTest(e.x+n,e.y+o))break;e.x+=n,e.y+=o}return e}function Jo(t){return Oe(t)||t.match(/.(gif|jpg|jpeg|png)$/gi)||/^data:image\/(\w+\+?\w+);base64,/i.test(t)||(t=tt(t))instanceof Object&&t.draw?t:void 0}ko[mo.SELECTION_COLOR]=nt.SELECTION_COLOR,ko[mo.SELECTION_BORDER]=nt.SELECTION_BORDER,ko[mo.SELECTION_SHADOW_BLUR]=nt.SELECTION_SHADOW_BLUR,ko[mo.SELECTION_TYPE]=Li.SELECTION_TYPE_SHADOW,ko[mo.SELECTION_SHADOW_OFFSET_X]=2,ko[mo.SELECTION_SHADOW_OFFSET_Y]=2,ko[mo.LABEL_COLOR]=nt.LABEL_COLOR,ko[mo.LABEL_POSITION]=pt.CENTER_BOTTOM,ko[mo.LABEL_ANCHOR_POSITION]=pt.CENTER_TOP,ko[mo.LABEL_PADDING]=new vt(0,2),ko[mo.LABEL_POINTER_WIDTH]=8,ko[mo.LABEL_RADIUS]=8,ko[mo.LABEL_POINTER]=!0,ko[mo.LABEL_BORDER]=0,ko[mo.LABEL_BORDER_STYLE]="#000",ko[mo.LABEL_ROTATABLE]=!0,ko[mo.LABEL_BACKGROUND_COLOR]=null,ko[mo.LABEL_BACKGROUND_GRADIENT]=null,ko[mo.EDGE_COLOR]="#555555",ko[mo.EDGE_WIDTH]=1.5,ko[mo.EDGE_FROM_AT_EDGE]=!0,ko[mo.EDGE_TO_AT_EDGE]=!0,ko[mo.GROUP_BACKGROUND_COLOR]=J(3438210798),ko[mo.GROUP_STROKE]=1,ko[mo.GROUP_STROKE_STYLE]="#000",ko[mo.ARROW_TO]=!0,ko[mo.ARROW_FROM_SIZE]=nt.ARROW_SIZE,ko[mo.ARROW_TO_SIZE]=nt.ARROW_SIZE,ko[mo.EDGE_LOOPED_EXTAND]=10,ko[mo.EDGE_CORNER_RADIUS]=8,ko[mo.EDGE_CORNER]=Li.EDGE_CORNER_ROUND,ko[mo.EDGE_SPLIT_BY_PERCENT]=!0,ko[mo.EDGE_EXTEND]=20,ko[mo.EDGE_SPLIT_PERCENT]=.5,ko[mo.EDGE_SPLIT_VALUE]=20,ko[mo.EDGE_BUNDLE_GAP]=20,ko[mo.EDGE_BUNDLE_LABEL_ANCHOR_POSITION]=pt.CENTER_BOTTOM,ko[mo.EDGE_BUNDLE_LABEL_POSITION]=pt.CENTER_TOP,ko[mo.EDGE_BUNDLE_LABEL_COLOR]="#075bc5",ko[mo.SHAPE_STROKE]=1,ko[mo.SHAPE_STROKE_STYLE]="#2898E0",ko[mo.RENDER_COLOR_BLEND_MODE]=nt.BLEND_MODE,ko[mo.ALPHA]=1,nt.LOOKING_EDGE_ENDPOINT_TOLERANCE=2;function Qo(t,i){this._$z=new Mt,this._$z.on(function(t){"currentSubNetwork"==t.kind&&this.invalidateVisibility()},this),this._1O=new Mt,this._1O.addListener(function(t){!this.currentSubNetwork||t.kind!=Bt.KIND_CLEAR&&t.kind!=Bt.KIND_REMOVE||this.graphModel.contains(this.currentSubNetwork)||(this.currentSubNetwork=null)},this),this._$c=new Mt,this._19=new Mt,this._$q=new Mt,this._$u=new Mt,this.graphModel=i||new uo,this._9K=new bn(this,t),this._3F=new $r(this),this._1G=new Mt,this._onresize=Zt(l,"resize",function(t){this.updateViewport()},!1,this),this._9K._o66.ondrop=function(t){this.ondrop(t)}.bind(this),this._9K._o66.ondragover=function(t){this.ondragover(t)}.bind(this)}function qo(t){for(var i=t.parent;i;){if(i.enableSubNetwork)return i;i=i.parent}return null}function tr(t,i){_(this,tr,arguments)}q(Qo.prototype={originAtCenter:!0,editable:!1,ondragover:function(t){Si.stopEvent(t)},getDropInfo:function(t,i){var e=null;if(i)try{e=JSON.parse(i)}catch(t){}return e},ondrop:function(t){var i=t.dataTransfer;if(i){var e=i.getData("text"),n=this.getDropInfo(t,e);n||((n={}).image=i.getData("image"),n.type=i.getData("type"),n.label=i.getData("label"),n.groupImage=i.getData("groupImage"));var o=this.globalToLocal(t),o=this.toLogical(o.x,o.y);if(!(this.dropAction instanceof Function&&!1===this.dropAction.call(this,t,o,n))&&(n.image||n.label||n.type)){var r,s,h=n.image,a=n.type,l=n.label,_=n.groupImage;if(Si.stopEvent(t),a&&"Node"!=a?"Text"==a?r=this.createText(l,o.x,o.y):"ShapeNode"==a?r=this.createShapeNode(l,o.x,o.y):"Group"==a?(r=this.createGroup(l,o.x,o.y),(_=_&&Jo(_))&&(r.groupImage=_)):(a=tt(a))instanceof Function&&a.prototype instanceof eo&&((r=new a).name=l,r.location=new ht(o.x,o.y),this._mEModel.add(r)):r=this.createNode(l,o.x,o.y),r){if((h=h&&Jo(h))&&(r.image=h),!t.shiftKey||(s=this.getElementByMouseEvent(t))&&this._o6I(s)&&(r.parent=s),n.properties)for(var u in n.properties)r[u]=n.properties[u];if(n.clientProperties)for(var u in n.clientProperties)r.set(u,n.clientProperties[u]);if(n.styles&&r.putStyles(n.styles),!1===this.onElementCreated(r,t,n))return!1;var c=new Fr(this,Fr.ELEMENT_CREATED,t,r);return this.onInteractionEvent(c),r}}}},_o6I:function(t){return t.enableSubNetwork||t instanceof co||t.droppable},enableDoubleClickToOverview:!0,_9K:null,_$z:null,_1O:null,_$c:null,_$u:null,_19:null,_$q:null,_20:function(t){return this._$z.beforeEvent(t)},_5C:function(t){this._$z.onEvent(t),"viewport"==t.kind&&this.checkLimitedBounds()},isVisible:function(t){return this._9K._fL(t)},isMovable:function(t){return(t instanceof eo||t instanceof Qn&&t.hasPathSegments())&&!1!==t.movable},isSelectable:function(t){return!1!==t.selectable},isEditable:function(t){return!1!==t.editable},isRotatable:function(t){return!1!==t.rotatable},isResizable:function(t){return!1!==t.resizable},canLinkFrom:function(t){return!1!==t.linkable&&!1!==t.canLinkFrom},canLinkTo:function(t,i){return!1!==t.linkable&&!1!==t.canLinkTo&&(!(i instanceof Si.Group&&t.isDescendantOf(i))&&!(t instanceof Si.Group&&i.isDescendantOf(t)))},isEndPointEditable:function(t,i){return!1!==t.endPointEditable},createNode:function(t,i,e){var n=new eo(t,i,e);return this._mEModel.add(n),n},createText:function(t,i,e){var n=new fo(t,i,e);return this._mEModel.add(n),n},createShapeNode:function(t,i,e,n){U(i)&&(n=e,e=i,i=null);var o=new oo(t,i);return o.$location=new ht(e,n),this._mEModel.add(o),o},createGroup:function(t,i,e){var n=new co(t,i,e);return this._mEModel.add(n),n},createEdge:function(t,i,e){var n;t instanceof eo&&(n=e,e=i,i=t,t=n);var o=new Qn(i,e);return t&&(o.$name=t),this._mEModel.add(o),o},addElement:function(t,i){this._mEModel.add(t),i&&t.hasChildren()&&t.forEachChild(function(t){this.addElement(t,i)},this)},removeElement:function(t){this._mEModel.remove(t)},clear:function(){this._mEModel.clear()},getStyle:function(t,i){var e=t._kY[i];return e!==S?e:this.getDefaultStyle(i)},getDefaultStyle:function(t){if(this._kY){var i=this._kY[t];if(i!==S)return i}return ko[t]},_3D:function(t,i){if(!this.limitedBounds||this.limitedBounds.contains(this.viewportBounds))return i&&i(),!1;t=this._2N(),this.stopAnimation();var e,n,o=this.viewportBounds,r=this.limitedBounds,s=o.width/this.limitedBounds.width,h=o.height/this.limitedBounds.height;if(s<=1&&h<=1)return e=r.left>o.left?r.left:r.right<o.right?o.left-(o.right-r.right):o.left,n=r.top>o.top?r.top:r.bottom<o.bottom?o.top-(o.bottom-r.bottom):o.top,void this.translateTo(-e*this.scale,-n*this.scale,this.scale,!1,i);var a=h<s,l=Math.max(s,h);a?(e=r.x,(n=r.y+(o.top-r.top)*(1-l)/l)>=r.y?n=r.y:n<r.bottom-o.height/l&&(n=r.bottom-o.height/l)):(n=r.y,(e=r.x+(o.left-r.left)*(1-l)/l)>=r.x?e=r.x:e<r.right-o.width/l&&(e=r.right-o.width/l)),e*=l*=this.scale,n*=l,this.translateTo(-e,-n,l,t,i)},checkLimitedBounds:function(t){if(this._o6heckingBounds||!this.limitedBounds||this.limitedBounds.contains(this.viewportBounds))return!1;this._o6heckingBounds=!0,this.callLater(function(){this._3D(t,function(){this._o6heckingBounds=!1}.bind(this))},this)},zoomByMouseEvent:function(t,i,e,n){var o=this.globalToLocal(t);return"number"==typeof i?this.zoomAt(Math.pow(1.1,i),o.x,o.y,e,n):i?this.zoomIn(o.x,o.y,e,n):this.zoomOut(o.x,o.y,e,n)},resetScale:1,translate:function(t,i,e){return this.translateTo(this.tx+t,this.ty+i,this.scale,e)},translateTo:function(t,i,e,n,o){if(e=e&&Math.min(this.maxScale,Math.max(this.minScale,e)),!n){var r=this._9K._o6A(t,i,e);return o&&o(),r}this._6V()._mO(t,i,e,n,o)},centerTo:function(t,i,e,n,o){return(!e||e<=0)&&(e=this.scale),n===S&&(n=this._2N()),this.translateTo(this.width/2-t*e,this.height/2-i*e,e,n,o)},moveToCenter:function(t,i){if(!1!==arguments[2]&&this._9K.isInvalidate())return this._9K._o4U||(i=!1),this.callLater(this.moveToCenter.bind(this,t,i,!1));var e=this.bounds;this.centerTo(e.cx,e.cy,t,i)},zoomToOverview:function(t,i){if(!1!==arguments[2]&&this._9K.isInvalidate())return this._9K._o4U||(t=!1),this.callLater(this.zoomToOverview.bind(this,t,i,!1));var e=this._9K._1V();e&&(i&&(e.scale=Math.min(e.scale,i)),this.centerTo(e.cx,e.cy,e.scale,t))},_2N:function(){return!!this._9K._o4U&&(this.zoomAnimation===S||null===this.zoomAnimation?nt.ZOOM_ANIMATE:this.zoomAnimation)},zoomAt:function(t,i,e,n,o){n===S&&(n=this._2N()),i===S&&(i=this.width/2),i=i||0,e===S&&(e=this.height/2),e=e||0;var r=this.scale;return i=(t=Math.min(this.maxScale,Math.max(this.minScale,r*t)))*(this.tx-i)/r+i,e=t*(this.ty-e)/r+e,this.translateTo(i,e,t,n,o)},zoomOut:function(t,i,e,n){return this.zoomAt(1/this.scaleStep,t,i,e,n)},zoomIn:function(t,i,e,n){return this.zoomAt(this.scaleStep,t,i,e,n)},_6V:function(){return this._panAnimation||(this._panAnimation=new lr(this)),this._panAnimation},onAnimationStart:function(){},onAnimationEnd:function(){},isAnimating:function(){return this._panAnimation&&this._panAnimation._fD()},enableInertia:!0,_o46:function(t,i){return this._6V()._iL(t||0,i||0)},stopAnimation:function(){this._panAnimation&&this._panAnimation._nA()},getUI:function(t){return it(t)?this._9K._44(t):this._9K._mF(t)},getUIByMouseEvent:function(t){return this._9K._44(t)},hitTest:function(t){return this._9K.hitTest(t)},globalToLocal:function(t){return this._9K._8P(t)},toCanvas:function(t,i){return this._9K._iF(t,i)},toLogical:function(t,i){return it(t)?this._9K._$j(t):this._9K._fV(t,i)},getElementByMouseEvent:function(t){var i=this._9K._44(t);if(i)return i.$data},getElement:function(t){return it(t)?this.getElementByMouseEvent(t):this._mEModel.getById(t)},invalidate:function(){this._9K._dC()},invalidateUI:function(t){t.invalidate(),this.invalidate()},invalidateElement:function(t){this._9K._48(t)},getUIBounds:function(t){return this._9K._33(t)},forEachVisibleUI:function(t,i){return this._9K._50(t,i)},forEachReverseVisibleUI:function(t,i){return this._9K._12(t,i)},forEachUI:function(t,i){return this._9K._fM(t,i)},forEachReverseUI:function(t,i){return this._9K._52(t,i)},forEach:function(t,i){return this._mEModel.forEach(t,i)},getElementByName:function(i){var e;return this.forEach(function(t){if(t.name==i)return e=t,!1}),e},focus:function(t){if(t){var i=l.scrollX||l.pageXOffset,e=l.scrollY||l.pageYOffset;return this.canvasPanel.focus(),void l.scrollTo(i,e)}this.canvasPanel.focus()},callLater:function(t,i,e){this._9K._eD(t,i,e)},exportImage:function(t,i,e){return function(t,i,e,n){var o=t.bounds;e=e||o,i=i||1;var r=null;r;var s=Ni();hn(s.g),s.width=e.width*i,s.height=e.height*i,t._9K._iD(s.g,i,e);var h=null;try{h=s.toDataURL(n||"image/png")}catch(t){Si.error(t)}return{canvas:s,data:h,width:s.width,height:s.height}}(this,t,i,e)},setSelection:function(t){return this._mEModel._selectionModel.set(t)},select:function(t){return this._mEModel._selectionModel.select(t)},unselect:function(t){return this._mEModel._selectionModel.unselect(t)},reverseSelect:function(t){return this._mEModel._selectionModel.reverseSelect(t)},selectAll:function(){var i,t,e;t=(i=this).selectionModel,e=[],i.graphModel.forEach(function(t){i.isVisible(t)&&i.isSelectable(t)&&e.push(t)}),t.set(e)},unSelectAll:function(){this.selectionModel.clear()},unselectAll:function(){this.unSelectAll()},isSelected:function(t){return this._mEModel._selectionModel.contains(t)},sendToTop:function(t){var i,e;Zn(this._mEModel,t),t instanceof Qn&&((i=this.getUI(t))&&(e=this._9K._nU).setIndex(i,e.length-1))},sendToBottom:function(t){Jn(this._mEModel,t)},moveElements:function(t,i,e){var n=[],o=new ot;return L(t,function(t){t instanceof eo?n.push(t):t instanceof Qn&&o.add(t)}),this._g1(n,i,e,o)},_g1:function(t,e,n,i){return!(0==e&&0==n||0==t.length&&0==i.length)&&(0!=t.length&&(o=this._5E(t),i=this._5D(o,i),L(o,function(t){var i=t.$location;i?t.setLocation(i.x+e,i.y+n):t.setLocation(e,n)})),i&&i.length&&this._g2(i,e,n),!0);var o},_g2:function(t,i,e){t.forEach(function(t){t.move(i,e)})},_5D:function(i,e){return this.graphModel.forEach(function(t){t instanceof Qn&&this.isMovable(t)&&i.contains(t.fromAgent)&&i.contains(t.toAgent)&&e.add(t)},this),e},_5E:function(t){var i=new ot;return L(t,function(t){this.isMovable(t),i.add(t),function i(t,e,n){t._jR()&&t.hasChildren()&&t.children.forEach(function(t){t instanceof eo&&e.add(t)&&i(t,e,n)},this),t.hasFollowers()&&t._f2.forEach(function(t){(null==n||n.accept(t))&&e.add(t)&&i(t,e,n)})}(t,i,this._movableFilter)},this),i},reverseExpanded:function(t){if(!t.isBundleEnabled())return!1;var i=t.getEdgeBundle(!0);return!!i&&(!1!==i.reverseExpanded()?(this.invalidate(),!0):void 0)},_3F:null,_1G:null,beforeInteractionEvent:function(t){return this._1G.beforeEvent(t)},onInteractionEvent:function(t){this._1G.onEvent(t)},addCustomInteraction:function(t){this._3F.addCustomInteraction(t)},removeCustomInteraction:function(t){this._3F.removeCustomInteraction(t)},enableWheelZoom:!0,enableTooltip:!0,getTooltip:function(t){return t.tooltip||t.name},updateViewport:function(){this._9K._8C()},destroy:function(){var t,i,e;this._5C(new bt(this,"destroy",!0,this._jDed)),this._jDed=!0,this._onresize&&(t=l,i="resize",e=this._onresize,t.removeEventListener(i,e)),this._3F.destroy(),this.graphModel=new uo;var n=this.html;this._9K._jD(),n&&(n.innerHTML="")},onPropertyChange:function(i,e,n){this._$z.addListener(function(t){t.kind==i&&e.call(n,t)})},removeSelection:function(){var t=this.selectionModel._kZ;return!(!t||0==t.length)&&(t=t.slice(),this._mEModel.remove(t),t)},removeSelectionByInteraction:function(e){var t=this.selectionModel.datas;if(!t||0==t.length)return!1;Si.confirm("Delete Elements - "+t.length,function(){var t,i=this.removeSelection();i&&(t=new Fr(this,Fr.ELEMENT_REMOVED,e,i),this.onInteractionEvent(t))},this)},createShapeByInteraction:function(t,i,e,n){var o=new Ye(i);2<i.length&&o.closePath();var r=this.createShapeNode("Shape",o,e,n);this.onElementCreated(r,t);var s=new Fr(this,Fr.ELEMENT_CREATED,t,r);return this.onInteractionEvent(s),r},createLineByInteraction:function(t,i,e,n){var o=new Ye(i),r=this.createShapeNode("Line",o,e,n);r.setStyle(Si.Styles.SHAPE_FILL_COLOR,null),r.setStyle(Si.Styles.SHAPE_FILL_GRADIENT,null),r.setStyle(Si.Styles.LAYOUT_BY_PATH,!0),this.onElementCreated(r,t);var s=new Fr(this,Fr.ELEMENT_CREATED,t,r);return this.onInteractionEvent(s),r},createEdgeByInteraction:function(t,i,e,n,o,r){var s,h,a=this.createEdge("Edge",t,i);o&&a.setStyle(Si.Styles.EDGE_FROM_PORT,o),r&&a.setStyle(Si.Styles.EDGE_TO_PORT,r),n?a._o3I=n:(s=this.edgeUIClass,h=this.edgeType,this.interactionProperties&&(s=this.interactionProperties.uiClass||s,h=this.interactionProperties.edgeType||h),s&&(a.uiClass=s),h&&(a.edgeType=h)),this.onElementCreated(a,e);var l=new Fr(this,Fr.ELEMENT_CREATED,e,a);return this.onInteractionEvent(l),a},onElementCreated:function(t,i,e){!t.parent&&this.currentSubNetwork&&(t.parent=this.currentSubNetwork)},allowEmptyLabel:!1,startLabelEdit:function(i,e,t,n){var o=this;t.startEdit(n.x,n.y,e.data,this.getStyle(i,mo.LABEL_FONT_SIZE),function(t){return o.onLabelEdit(i,e,t,e.parent)})},onLabelEdit:function(t,i,e,n){if(!e&&!this.allowEmptyLabel)return Si.alert("Label Can't Empty"),!1;if("label"==i.name){if(t.name==e)return!1;t.name=e}else!1===n._hF(i,e)&&(i.data=e,this.invalidateElement(t))},setInteractionMode:function(t,i){this.interactionMode=t,this.interactionProperties=i},upSubNetwork:function(){return!!this._3P&&(this.currentSubNetwork=qo(this._3P))},_$v:!1,invalidateVisibility:function(){this._$v=!0,this.invalidate()},getBundleLabel:function(t){var i=t.getEdgeBundle(!0);return i&&i.agentEdge==t?"+"+i.bindableEdges.length:null},zoomAnimation:null,pauseRendering:function(t,i){(this.delayedRendering||i)&&this._9K._7Y(t)},_5G:S,enableRectangleSelectionByRightButton:!0,getLinkablePoints:function(t,i,e){return t.linkablePoints}},{center:{get:function(){return this.toLogical(this.html.clientWidth/2,this.html.clientHeight/2)}},visibleFilter:{get:function(){return this._jSFilter},set:function(t){this._jSFilter=t,this.invalidateVisibility()}},topCanvas:{get:function(){return this._9K._topCanvas}},propertyChangeDispatcher:{get:function(){return this._$z}},listChangeDispatcher:{get:function(){return this._1O}},dataPropertyChangeDispatcher:{get:function(){return this._$c}},selectionChangeDispatcher:{get:function(){return this._$u}},parentChangeDispatcher:{get:function(){return this._19}},childIndexChangeDispatcher:{get:function(){return this._$q}},interactionDispatcher:{get:function(){return this._1G}},cursor:{set:function(t){this.canvasPanel.style.cursor=t||this._3F.defaultCursor},get:function(){return this.canvasPanel.style.cursor}},interactionMode:{get:function(){return this._3F._o6urrentMode},set:function(t){var i=this.interactionMode;i!=t&&(this._3F.currentMode=t,this._5C(new bt(this,"interactionMode",t,i)))}},scaleStep:{get:function(){return this._9K._fQ},set:function(t){this._9K._fQ=t}},maxScale:{get:function(){return this._9K._hY},set:function(t){this._9K._hY=t}},minScale:{get:function(){return this._9K._i0},set:function(t){this._9K._i0=t}},scale:{get:function(){return this._9K._scale},set:function(t){return this._9K._scale=t}},tx:{get:function(){return this._9K._tx}},ty:{get:function(){return this._9K._ty}},styles:{get:function(){return this._kY},set:function(t){this._kY=t}},selectionModel:{get:function(){return this._mEModel._selectionModel}},graphModel:{get:function(){return this._mEModel},set:function(t){if(this._mEModel==t)return!1;var i=this._mEModel,e=new bt(this,"graphModel",i,t);if(!1===this._20(e))return!1;null!=i&&(i.propertyChangeDispatcher.removeListener(this._$z,this),i.listChangeDispatcher.removeListener(this._1O,this),i.dataChangeDispatcher.removeListener(this._$c,this),i.parentChangeDispatcher.removeListener(this._19,this),i.childIndexChangeDispatcher.removeListener(this._$q,this),i.selectionChangeDispatcher.removeListener(this._$u,this)),this._mEModel=t,this._mEModel&&(this._mEModel.propertyChangeDispatcher.addListener(this._$z,this),this._mEModel.listChangeDispatcher.addListener(this._1O,this),this._mEModel.dataChangeDispatcher.addListener(this._$c,this),this._mEModel.parentChangeDispatcher.addListener(this._19,this),this._mEModel.childIndexChangeDispatcher.addListener(this._$q,this),this._mEModel.selectionChangeDispatcher.addListener(this._$u,this)),this._9K&&this._9K._mM(),this._5C(e)}},count:{get:function(){return this._mEModel.length}},width:{get:function(){return this.html.clientWidth}},height:{get:function(){return this.html.clientHeight}},viewportBounds:{get:function(){return this._9K._viewportBounds}},bounds:{get:function(){return this._9K._54()}},canvasPanel:{get:function(){return this._9K._o66}},html:{get:function(){return this._9K._o66.parentNode}},navigationType:{get:function(){return this._9K._89},set:function(t){this._9K._4C(t)}},_3P:{get:function(){return this._mEModel._3P}},currentSubNetwork:{get:function(){return this._mEModel.currentSubNetwork},set:function(t){this._mEModel.currentSubNetwork=t}},limitedBounds:{get:function(){return this._limitedBounds},set:function(t){if(gt.equals(t,this._limitedBounds))return!1;this._limitedBounds=t?new gt(t):null}},ratio:{get:function(){return this._9K.ratio}},delayedRendering:{get:function(){return this._5G===S?nt.DELAYED_RENDERING:this._5G},set:function(t){t!=this.delayedRendering&&(this._5G=t,this.pauseRendering(!1,!0))}},fullRefresh:{get:function(){return this._9K.fullRefresh},set:function(t){this._9K.fullRefresh=t}},enableCrossLine:{get:function(){return null!=this._9K._e0},set:function(t){t!=this.enableCrossLine&&(this._9K.enableCrossLine(t),this.invalidate())}}}),nt.DELAYED_RENDERING=!0,nt.GROUP_MIN_WIDTH=60,nt.GROUP_MIN_HEIGHT=60,tr.prototype={_dA:function(){if(!this._69())return v(this,tr,"_dA",arguments)},initialize:function(){v(this,tr,"initialize"),this.checkBody()},_o4Y:function(){this._n1=new Ye,this.shape=new xo(this._n1),this.shape.layoutByPath=!1,this.addChild(this.shape,0),this.body=this.shape},checkBody:function(){if(this._69())return this._2D=!0,this.shape?(this.shape.visible=!0,this.body=this.shape):(this._o4Y(),Lo.initBindingProperties(this)),void(this.image&&(this.image.visible=!1));this.image?(this.image.visible=!0,this.body=this.image):this._o4X(),this.shape&&(this.shape.visible=!1)},_69:function(){return this.$data._jR()&&this.$data.expanded},_n1:null,_2D:!0,_6A:function(){this._1R=!0,this._2D=!0},doValidate:function(){if(this._2D&&this._69()){if(this._2D=!1,this.shape.invalidateData(),this.$data.groupImage){this.shape.data=this.$data.groupImage;var t=this._2E();return this.shape.offsetX=t.x+t.width/2,this.shape.offsetY=t.y+t.height/2,this.shape.size={width:t.width,height:t.height},Go.prototype.doValidate.call(this)}this.shape.offsetX=0,this.shape.offsetY=0;var i,e=this._93(this.$data.groupType);this._n1.clear(),e instanceof gt?(i=this.getStyle(mo.GROUP_RADIUS)||0,so(this._n1,e.x,e.y,e.width,e.height,e.rx||i,e.ry||i)):e instanceof Ji?(n=this._n1,r=(o=e).r||1,s=o.cx||0,h=o.cy||0,a=r*Math.tan(Math.PI/8),l=r*Math.sin(Math.PI/4),n.moveTo(s+r,h),n.quadTo(s+r,h+a,s+l,h+l),n.quadTo(s+a,h+r,s,h+r),n.quadTo(s-a,h+r,s-l,h+l),n.quadTo(s-r,h+a,s-r,h),n.quadTo(s-r,h-a,s-l,h-l),n.quadTo(s-a,h-r,s,h-r),n.quadTo(s+a,h-r,s+l,h-l),n.quadTo(s+r,h-a,s+r,h)):e instanceof Qi&&ho(this._n1,e),this._n1._79=!0,this.shape.invalidateData()}var n,o,r,s,h,a,l;return Go.prototype.doValidate.call(this)},_7H:function(t,i,e,n,o){switch("number"!=typeof n&&(n=-i/2),"number"!=typeof o&&(o=-e/2),t){case Li.GROUP_TYPE_CIRCLE:return new Ji(n+i/2,o+e/2,Math.max(i,e)/2);case Li.GROUP_TYPE_ELLIPSE:return new Qi(n+i/2,o+e/2,i,e);default:return new gt(n,o,i,e)}},_2E:function(){return this._93(null)},getItemBounds:function(t,i){return(i=i||{}).x=t.$x+t._hG.x,i.y=t.$y+t._hG.y,i.width=t._hG.width,i.height=t._hG.height,i},_93:function(t){var i=this.data,e=i.padding,n=i.minSize,o=nt.GROUP_MIN_WIDTH,r=nt.GROUP_MIN_HEIGHT;if(n&&("number"==typeof n.width&&(o=n.width),"number"==typeof n.height&&(r=n.height),g=n.x,v=n.y),!i.hasChildren())return this._7H(t,o,r,g,v);var s,h=this.$data._hE._kZ;t!=Li.GROUP_TYPE_CIRCLE&&t!=Li.GROUP_TYPE_ELLIPSE||(s=[]);for(var a=new gt,l={},_=0,u=h.length;_<u;_++){var c,d=h[_];!this.graph.isVisible(d)||d instanceof Qn||(c=this.graph.getUI(d))&&(l=this.getItemBounds(c,l),a.addRect(l.x,l.y,l.width,l.height),s&&(s.push({x:l.x,y:l.y}),s.push({x:l.x+l.width,y:l.y}),s.push({x:l.x+l.width,y:l.y+l.height}),s.push({x:l.x,y:l.y+l.height})))}if(a.isEmpty())return this._7H(t,o,r,g,v);var f=this.$data.$location;f?f.invalidateFlag&&(f.invalidateFlag=!1,g===S&&(f.x=a.cx),v===S&&(f.y=a.cy)):f=this.$data.$location={x:a.cx,y:a.cy},e&&a.grow(e),"number"==typeof g&&g+f.x<a.x&&(a.width+=a.x-(g+f.x),a.x=g+f.x,s&&s.push({x:a.x,y:a.cy})),"number"==typeof v&&v+f.y<a.y&&(a.height+=a.y-(a.y,v+f.y),a.y=v+f.y,s&&s.push({x:a.cx,y:a.y}));var E,g=f.x,v=f.y;if(t!=Li.GROUP_TYPE_CIRCLE)return t==Li.GROUP_TYPE_ELLIPSE?((E=te(s,a)).cx-=g,E.cy-=v,E.width<o&&(E.cx+=(o-E.width)/2,E.width=o),E.height<r&&(E.cy+=(r-E.height)/2,E.height=r)):((E=a).width<o&&(a.width=o),a.height<r&&(a.height=r),a.offset(-g,-v)),E;(E=qi(s)).cx-=g,E.cy-=v;var p=Math.max(o,r)/2;return E.r<p&&(E.cx+=p-E.r,E.cy+=p-E.r,E.r=p),E},_10:function(t,i,e){if(!this._69())return v(this,tr,"_10",arguments);var n=this._d8.onBindingPropertyChange(this,t,i,e),n=To.onBindingPropertyChange(this,t,i,e)||n;return n=So.onBindingPropertyChange(this,t,i,e)||n,Lo.onBindingPropertyChange(this,t,i,e)||n}},t(tr,Go),Si.GroupUI=tr;nt.NAVIGATION_IMAGE_LEFT=null,nt.NAVIGATION_IMAGE_TOP=null;var ir={position:"absolute","text-align":"center"},er={padding:"10px",transition:"opacity 0.2s ease-in"},nr={position:"relative",display:"block"};function or(t,i,e,n,o,r,s){var h=d.createElement("div");h.className="Q-Graph-Nav-Button",zt(h,ir),i&&zt(h,i);var a=d.createElement("img");return r&&(G&&(a.ontouchstart=r),ti||(a.onclick=r)),a.name=s,a.src=e,zt(a,er),o&&zt(a,o),n&&Wt(a,"transform","rotate(180deg)"),h._img=a,h.appendChild(a),t.appendChild(h),h}function rr(r,t){var i,e,n;nt.NAVIGATION_IMAGE_LEFT||((e=(i=Ni(20,40)).g).scale(e.ratio,e.ratio),e.moveTo(16,4),e.lineTo(4,20),e.lineTo(16,36),e.lineWidth=3,e.lineCap="round",e.lineJoin="round",e.strokeStyle="#FFF",e.shadowColor="#888",e.shadowBlur=5,e.stroke(),nt.NAVIGATION_IMAGE_LEFT=i.toDataURL(),(n=Ni(i.height,i.width,!1)).g.translate(n.width,0),n.g.rotate(Math.PI/2),n.g.drawImage(i,0,0),nt.NAVIGATION_IMAGE_TOP=n.toDataURL()),this._o4aseCanvas=r;(function(t,i){this._navPane=d.createElement("div"),this._navPane.className="Q-Graph-Nav",zt(this._navPane,{"background-color":"rgba(0, 0, 0, 0)",overflow:"hidden","user-select":"none",position:"relative"}),this._top=or(this._navPane,{width:"100%"},nt.NAVIGATION_IMAGE_TOP,!1,null,i,"top"),this._left=or(this._navPane,{height:"100%"},nt.NAVIGATION_IMAGE_LEFT,!1,nr,i,"left"),this._right=or(this._navPane,{height:"100%",right:"0px"},nt.NAVIGATION_IMAGE_LEFT,!0,nr,i,"right"),this._o4ottom=or(this._navPane,{width:"100%",bottom:"0px"},nt.NAVIGATION_IMAGE_TOP,!0,null,i,"bottom"),t.appendChild(this._navPane)}).call(this,t,function(t){var i,e;K(t);var n=t.target,o=n.name;if("left"==o)i=1;else if("right"==o)i=-1;else if("top"==o)e=1;else{if("bottom"!=o)return;e=-1}G&&(n.className="hover",setTimeout(function(){n.className=""},100)),K(t),r._mE._o46(i,e)}),this._3S(t.clientWidth,t.clientHeight)}function sr(t,i){this._o4aseCanvas=t,this.init(i,t)}Kt(".Q-Graph-Nav img","opacity:0.7;vertical-align:middle;"),Kt(".Q-Graph-Nav img:hover,img.hover","opacity:1;background-color: rgba(0, 0, 0, 0.5)"),G||(Kt(".Q-Graph-Nav","opacity:0;"+Vt("transition")+":opacity 3s cubic-bezier(0.8, 0, 0.8, 1)"),Kt(".Q-Graph-Nav:hover","opacity:1;"+Vt("transition")+":opacity 0.3s linear")),rr.prototype={_dB:function(t,i){if(t._jS==i)return!1;t._jS=i,t.style.visibility=i?"visible":"hidden"},_3S:function(t,i){var e=i/2-this._left._img.clientHeight/2+"px";this._left._img.style.top=e,this._right._img.style.top=e,this._navPane.style.width=t+"px",this._navPane.style.height=i+"px"},_o3E:function(t,i,e,n){this._dB(this._top,t),this._dB(this._left,i),this._dB(this._o4ottom,e),this._dB(this._right,n)},_jD:function(){var t=this._navPane.parentNode;t&&t.removeChild(this._navPane)},_lB:function(){var t,i,e,n,o,r,s=this._o4aseCanvas._mE;s&&((t=s.bounds).isEmpty()?this._o3E(!1,!1,!1,!1):(e=(i=s.viewportBounds).y>t.y+1,n=i.x>t.x+1,o=i.bottom<t.bottom-1,r=i.right<t.right-1,this._o3E(e,n,o,r)))}};function hr(t,i){_(this,hr,arguments)}function ar(t,i){var e,n;this._o4aseCanvas=t,this._kQ=(e=i,hn((n=Ni(!0)).g),n.onselectstart=function(){return!1},e.appendChild(n),n.className=mn,n),this.g=this._kQ.g,this._o3G=new ot}Kt(".Q-Graph-ScrollBar","margin: 2px; position: absolute;box-sizing: border-box;box-shadow: #FFF 0px 0px 1px; background-color: rgba(120,120,120,0.3);border-radius: 4px;margin: 1px;"),Kt(".Q-Graph-ScrollBar.hover, .Q-Graph-ScrollBar:hover","background-color: #7E7E7E;"+Vt("transition")+": background-color 0.2s linear;"),Kt(".Q-Graph-ScrollBar--V","width: 8px;right: 0px;"),Kt(".Q-Graph-ScrollBar--H","height: 8px;bottom: 0px;"),Kt(".Q-Graph-ScrollBar--V.Both","margin-bottom: 8px;"),Kt(".Q-Graph-ScrollBar--H.Both","margin-right: 8px;"),G||(Kt(".Q-Graph-ScrollPane","opacity:0;"+Vt("transition")+":opacity 3s cubic-bezier(0.8, 0, 0.8, 1);"),Kt(".Q-Graph:hover .Q-Graph-ScrollPane","opacity:1;"+Vt("transition")+":opacity 0.3s linear;")),sr.prototype={_jD:function(){this._verticalDragSupport._jD(),this._horizontalDragSupport._jD(),delete this._verticalDragSupport,delete this._horizontalDragSupport,this._n2.parentNode&&this._n2.parentNode.removeChild(this._n2)},_n2:null,_o4Z:null,_95:null,init:function(t,i){var e=d.createElement("div");e.className="Q-Graph-ScrollPane",zt(e,{width:"100%",height:"100%",position:"relative"});var n=d.createElement("div");n.className="Q-Graph-ScrollBar Q-Graph-ScrollBar--V";var o=d.createElement("div");o.className="Q-Graph-ScrollBar Q-Graph-ScrollBar--H",e.appendChild(n),e.appendChild(o),t.appendChild(e),this._n2=e,this._95=o,this._o4Z=n,o.isH=!0;var s=this,r={onstart:function(t,i){i.classList.add("hover")},onrelease:function(t,i){i.classList.remove("hover")},ondrag:function(t,i){var e,n,o,r=s._o4aseCanvas._mE;!r||(n=(e=i.isH)?t.dx:t.dy)&&i.scale&&(o=r.scale/i.scale,e?r.translate(-o*n,0):r.translate(0,-o*n),Si.stopEvent(t))},enddrag:function(t,i){var e,n,o=s._o4aseCanvas._mE;o&&o.enableInertia&&(n=(e=i.isH)?t.vx:t.vy,.1<Math.abs(n)&&(n*=o.scale/i.scale,e?o._o46(-n,0):o._o46(0,-n)))}};this._verticalDragSupport=new ai(n,r),this._horizontalDragSupport=new ai(o,r)},_3S:function(){var t=this._o4aseCanvas._mE;t&&t.callLater(this._lB.bind(this))},_lB:function(){var t=this._o4aseCanvas._mE;if(t){var i=t.bounds;if(i.isEmpty())return this._4P(!1),void this._4R(!1);var e=t.viewportBounds,n=t.width,o=t.height,r=1/t.scale,s=e.x>i.x+r||e.right<i.right-r,h=e.y>i.y+r||e.bottom<i.bottom-r,a=s&&h;a?($(this._o4Z,"Both"),$(this._95,"Both")):(Y(this._o4Z,"Both"),Y(this._95,"Both")),this._4P(s,e,i,a?n-10:n),this._4R(h,e,i,a?o-10:o)}},_4P:function(t,i,e,n,o){if(!t)return this._95.style.display="none",void(this._95.scale=0);var r=Math.min(i.x,e.x),s=Math.max(i.right,e.right),h=n/(s-r);this._95.scale=h,this._95.style.left=parseInt((i.x-r)*h)+"px",this._95.style.right=parseInt((s-i.right)*h)+"px",this._95.style.display=""},_4R:function(t,i,e,n){if(!t)return this._o4Z.style.display="none",void(this._o4Z.scale=0);var o=Math.min(i.y,e.y),r=Math.max(i.bottom,e.bottom),s=n/(r-o);this._o4Z.scale=s,this._o4Z.style.top=parseInt((i.y-o)*s)+"px",this._o4Z.style.bottom=parseInt((r-i.bottom)*s)+"px",this._o4Z.style.display=""}},hr.prototype={shape:null,initialize:function(){v(this,hr,"initialize"),this._o4X(),bo.initBindingProperties(this)},_o4X:function(){this.image=new Mo(this.$data.path),this.addChild(this.image,0),this.body=this.image},invalidateShape:function(){this.image.invalidateData(),this.invalidateRender()},_10:function(t,i,e){var n=this._d8.onBindingPropertyChange(this,t,i,e),n=To.onBindingPropertyChange(this,t,i,e)||n;return bo.onBindingPropertyChange(this,t,i,e)||n},doValidate:function(){this.body&&(this.image.data=this.data.path,this.body.$layoutByAnchorPoint=null!=this._2X,this.body.anchorPosition=this._2X);var t=this.$data.$location,i=0,e=0;t&&(i=t.x,e=t.y);var n=this.$x!=i||this.$y!=e;return n&&(this.$invalidateBounds=!0),this.$x=i,this.$y=e,Co.prototype.doValidate.call(this)||n},getLinkablePorts:function(){return this.data.linkablePorts},getLinkableBounds:function(){return this.bodyBounds},getDefaultPortPoint:function(t){return St(pt.CENTER_MIDDLE,t||this.getLinkableBounds())},getPortPoint:function(t,i){return t?((i=i||this.getLinkableBounds()).original?(e=St(t,i.original),i.rotate&&(e=Ii(e.x,e.y,i.rotate,i.rotateX||0,i.rotateY||0)),e.x+=i.tx||0,e.y+=i.ty||0):e=St(t,i),e.port=t,e):this.getDefaultPortPoint(i);var e},getPortPoints:function(){var t=this.getLinkablePorts();if(t&&Array.isArray(t)){var i=[],e=this.getLinkableBounds();return t.forEach(function(t){i.push(this.getPortPoint(t,e))}.bind(this)),i}}},t(hr,Co),q(hr.prototype,{path:{get:function(){return this.data.path}},length:{get:function(){return this.data.length}}}),hr.prototype.addPoint=function(t,i,e){var n=this._jU(t,i),o=this.data,r=He(this.path,n.x,n.y,this.data.addSegmentType,e);if(!r)return!1;o.pathSegments=r.segments},ar.prototype={_n4:function(){this._kQ.style.visibility="visible"},_lC:function(){this._kQ.style.visibility="hidden"},clear:function(){this._o3G.clear(),this._dC()},contains:function(t){return t instanceof Object&&t.id&&(t=t.id),this._o3G.containsById(t)},_6C:function(t){kn.setStyle(this._kQ,"transform",t?"matrix("+t.join(",")+")":"")},addDrawable:function(t,i){if(i){var e={id:++E,drawable:t,scope:i};return this._o3G.add(e),e}return t.id||(t.id=++E),this._o3G.add(t),t},removeDrawable:function(t){if(!t.id)return this._o3G.removeById(t);this._o3G.remove(t)},_o3G:null,invalidate:function(){this._dC()},_dC:function(){this._o4aseCanvas._79||this._l9()},_jV:function(t,i){this._kQ.setSize(t,i)},_l9:function(){var t=this._o4aseCanvas._scale,i=this.g;i._mK(),i.save(),this._o4aseCanvas._o3Y(i);for(var e=this._o3G._kZ,n=0,o=e.length;n<o;n++)i.save(),i.beginPath(),this._hI(i,e[n],t),i.restore();i.restore()},_hI:function(t,i,e){i instanceof Function?i(t,e):i.drawable instanceof Function&&i.scope&&i.drawable.call(i.scope,t,e)}},nt.ZOOM_ANIMATE=!0;var lr=function(t){this._mE=t};function _r(t){this.graph=t,this.topCanvas=t.topCanvas}nt.ANIMATION_MAXTIME=600,nt.ANIMATION_TYPE=mi.easeOut,lr.prototype={_mE:null,_g3:null,_iL:function(t,i,e){this._nA();var n=Math.abs(t/2),o=Math.abs(i/2),r=Math.min(nt.ANIMATION_MAXTIME,.6*Math.max(n,o)*1e3);if(r<10)return!1;var s=t*r/3,h=i*r/3;this._mO(this._mE.tx+s,this._mE.ty+h,0,{duration:r,animationType:function(t){return-(2*Math.pow(t,1.5)-3*t)}},e)},_8G:function(t,i,e,n,o){this._g3&&this._g3._nA(),o&&(this.__delayRender=!0,this._mE.pauseRendering(!0)),this._5I(),this._g3=new Ti(t,this,i,e),this._g3._7T=this._7T.bind(this),this._g3._mH(n)},_5I:function(){this._mE.onAnimationStart()},_7T:function(){this.__delayRender&&(this._mE.pauseRendering(!1),delete this.__delayRender),this._mE.onAnimationEnd()},_fD:function(){return this._g3&&this._g3._fD()},_nA:function(){this._g3&&this._g3._nA()},_kF:function(t,i,e,n){var o=this._fromTX+(this._toTX-this._fromTX)*t,r=this._fromTY+(this._toTY-this._fromTY)*t,s=this._fromScale+(this._toScale-this._fromScale)*t;this._mE.translateTo(o,r,s,this.toInt)},_mO:function(t,i,e,n,o){this._nA();var r,s,h,a,l,_,u=this._mE,c=u.scale;e<=0&&(e=c),t==u.tx&&i==u.ty&&e==c||(n instanceof Object&&(_=n.duration,r=n.maxTime,s=n.animationType),h=u.tx,a=u.ty,_=_||(e!=c?(l=c<e?e/c:c/e,60*(l=Math.log(l)/Math.log(1.3))):at(t,i,h,a)/2),r=r||nt.ANIMATION_MAXTIME,s=s||nt.ANIMATION_TYPE,_=Math.min(r,_),this._fromTX=h,this._fromTY=a,this._fromScale=c,this._toTX=t,this._toTY=i,this._toScale=e,this._8G(this._kF,_,s,o,e!=c))}},nt.INTERACTION_HANDLER_SIZE_TOUCH=8,nt.INTERACTION_HANDLER_SIZE_DESKTOP=4,nt.INTERACTION_ROTATE_HANDLER_SIZE_TOUCH=30,nt.INTERACTION_ROTATE_HANDLER_SIZE_DESKTOP=20;var ur=(Math.PI,0);function cr(t,i){this.interactions=t,this.defaultCursor=i||"default"}function dr(t){_(this,dr,arguments)}function fr(t){_(this,fr,arguments)}function Er(t){this.rect=t.getBounds(),this.points=t.getPortPoints(),this.defaultPoint=t.getDefaultPortPoint()}function gr(t){_(this,gr,arguments)}function vr(t){_(this,vr,arguments)}function pr(t){_(this,pr,arguments)}function yr(t,i,e){var n=t.offsetWidth,o=t.offsetHeight;t.style.left=i-n/2+"px",t.style.top=e-o/2+"px"}function mr(){}_r.prototype={element:null,_$s:!1,setCurrentElement:function(t,i){this.element=t,i&&this.addDataPropertyChangeListener()},onDataPropertyChange:function(t){},addDataPropertyChangeListener:function(){this._$s||(this._$s=!0,this.graph.dataPropertyChangeDispatcher.addListener(this._1S,this))},removeDataPropertyChangeListener:function(){this._$s&&(this._$s=!1,this.graph.dataPropertyChangeDispatcher.removeListener(this._1S,this))},_1S:function(t){this.element&&t.source==this.element&&this.onDataPropertyChange(t)},onElementRemoved:function(t,i){var e,n,o;this.element&&(t==this.element||V(t)&&(e=t,n=this.element,o=!1,L(e,function(t){if(n==t)return!(o=!0)}),o))&&this.destroy(i)},onClear:function(t){this.element&&this.destroy(t)},destroy:function(t){delete this.element,this.removeDataPropertyChangeListener(),this.removeDrawable(),this.drawableList=null},invalidate:function(){this.topCanvas.invalidate()},removeDrawable:function(){this._nBableId&&(this.topCanvas.removeDrawable(this._nBableId),delete this._nBableId,this.invalidate())},drawableList:null,addDrawable:function(){this._nBableId||(this._nBableId=this.topCanvas.addDrawable(this.draw,this).id,this.invalidate())},isShowing:function(){return this._nBableId},draw:function(i,e){this.drawableList&&this.drawableList.forEach(function(t){t.draw(i,e)}),this.doDraw(i,e)},doDraw:function(t,i){},escapable:!0,onkeydown:function(t,i){this.escapable&&27==t.keyCode&&(K(t),this.destroy(i))}},Si.DrawableInteraction=_r,cr.prototype={defaultCursor:"default",getInteractionInstances:function(t){if(!this.interactions)return null;for(var i=[],e=0,n=this.interactions.length;e<n;e++){var o=this.interactions[e];o instanceof Function&&(o=new o(t)),o.install instanceof Function&&o.install(t),i.push(o)}return i}},dr.prototype={_f6:null,_lD:null,destroy:function(t){v(this,dr,"destroy",arguments),delete this._lD,delete this._o3K,delete this._f6},doDraw:function(i,t){var e=this.points;e&&(i.beginPath(),e.forEach(function(t){this.drawPoint(i,t)},this),this.isClosePath&&i.closePath(),this.styleDraw(i))},styleDraw:function(t){var i=function(t,i){if(!t)return i;var e,n={};for(e in t)n[e]=t[e];for(e in i)n[e]===S&&(n[e]=i[e]);return n}(this.graph.interactionProperties,this.getDefaultDrawStyles(this.graph));i.lineWidth&&(t.lineWidth=i.lineWidth,i.lineCap&&(t.lineCap=i.lineCap),i.lineJoin&&(t.lineJoin=i.lineJoin),i.lineDash&&(t.lineDash=i.lineDash,t.lineDashOffset=i.lineDashOffset||0),t.strokeStyle=i.strokeStyle,t.stroke()),i.fillStyle&&(t.fillStyle=i.fillStyle,t.fill())},drawPoint:function(t,i,e){var n,o;e?t.moveTo(i.x,i.y):Si.isArray(i)?(n=i[0],o=i[1],t.quadraticCurveTo(n.x,n.y,o.x,o.y)):t.lineTo(i.x,i.y)},setCurrentPoint:function(t){this.currentPoint=t},addPoint:function(t){this._lD||(this._lD=[],this.addDrawable()),this._lD.push(t),this.invalidate()}},t(dr,_r),q(dr.prototype,{currentPoint:{get:function(){return this._o3K},set:function(t){this._o3K=t,this.invalidate()}},prevPoint:{get:function(){return this._lD&&this._lD.length?this._lD[this._lD.length-1]:null}},points:{get:function(){if(this._o3K&&this._lD&&this._lD.length)return this._lD.concat(this._o3K)}}}),Si.DrawPathInteraction=dr,fr.prototype={_jX:function(t,i){return this.start?this._f7(t,i):this._o60(t,i)},_o60:function(t,i){return t instanceof eo&&i.canLinkFrom(t)},_f7:function(t,i){return t instanceof eo&&i.canLinkTo(t,this.start)},_o3H:function(t,i,e,n){if(this._o6urrentPort)return this._o6urrentPort.nearestPoint(e,n);var o=i.getUI(t);return o&&o.bodyBounds?o.bodyBounds.center:t.location},_dE:function(t,i){this._mC&&(clearTimeout(this._mC),delete this._mC),this._mC=setTimeout(function(t){var i,e;delete this._mC,this.start&&this.currentPoint&&(i=t.x-this.currentPoint.x,e=t.y-this.currentPoint.y,Math.sqrt(i*i+e*e)*this.graph.scale<=2&&this.addPoint(this.currentPoint))}.bind(this,this.toLogicalPoint(t)),nt.LONG_PRESS_INTERVAL)},destroy:function(t){v(this,fr,"destroy",arguments),this.start=null,this.startPort=null,this._mC&&(clearTimeout(this._mC),delete this._mC),this.currentNode=null,this._o6urrentPort=null},ondblclick:function(t,i){this.destroy(i)},finish:function(t,i,e,n){var o;this._lD&&2<=this._lD.length&&(this._lD.shift(),o=new ot,L(this._lD,function(t){var i,e;Si.isArray(t)?(i=t[0],e=t[1],o.add(new Fe(Li.SEGMENT_QUAD_TO,[i.x,i.y,e.x,e.y]))):o.add(new Fe(Li.SEGMENT_LINE_TO,[t.x,t.y]))},this)),i.createEdgeByInteraction(this.start,e,t,o,this.startPort,n),this.destroy(i)},onstart:function(t,i){var e,n;this.start&&(e=t.getData(),n=i.toLogical(t),this._f7(e,i)?this.finish(t,i,e,new Er(i.getUI(e)).nearestPoint(n.x,n.y).port):this.addPoint(n))},startdrag:function(t,i){var e,n,o;this.start||t.responded||(e=t.getData())&&this._o60(e,i)&&(t.responded=!0,this.start=e,n=i.toLogical(t),o=this._o3H(e,i,n.x,n.y),this.startPort=o.port,this.addPoint(o))},ondrag:function(t,i){this.onmousemove(t,i)},enddrag:function(t,i){var e,n;this.start&&(e=this.currentNode||t.getData(),this._f7(e,i)&&(n=i.toLogical(t),this.finish(t,i,e,new Er(i.getUI(e)).nearestPoint(n.x,n.y).port)))},onrelease:function(t,i){ii(t)&&this.destroy(i)},currentNode:null,onmousemove:function(t,i){var e,n,o,r,s,h,a=i.toLogical(t),l=(e=i,n=a.x,o=a.y,r=function(t){return this._jX(t,i)}.bind(this),e.forEachReverseVisibleUI(function(t){var i=t.data;if(i instanceof Si.Node&&(!r||!1!==r(i))&&t.uiBounds.intersectsPoint(n-t.x,o-t.y)&&t.hitTest(n,o,nt.SELECTION_TOLERANCE/e.scale))return s=i,!1}),s);l!=this.currentNode&&(this.currentNode=l,this._o6urrentPort=l?new Er(i.getUI(l)):null,l?(this.addDrawable(),this.drawableList=[this._o6urrentPort]):this.drawableList=null,this.invalidate()),this._o6urrentPort&&(h=this._o6urrentPort.nearestPoint(a.x,a.y),this.invalidate()),this.start&&(this.currentPoint=h||a,ii(t)&&this._dE(t,i))},toLogicalPoint:function(t){return this.graph.toLogical(t)},getDefaultDrawStyles:function(t){return{lineWidth:this.graph.getDefaultStyle(mo.EDGE_WIDTH),strokeStyle:this.graph.getDefaultStyle(mo.EDGE_COLOR),lineDash:this.graph.getDefaultStyle(mo.EDGE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(mo.EDGE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(mo.LINE_CAP),lineJoin:this.graph.getDefaultStyle(mo.LINE_JOIN)}}},t(fr,dr),Si.CreateEdgeInteraction=fr,Er.prototype.drawRect=function(t,i,e){t.beginPath(),t.rect(+e.x,+e.y,e.width+0,e.height+0),t.lineWidth=2/i,t.strokeStyle="#2898E0",t.stroke()},Er.prototype.drawPoint=function(t,i,e){t.beginPath();var n=4/i;t.moveTo(e.x+n,e.y),t.arc(e.x,e.y,n,0,2*Math.PI,!1),t.lineWidth=1/i,e.marked?(t.strokeStyle="#1D4876",t.fillStyle="#E21667"):(t.strokeStyle="#2898E0",t.fillStyle="rgba(255, 255, 255, 0.8)"),t.fill(),t.stroke()},Er.prototype.draw=function(i,e){var t=this.rect;this.drawRect(i,e,t),this.points&&this.points.forEach(function(t){this.drawPoint(i,e,t)}.bind(this))},Er.prototype.nearestPoint=function(o,r,s){if(this.points){s=s||20;var h,a=s*=s;return this.points.forEach(function(t){t.marked&&(t.marked=!1);var i=t.x-o,e=t.y-r,n=i*i+e*e;n<s&&n<a&&(a=n,h=t)}),h&&(h.marked=!0),h||this.defaultPoint}return this.defaultPoint},gr.prototype={getDefaultDrawStyles:function(t){return{lineWidth:this.graph.getDefaultStyle(mo.SHAPE_STROKE),strokeStyle:this.graph.getDefaultStyle(mo.SHAPE_STROKE_STYLE),fillStyle:this.graph.getDefaultStyle(mo.SHAPE_FILL_COLOR)}},finish:function(t,i){var e,o,r,n,s;this._lD&&this._lD.length&&(e=this._lD,n=r=o=0,e.forEach(function(i){Si.isArray(i)?i.forEach(function(t){o+=i.x,r+=i.y,n++}):(o+=i.x,r+=i.y,n++)}),o/=n,r/=n,s=[],e.forEach(function(t,i){var e,n;0!=i?Si.isArray(t)?(e=t[0],n=t[1],s.push(new Fe(Li.SEGMENT_QUAD_TO,[e.x-o,e.y-r,n.x-o,n.y-r]))):s.push(new Fe(Li.SEGMENT_LINE_TO,[t.x-o,t.y-r])):s.push(new Fe(Li.SEGMENT_MOVE_TO,[t.x-o,t.y-r]))}),this.createElement(t,s,o,r),this.destroy(i))},startdrag:function(t,i){t.responded=!0},createElement:function(t,i,e,n){return this.graph.createShapeByInteraction(t,i,e,n)},onstart:function(t,i){var e=i.toLogical(t);this._f6=e,this.addPoint(e)},onmousemove:function(t,i){this._f6&&(this.currentPoint=i.toLogical(t))},ondblclick:function(t,i){if(this._f6){if(this._lD.length<3)return void this.destroy(i);delete this._lD[this._lD.length-1],this.finish(t,i)}},isClosePath:!0},t(gr,dr),Si.CreateShapeInteraction=gr,vr.prototype={isClosePath:!1,createElement:function(t,i,e,n){return this.graph.createLineByInteraction(t,i,e,n)},getDefaultDrawStyles:function(){return{lineWidth:ko[mo.SHAPE_STROKE],strokeStyle:ko[mo.SHAPE_STROKE_STYLE],lineDash:this.graph.getDefaultStyle(mo.SHAPE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(mo.SHAPE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(mo.LINE_CAP),lineJoin:this.graph.getDefaultStyle(mo.LINE_JOIN)}}},t(vr,gr),Si.CreateLineInteraction=vr,pr.prototype={destroy:function(t){v(this,pr,"destroy",arguments),t.cursor="",this.start=null},doDraw:function(t,i){var e,n,o,r;this.start&&this.currentPoint&&(this.graph.interactionProperties&&(e=this.graph.interactionProperties.uiClass,n=this.graph.interactionProperties.edgeType),e=e||this.graph.edgeUIClass||Si.EdgeUI,n=n||this.graph.edgeType,o=e.drawReferenceLine||Si.EdgeUI.drawReferenceLine,(r=this.graph.getUI(this.start))&&r.bodyBounds&&(r=r.bodyBounds.center,t.beginPath(),o(t,r,this.currentPoint,n),this.styleDraw(t)))},canLinkFrom:function(t,i){return t instanceof eo&&i.canLinkFrom(t)},canLinkTo:function(t,i){return t instanceof eo&&i.canLinkTo(t,this.start)},startdrag:function(t,i){var e=t.getData();this.canLinkFrom(e,i)&&(t.responded=!0,this.start=e,i.cursor="crosshair",this.addDrawable())},ondrag:function(t,i){this.start&&(Si.stopEvent(t),this.currentPoint=i.toLogical(t),this.invalidate())},enddrag:function(t,i){var e;this.start&&(this.invalidate(),e=t.getData(),this.canLinkTo(e,i)&&i.createEdgeByInteraction(this.start,e,t),this.destroy(i))},getDefaultDrawStyles:function(){return{lineWidth:this.graph.getDefaultStyle(mo.EDGE_WIDTH),strokeStyle:this.graph.getDefaultStyle(mo.EDGE_COLOR),lineDash:this.graph.getDefaultStyle(mo.EDGE_LINE_DASH),lineDashOffset:this.graph.getDefaultStyle(mo.EDGE_LINE_DASH_OFFSET),lineCap:this.graph.getDefaultStyle(mo.LINE_CAP),lineJoin:this.graph.getDefaultStyle(mo.LINE_JOIN)}}},t(pr,dr),Si.CreateSimpleEdgeInteraction=pr,nt.LABEL_EDITOR_SUBMIT_WHEN_LOST_FOCUS=!1,mr.prototype={html:null,createHTML:function(){var s=d.createElement("textarea");s.className="Q-LabelEditor",s.style.position="absolute",s.style.textAlign="center",s.style.border="solid #08E 1px",s.style.padding="5px",s.style.boxShadow="0px 0px 10px rgba(40, 85, 184, 0.75)",s.style.display="none",s.style.overflow="hidden";var h=this;return s.oninput=function(t){h.onValueChange(t)},s.onkeydown=function(t){27!=t.keyCode||h.cancelEdit()},s.onkeypress=function(t){if(13==t.keyCode||10==t.keyCode){if(t.preventDefault(),t.altKey||t.ctrlKey||t.shiftKey)return e="\n","number"==typeof(i=s).selectionStart&&"number"==typeof i.selectionEnd?(n=i.value,o=i.selectionStart,i.value=n.slice(0,o)+e+n.slice(i.selectionEnd),i.selectionEnd=i.selectionStart=o+e.length):void 0!==d.selection&&((r=d.selection.createRange()).text=e,r.collapse(!1),r.select()),void h.onValueChange(t);h.stopEdit()}var i,e,n,o,r},d.body.appendChild(s),s},setText:function(t,i){this.html.value=t||"",i&&(this.html.style.fontSize=i),function(t){if(m){var i=l.scrollX||l.pageXOffset,e=l.scrollY||l.pageYOffset;return t.select(),l.scrollTo(i,e)}t.select()}(this.html),this.onSizeChange(this.html)},onSizeChange:function(t){t.offsetWidth,t.offsetHeight;var i=function(t){var e=d.createElement("canvas").getContext("2d"),i=getComputedStyle(t,null),n=(n=i.font)||i.fontStyle+" "+i.fontSize+" "+i.fontFamily;e.font=n;var o=t.value.split("\n"),r=parseInt(i.fontSize),s=0,h=0;return Si.forEach(o,function(t){var i=e.measureText(t).width;s<i&&(s=i),h+=1.2*r}),{width:s,height:h}}(t);return t.style.width=i.width+30+"px",t.style.height=i.height+10+"px",i},onValueChange:function(t){var i=t.target;this.onSizeChange(i);i.style.left=i.x-i.offsetWidth/2+"px"},onClickOnWindow:function(t){t.target!=this.html&&(nt.LABEL_EDITOR_SUBMIT_WHEN_LOST_FOCUS?this.stopEdit():this.cancelEdit())},startEdit:function(t,i,e,n,o){this.html||(this.html=this.createHTML()),this.stopEditWhenClickOnWindow||(this.stopEditWhenClickOnWindow=function(t){this.onClickOnWindow(t)}.bind(this)),l.addEventListener("mousedown",this.stopEditWhenClickOnWindow,!0),this.callback=o,this.html.x=t,this.html.y=i,this.html.style.display="block",yr(this.html,t,i),this.setText(e,n||10),yr(this.html,t,i)},isEditing:function(){return"none"!=this.html.style.display},cancelEdit:function(){this.stopEdit(!0)},stopEdit:function(t){var i;this.isEditing()&&(l.removeEventListener("mousedown",this.stopEditWhenClickOnWindow),i=this.html.value,!t&&this.callback&&this.callback(i),this.html.style.display="none",this.html.value=null,this.callback=null)},destroy:function(){this.html&&d.body.removeChild(this.html)}},Si.LabelEditor=mr;function Tr(t){this.graph=t}Tr.prototype={destroy:function(t){t.labelEditor&&(t.labelEditor.destroy(),delete t.labelEditor)},ondblclick:function(t,i){var e,n=t.getData();if(!n)return i.currentSubNetwork?void i.upSubNetwork():void(i.enableDoubleClickToOverview&&(e=i.resetScale||1,Math.abs(i.scale-e)<1e-4?i.zoomToOverview():i.moveToCenter(e)));if(!1!==n.dblclickable){if(i.editable&&i.isEditable(n)){var o=i.hitTest(t);if(o instanceof No&&!1!==o.editable){var r=i.labelEditor;r||(i.labelEditor=r=new mr);var s=o.getBounds();return s=function(t,i,e){t+=l.pageXOffset,i+=l.pageYOffset;var n=e.getBoundingClientRect();return{x:t+n.left,y:i+n.top}}((s=i.toCanvas(s.x+s.width/2,s.y+s.height/2)).x,s.y,i.html),void i.startLabelEdit(n,o,r,s)}}var h=n instanceof co,a=n instanceof Qn&&n.hasEdgeBundle();if(!n._4L||!di(t)&&(h||a))return h?(n.expanded=!n.expanded,void this.graph.onInteractionEvent(new Fr(this.graph,Fr.GROUP_EXPANDED,t,n))):void(a&&this.graph.reverseExpanded(n)&&this.graph.onInteractionEvent(new Fr(this.graph,Fr.EDGE_BUNDLE,t,n)));i.currentSubNetwork=n}}};function Or(t){this.graph=t}Or.prototype={onkeydown:function(t,i){if(i.editable){var e=t.keyCode;if(8==e||46==e||127==e)return i.removeSelectionByInteraction(t),void z(t);di(t)&&(67!=e&&86!=e&&90!=e&&89!=e||z(t))}}},Si.EditInteraction=Or;function Ar(t){this.graph=t}Ar.prototype={onkeydown:function(t,i){var e,n,o;t.metaKey&&83==t.keyCode&&(e=i.exportImage(i.scale,i.viewportBounds),(n=l.open().document).title="export image - "+e.width+" x "+e.height,(o=n.createElement("img")).src=e.data,n.body.appendChild(o),z(t))}};function Sr(t){this.graph=t}function Lr(t){this.graph=t}function wr(t){_(this,wr,arguments),this.handlerSize=G?8:5}function Ir(t){return t.type==Me||t.type==Be}Lr.prototype={onkeydown:function(t,i){di(t)||(37==t.keyCode?(this._6W(i,1,0),z(t)):39==t.keyCode?(this._6W(i,-1,0),z(t)):38==t.keyCode?(this._6W(i,0,1),z(t)):40==t.keyCode&&(this._6W(i,0,-1),z(t)))},_6W:function(t,i,e){t._o46(i,e)},onstart:function(t,i){this._mH&&this.destroy(i)},_mH:!(Sr.prototype={destroy:function(t){delete this.draggingElements,delete this.currentDraggingElement},_2O:function(i){var e=new ot;return i.selectionModel.forEach(function(t){i.isMovable(t)&&i.isVisible(t)&&e.add(t)},this),e},onstart:function(t,i){this.currentDraggingElement&&this.destroy(i)},startdrag:function(t,i){var e,n;t.responded||t.touches&&1!=t.touches.length||((e=t.getData())&&i.isSelected(e)&&i.isMovable(e)?(t.responded=!0,this.currentDraggingElement=e,this.draggingElements=this._2O(i),n=new Fr(i,Fr.ELEMENT_MOVE_START,t,this.currentDraggingElement,this.draggingElements.datas),!1!==i.beforeInteractionEvent(n)?i.onInteractionEvent(n):this.destroy(i)):this.destroy(i))},ondrag:function(t,i){var e,n,o,r;this.currentDraggingElement&&(t.touches&&1!=t.touches.length?this.enddrag(t,i):(K(t),e=t.dx,n=t.dy,e/=o=i.scale,n/=o,r=new Fr(i,Fr.ELEMENT_MOVING,t,this.currentDraggingElement,this.draggingElements.datas),i.moveElements(this.draggingElements.datas,e,n),i.onInteractionEvent(r)))},enddrag:function(t,i){var e,o,r,s,n;this.currentDraggingElement&&(this.draggingElements&&this.draggingElements.length&&(t.shiftKey&&(e=i.toLogical(t),o=e.x,r=e.y,i.forEachReverseVisibleUI(function(t){var i=t.data;if(!this.draggingElements.contains(i)&&t.uiBounds.intersectsPoint(o-t.x,r-t.y)&&t.hitTest(o,r,1)){if(i instanceof Si.Edge){if(!i.enableSubNetwork)return;for(var e=this.draggingElements.length;0<e--;){var n=this.draggingElements.get(e);if(n instanceof Si.Node&&n.linkedWith(i))return}return s=i,!1}return(i.enableSubNetwork||i._jR()&&i.expanded)&&(s=i),!1}},this),s&&this.draggingElements.forEach(function(t){for(var i=t.parent;i;){if(this.draggingElements.contains(i))return;i=i.parent}t.parent=s},this)),n=new Fr(i,Fr.ELEMENT_MOVE_END,t,this.currentDraggingElement,this.draggingElements.datas),i.onInteractionEvent(n)),this.destroy(i))},onpinch:function(t,i){this.currentDraggingElement&&this.enddrag(t,i)},step:1,onkeydown:function(t,i){var e,n,o,r,s;di(t)&&(37==t.keyCode?e=-1:39==t.keyCode?e=1:38==t.keyCode?n=-1:40==t.keyCode&&(n=1),!e&&!n||0!=(o=this._2O(i).datas).length&&(z(t),e=e||0,n=n||0,r=this.step/i.scale,s=new Fr(i,Fr.ELEMENT_MOVE_END,t,null,o),i.moveElements(o,e*r,n*r),i.onInteractionEvent(s)))}}),startdrag:function(t,i){var e;t.responded||(i.stopAnimation(),t.responded=!0,this._mH=!0,i.cursor=ui,e=new Fr(i,Fr.PAN_START,t),i.onInteractionEvent(e))},ondrag:function(t,i){this._mH&&i.translate(t.dx||0,t.dy||0)},enddrag:function(t,i){var e,n,o;this._mH&&(!1!==i.enableInertia&&(e=t.vx,n=t.vy,(.1<Math.abs(e)||.1<Math.abs(n))&&i._o46(e,n)),this.destroy(i),o=new Fr(i,Fr.PAN_END,t),i.onInteractionEvent(o))},startpinch:function(t,i){i.pauseRendering(!0)},onpinch:function(t,i){this._mH=!0;var e,n=t.dScale;n&&(e=i.globalToLocal(t.center),i.zoomAt(n,e.x,e.y,!1))},endpinch:function(t,i){i.pauseRendering(!1)},destroy:function(t){this._mH=!1,t.cursor=null}},wr.prototype={onDataPropertyChange:function(t){this.graph.callLater(function(){this._lB()},this)},destroy:function(){this.graph.cursor=null,this.element&&delete this.element._editting,this._mousePressed=!1,delete this._o3I,delete this._o3K,delete this._o6anEdit,v(this,wr,"destroy",arguments)},_o3I:null,_6E:function(t){this._o3I=t,this.invalidate()},isEndPointEditable:function(t,i){return this.graph.isEndPointEditable(t,i)},drawPoint:function(t,i,e){i.isEndPoint&&!this.isEndPointEditable(this.element,i.isFrom)||(t.beginPath(),i.isControlPoint?t.rect(i.x-this.handlerSize/e,i.y-this.handlerSize/e,this.handlerSize/e*2,this.handlerSize/e*2):t.arc(i.x,i.y,this.handlerSize/e,0,2*Math.PI,!1),t.lineWidth=1/e,t.lineDash=[],t.strokeStyle="#888",t.fillStyle="rgba(255, 255, 0, 0.8)",t.stroke(),t.fill())},_hK:function(t,i,e,n){n?t.moveTo(i,e):t.lineTo(i,e)},doDraw:function(t,i){this.drawLine(t,i)},drawLine:function(s,e){var t,h,a,l;this._o3I&&this._o3I.length&&(t=this._o3I,s.save(),this.element instanceof oo&&(s.translate(this.element.x,this.element.y),this.element.rotate&&s.rotate(this.element.rotate)),h=[],s.beginPath(),l=t.length,t.forEach(function(t,i){if(t.type!=Li.SEGMENT_CLOSE)for(var e=!i||i==l-1,n=0,o=t.points;n+1<o.length;){var r={x:o[n],y:o[n+1],isControlPoint:this._7I(t,n)};e&&(r.isEndPoint=!0,r.isFrom=0==i),h.push(r),this._hK(s,r.x,r.y,null==a),a=r,n+=2}},this),s.lineWidth=1/e,s.lineDash=[2/e,3/e],s.strokeStyle="#555",s.stroke(),h.forEach(function(t,i){this.drawPoint(s,t,e,i)},this),s.restore())},invalidate:function(){this.topCanvas.invalidate()},_3T:function(t){var i;this.element!=t&&(this.element&&this.destroy(),t&&this.isEditable(t)&&((i=this._6F(t,this.graph))&&(this.setCurrentElement(t,!0),t._editting=!0,this._o6anEdit=!0,this._6E(i),this.addDrawable())))},_lB:function(){var t;this.isShowing()&&this.element&&((t=this._6F(this.element,this.graph))?this._6E(t):this.destroy(this.graph))},_6F:function(t,i){if(i.isEditable(t)){var e=t.pathSegments||[];e instanceof ot&&(e=e.toDatas());var n,o,r,s,h,a,l=i.getUI(t);return l instanceof Si.EdgeUI&&(n=l.getEndPointBounds(i.getUI(t.fromAgent)),o=l.getEndPointBounds(i.getUI(t.toAgent)),r=n.center,s=o.center,h=l.getStyle(mo.EDGE_FROM_OFFSET),a=l.getStyle(mo.EDGE_TO_OFFSET),h&&(r.x+=h.x||0,r.y+=h.y||0),a&&(s.x+=a.x||0,s.y+=a.y||0),e.splice(0,0,new Si.PathSegment(Li.SEGMENT_MOVE_TO,[r.x,r.y])),e.push(new Si.PathSegment(Li.SEGMENT_MOVE_TO,[s.x,s.y]))),e}},_jU:function(t,i){var e={x:t-=this.element.x,y:i-=this.element.y};return this.element.rotate&&zo(e,-this.element.rotate),e},isPointAddable:function(t,i){return!0},isPointRemovable:function(t,i,e){return!0},onclick:function(t,i){var e,n,o;i.editable&&t.altKey&&this.element&&((e=this._hL(t,i))&&e.isControlPoint&&!1!==this.isPointRemovable(this.element,e,i)?0<=e.index&&(this.element.removePathSegmentByIndex(e.index),(o=new Fr(i,Fr.POINT_REMOVE,t,this.element)).point=e,i.onInteractionEvent(o)):this.element==t.getData()&&!1!==this.isPointAddable(this.element,i)&&(n=i.toLogical(t),!1!==i.getUI(this.element).addPoint(n.x,n.y,this.handlerSize||2)&&((o=new Fr(i,Fr.POINT_ADD,t,this.element)).point=n,i.onInteractionEvent(o))))},isEditable:function(t){return this.graph.isEditable(t)&&(t instanceof oo||t instanceof Qn&&(!t.isLooped()||t.hasPathSegments()))},ondblclick:function(t,i){var e;i.editable?(e=t.getData())&&e!=this.element&&!e._editting?this._3T(e):this.destroy(i):this.element&&this.destroy(i)},onstart:function(t,i){var e;this._mousePressed=!0,i.editable?t.responded||(this.element&&this._hL(t,i)?t.responded=!0:(e=t.getData())&&i.isResizable(e)&&e instanceof oo?this.element&&e!=this.element&&this.destroy():this._3T(e)):this.element&&this.destroy(i)},onrelease:function(t,i){this._mousePressed=!1,this.element&&(this._o6anEdit=!0)},_o3K:null,_hL:function(t,l){var _=l.toLogical(t);this.element instanceof oo&&(_=this._jU(_.x,_.y));var u,i=l.scale,c=this.handlerSize/i,d=this._o3I,f=d.length,E=this.element instanceof Si.Edge;if(d.forEach(function(t,i){for(var e=0,n=t.points;e+1<n.length;){var o,r,s,h=n[e],a=n[e+1];if(at(_.x,_.y,h,a)<c)return u={oldPoints:n.slice(0),segment:t,index:i,pointIndex:e},E&&--u.index,!E||Ir(t)||0!=i&&i!=d.length-1||(u.isEndPoint=!0,o=0==i,r=(u.isFrom=o)?Si.Styles.EDGE_FROM_OFFSET:Si.Styles.EDGE_TO_OFFSET,s=l.getStyle(this.element,r)||{},u.oldPoints=[s.x||0,s.y||0]),this._7I(t,e)&&(u.isControlPoint=!0,0<i&&(u.prevSegment=d instanceof ot?d.getByIndex(i-1):d[i-1]),i+1<f&&(u.nextSegment=d instanceof ot?d.getByIndex(i+1):d[i+1],u.nextSegment.points&&(u.oldNextPoints=u.nextSegment.points.slice(0)))),!1;e+=2}},this),!u||!u.isEndPoint||this.isEndPointEditable(this.element,u.isFrom))return u},_7I:function(t,i){return i==t.points.length-2},startdrag:function(t,i){var e;this.element&&this._o6anEdit&&(this._o3K=this._hL(t,i),this._o3K&&(this.removeDrawable(),t.responded=!0,(e=new Fr(i,Fr.POINT_MOVE_START,t,this.element)).point=this._o3K,i.onInteractionEvent(e)))},onkeyup:function(t,i){this._mousePressed&&16!=!t.keyCode&&this.element&&this._o3K&&this._o3K.delta&&this._dF(this._o3K.delta.x,this._o3K.delta.y,i,t,!1)},onkeydown:function(t,i){v(this,wr,"onkeydown",arguments),this._mousePressed&&this.element&&this._o3K&&t.shiftKey&&this._o3K.delta&&this._dF(this._o3K.delta.x,this._o3K.delta.y,i,t,!0)},_dF:function(t,i,e,n,o){var r,s,h,a,l,_,u,c,d,f=this._o3K,E=this.element,g=f.oldPoints,v=f.segment;if(f.isEndPoint){var p,y=f.isFrom?Si.Styles.EDGE_FROM_OFFSET:Si.Styles.EDGE_TO_OFFSET,m={x:g[0]+t,y:g[1]+i};return E.setStyle(y,m),(p=new Fr(e,Fr.POINT_MOVING,n,E)).point=f,void e.onInteractionEvent(p)}if(o&&f.isControlPoint&&(r=g[g.length-2]+t,s=g[g.length-1]+i,h=f.prevSegment,a=f.nextSegment,l=20/e.scale,d=c=u=_=Number.MAX_VALUE,h&&(h=h.lastPoint,_=Math.abs(r-h.x),c=Math.abs(s-h.y)),a&&(a=a.lastPoint,u=Math.abs(r-a.x),d=Math.abs(s-a.y)),_<l&&_<u?t+=h.x-r:u<l&&u<_&&(t+=a.x-r),c<l&&c<d?i+=h.y-s:d<l&&d<c&&(i+=a.y-s)),f.isControlPoint&&Ir(v)){for(var T,O=v.points.length-4;O<v.points.length;){var A=g[O]+t,S=g[O+1]+i;v.points[O]=A,v.points[O+1]=S,O+=2}f.nextSegment&&Ir(f.nextSegment)&&(A=(T=f.oldNextPoints)[0]+t,S=T[1]+i,f.nextSegment.points[0]=A,f.nextSegment.points[1]=S)}else{A=g[O=f.pointIndex]+t,S=g[O+1]+i;v.points[O]=A,v.points[O+1]=S}E.firePathChange(),(p=new Fr(e,Fr.POINT_MOVING,n,E)).point=f,e.onInteractionEvent(p)},ondrag:function(t,i){var e,n,o,r,s,h;this.element&&this._o3K&&(e=this._o3K,n=this.element,o=t.totalDeltaX,r=t.totalDeltaY,o/=s=i.scale,r/=s,n.rotate&&(zo(h={x:o,y:r},-n.rotate),o=h.x,r=h.y),e.delta={x:o,y:r},this._dF(o,r,i,t,t.shiftKey))},enddrag:function(t,i){var e;this.element&&this._o3K&&(this.addDrawable(),this._lB(),(e=new Fr(i,Fr.POINT_MOVE_END,t,this.element)).point=this._o3K,i.onInteractionEvent(e))},onmousemove:function(t,i){this.element&&(i.cursor=t.altKey&&(this._hL(t,i)||this.element==t.getData())?"crosshair":null)}},t(wr,_r),nt.SELECTION_RECTANGLE_STROKE=1,nt.SELECTION_RECTANGLE_STROKE_COLOR=J(3724541951),nt.SELECTION_RECTANGLE_FILL_COLOR=J(1430753245),Li.RECTANGLE_SELECTION_MODE_INTERSECT="intersect",Li.RECTANGLE_SELECTION_MODE_CONTAIN="contain",nt.RECTANGLE_SELECTION_MODE=Li.RECTANGLE_SELECTION_MODE_INTERSECT;function br(t){this.graph=t,this.topCanvas=t.topCanvas}br.prototype={onstart:function(t,i){this._mH&&this.destroy(i)},startdrag:function(t,i){t.responded||(t.responded=!0,this._mH=i.toLogical(t),i.cursor="crosshair",this._1AId=this.topCanvas.addDrawable(this._1A,this).id)},ondrag:function(t,i){var e;this._mH&&(K(t),this._end=i.toLogical(t),this.invalidate(),e=new Fr(i,Fr.SELECT_START,t,i.selectionModel),i.onInteractionEvent(e))},enddrag:function(t,i){var e;this._mH&&(this._gUTimer&&(clearTimeout(this._gUTimer),this._gUTimer=null),this._gU(!0),this.destroy(i),e=new Fr(i,Fr.SELECT_END,t,i.selectionModel),i.onInteractionEvent(e))},onpinch:function(t,i){this._mH&&this.enddrag(t,i)},_1A:function(t,i){t.strokeStyle=nt.SELECTION_RECTANGLE_STROKE_COLOR,t.fillStyle=nt.SELECTION_RECTANGLE_FILL_COLOR,t.lineWidth=nt.SELECTION_RECTANGLE_STROKE/i;var e=this._mH.x,n=this._mH.y;t.rect(e,n,this._end.x-e,this._end.y-n),t.fill(),t.stroke()},invalidate:function(){this.invalidateFlag?this.topCanvas.invalidate():(this.invalidateFlag=!0,this._gUTimer=setTimeout(this._gU.bind(this),100))},_gU:function(t){var i,e,n,o,r,s,h,a;this.invalidateFlag=!1,this._gUTimer=null,!this._mH||O&&!t?this.topCanvas.invalidate():(i=Math.min(this._mH.x,this._end.x),e=Math.min(this._mH.y,this._end.y),n=Math.abs(this._mH.x-this._end.x),o=Math.abs(this._mH.y-this._end.y),n&&o?(r=[],s=this.graph.scale,h=this.graph.rectangleSelectionMode,this.graph.forEachVisibleUI(function(t){t._jS&&this.graph.isSelectable(t.$data)&&this.inRectangle(i,e,n,o,t,s,h)&&r.push(t.data)}.bind(this)),this.graph.selectionModel.set(r),this.topCanvas.invalidate(),t||(a=new Fr(this.graph,Fr.SELECT_BETWEEN,null,this.graph.selectionModel),this.graph.onInteractionEvent(a))):this.graph.selectionModel.clear())},inRectangle:function(t,i,e,n,o,r,s){var h=o.getBounds();return!!Et(t,i,e,n,h.x,h.y,h.width,h.height)||(s=s||nt.RECTANGLE_SELECTION_MODE)!=Li.RECTANGLE_SELECTION_MODE_CONTAIN&&function(t,i,e,n,o,r){t-=o.$x,i-=o.$y;var s=o._hG.intersection(t,i,e,n);if(!s)return!1;t=s.x*r,i=s.y*r,e=s.width*r,n=s.height*r,e=Math.round(e)||1,n=Math.round(n)||1;var h=Mi(),a=h.canvas;a.width<e||a.height<n?(a.width=e,a.height=n):(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,e,n)),h.setTransform(1,0,0,1,-t-o.$x*r,-i-o.$y*r),h.scale(r,r),o._l9(h,1);var l=Fi(h,0,0,e,n);if(!l)return!1;for(var _=(l=l.data).length/4;0<_--;)if(l[4*_-1]>$e)return!0;return!1}(t,i,e,n,o,r)},destroy:function(t){this._mH=null,t.cursor=null,this._1AId&&(this.topCanvas.removeDrawable(this._1AId),delete this._1AId,this.topCanvas.invalidate())}};var Dr=f({super:br,onstart:null,startdrag:null,ondrag:null,enddrag:null,accept:function(t,i,e){return!1!==e.enableRectangleSelectionByRightButton},oncontextmenu:function(t,i){i.popupmenu||K(t)},onstart2:function(t,i){br.prototype.onstart.apply(this,arguments)},startdrag2:function(t,i){t.responded||(i.popupmenu&&i.popupmenu.hide instanceof Function&&i.popupmenu.hide(),br.prototype.startdrag.apply(this,arguments))},ondrag2:function(t,i){br.prototype.ondrag.apply(this,arguments)},enddrag2:function(t,i){br.prototype.enddrag.apply(this,arguments)}});function Cr(t){_(this,Cr,arguments),this.handlerSize=G?8:4,this._rotateHandleLength=G?30:20}ur=Math.PI/4;function Rr(t,i){var e=new gt;return e.addPoint(tn.call(t,{x:i.x,y:i.y})),e.addPoint(tn.call(t,{x:i.x+i.width,y:i.y})),e.addPoint(tn.call(t,{x:i.x+i.width,y:i.y+i.height})),e.addPoint(tn.call(t,{x:i.x,y:i.y+i.height})),e}Cr.prototype={_f9:!1,_fB:!1,onDataPropertyChange:function(t){this.graph.callLater(function(){this._o3L()},this)},ondblclick:function(t,i){this.element&&this.destroy(i)},destroy:function(t){t.cursor=null,delete this._dH,delete this._o4ody,delete this._o3K,delete this._o6anEdit,delete this._lD,delete this._rotatePoint,delete this._fB,delete this._f9,delete this._insets,v(this,Cr,"destroy",arguments)},_dH:null,_lD:null,_97:function(t){this._dH=t;var i,e=this._dH.x,n=this._dH.y,o=this._dH.width,r=this._dH.height;this.element instanceof co&&this.element.expanded;this._fB&&((i=[]).push({x:e,y:n,p:pt.LEFT_TOP,cursor:"nwse-resize",rotate:5*ur}),i.push({x:e+o/2,y:n,p:pt.CENTER_TOP,cursor:"ns-resize",rotate:6*ur}),i.push({x:e+o,y:n,p:pt.RIGHT_TOP,cursor:"nesw-resize",rotate:7*ur}),i.push({x:e,y:n+r/2,p:pt.LEFT_MIDDLE,cursor:"ew-resize",rotate:4*ur}),i.push({x:e,y:n+r,p:pt.LEFT_BOTTOM,cursor:"nesw-resize",rotate:3*ur}),i.push({x:e+o,y:n+r/2,p:pt.RIGHT_MIDDLE,cursor:"ew-resize",rotate:0}),i.push({x:e+o/2,y:n+r,p:pt.CENTER_BOTTOM,cursor:"ns-resize",rotate:2*ur}),i.push({x:e+o,y:n+r,p:pt.RIGHT_BOTTOM,cursor:"nwse-resize",rotate:ur}),this._lD=i),this._f9?this._rotatePoint={x:e+o/2,y:n,cursor:"url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAFVJREFUeNpi/P//PwMlgBGfAYyMIOn/jGQZANIMoskyAKYZGeAyiGgX4PIOSWGAzRBGUmMBw1CqGUBMlA1yA4gxhKhYwBnfpKQDqqREquRGYgBAgAEAD8h/4adTIzwAAAAASUVORK5CYII=) 8 8,crosshair"}:this._rotatePoint=null,this.invalidate()},_fC:function(t,i,e,n){t.beginPath();var o=(this.handlerSize-1)/n;t.rect(i-o,e-o,2*o,2*o),t.lineWidth=1/n,t.lineDash=[],t.strokeStyle="#888",t.fillStyle="rgba(255, 255, 255, 0.8)",t.stroke(),t.fill()},_6G:function(t,i,e,n,o,r){o=o||this.handlerSize,r=r||"rgba(0, 255, 0, 1)",t.beginPath(),o/=n,t.arc(i,e,o,0,2*Math.PI,!1),t.lineWidth=1/n,t.lineDash=[],t.strokeStyle="#888",t.fillStyle=r,t.stroke(),t.fill()},_jU:function(t,i){var e={x:t-=this.element.x,y:i-=this.element.y};return this.element.rotate&&zo(e,-this.element.rotate),e},doDraw:function(i,e){var t,n,o,r,s,h;this._dH&&(i.save(),i.translate(this.element.x,this.element.y),this.element.rotate&&i.rotate(this.element.rotate),this._rotatePoint&&(this._6G(i,0,0,e,3,"#FF0"),t=this._rotatePoint.x,n=this._rotatePoint.y-this._rotateHandleLength/e,i.beginPath(),i.moveTo(t,this._rotatePoint.y),i.lineTo(t,n),i.lineWidth=1/e,i.strokeStyle="#555",i.stroke(),this._6G(i,t,n,e)),this._lD&&(o=this._dH.x,r=this._dH.y,s=this._dH.width,h=this._dH.height,i.beginPath(),i.rect(o,r,s,h),i.lineWidth=1/e,i.lineDash=[2/e,3/e],i.strokeStyle="#555",i.stroke(),L(this._lD,function(t){this._fC(i,t.x,t.y,e)},this)),i.restore())},_o3L:function(){var t,i,e;this.isShowing()&&this.element&&(t=this.graph.getUI(this.element),this._o4ody=t.body,i=Rr(this._o4ody,this._o4ody._l2),e=Rr(this._o4ody,this._o4ody._8Y),this._insets=new vt(i.y-e.y,i.x-e.x,e.bottom-i.bottom,e.right-i.right),this._97(e))},_o62:function(t,i,e){return i.isResizable(t)},_o64:function(t,i){return(!(t instanceof co)||!t.expanded)&&i.isRotatable(t)},_dJ:function(t,i){return t instanceof eo&&i.isEditable(t)},onstart:function(t,i){if(i.editable){if(!t.responded){var e,n,o=i.getUI(t),r=t.getData();if(r!=this.element){if(this.element){if(this._hL(t,i))return void(t.responded=!0);this.destroy(i)}r&&!r._editting&&this._dJ(r,i)&&(e=this._o62(r,i,o),n=this._o64(r,i,o),(e||n)&&(this.setCurrentElement(r,!0),this.addDrawable(),this._fB=e,this._f9=n,this._o3L()))}}}else this.element&&this.destroy(i)},onrelease:function(t,i){this.element&&(this._o6anEdit=!0,this.addDrawable(),i.callLater(function(){this._o3L()},this))},_o3K:null,_hL:function(t,i){var e,n=i.toLogical(t),n=this._jU(n.x,n.y),o=i.scale,r=this.handlerSize/o;if(this._rotatePoint){var s=this._rotatePoint.x,h=this._rotatePoint.y-this._rotateHandleLength/o;if(at(n.x,n.y,s,h)<r)return this._rotatePoint}if(this._lD&&this._lD.length)return L(this._lD,function(t,i){if(at(n.x,n.y,t.x,t.y)<r)return e=t,!1},this),e},onmousemove:function(t,i){var e,n;this.element&&((e=this._hL(t,i))?e!=this._rotatePoint&&this.element.rotate?(n=e.rotate+this.element.rotate,i.cursor=function(t){t%=2*Math.PI;var i=Math.round(t/ur);return 0==i||4==i?"ew-resize":1==i||5==i?"nwse-resize":2==i||6==i?"ns-resize":"nesw-resize"}(n)):i.cursor=e.cursor:i.cursor=null)},startdrag:function(t,i){if(this.element&&(this.removeDrawable(),this._o6anEdit&&(this._o3K=this._hL(t,i),this._o3K))){var e;if(t.responded=!0,this._o3K==this._rotatePoint)return this._o3K.start=i.toLogical(t),this._o3K.rotate=this.element.rotate||0,(e=new Fr(i,Fr.ROTATE_START,t,this.element)).value=this.element.rotate,void i.onInteractionEvent(e);(e=new Fr(i,Fr.RESIZE_START,t,this.element)).point=this._o3K,i.onInteractionEvent(e)}},_7K:function(t,s,h,i,e,n){var o=this._dH,a=o.x,l=o.y,r=o.width,_=o.height;n&&(i!=r?e=i*_/r:i=e*r/_);var u=t.path.segments,c=i/r,d=e/_,f=-a*c+s,E=-l*d+h;u.forEach(function(t){if(t.type!=Li.SEGMENT_CLOSE){var i=t.points;if(i&&i.length)for(var e=0,n=i.length;e<n;e+=2){var o=i[e],r=i[e+1];i[e]=(o-a)*c+s-f,i[e+1]=(r-l)*d+h-E}}}),this._dH.set(s-f,h-E,i,e),t.setLocation(t.x+f,t.y+E),t.firePathChange()},_o3M:function(t,i,e,n,o,r){this._dH.set(i,e,n,o),t.minSize={x:i,y:e,width:n,height:o}},_4S:function(t,i,e,n,o){if(this.element instanceof co&&this.element.expanded)return this._o3M(this.element,t,i,e,n,o);if(this.element instanceof oo)return this._7K(this.element,t,i,e,n,o);var r,s,h=this._o4ody instanceof No;!h&&o&&(r=this._dH,s=this._o4ody.originalBounds,e!=r.width?n=e*s.height/s.width:e=n*s.width/s.height);var a,l,_,u=this.element.anchorPosition,c=new ct(e-this._insets.left-this._insets.right,n-this._insets.top-this._insets.bottom);c.width<1&&(e=this._insets.left+this._insets.right+1,c.width=1),c.height<1&&(n=this._insets.top+this._insets.bottom+1,c.height=1),h?this.element.setStyle(mo.LABEL_SIZE,c):this.element.size=c,u?(a=(_=Lt(u,e,n)).x+t-(this._o4ody.offsetX||0),l=_.y+i-(this._o4ody.offsetY||0),this._dH.set(t-a,i-l,e,n),this.element.rotate&&(a=(_=zo({x:a,y:l},this.element.rotate)).x,l=_.y),this.element.x+=a,this.element.y+=l):(a=this._dH.x*e/this._dH.width-t,l=this._dH.y*n/this._dH.height-i,this._dH.set(t+a,i+l,e,n),this.element.rotate&&(a=(_=zo({x:a,y:l},this.element.rotate)).x,l=_.y),this.element.x-=a,this.element.y-=l)},ondrag:function(t,i){if(this.element&&this._o3K){if(this._o3K==this._rotatePoint){var e=i.toLogical(t),n=(r=e.x,s=e.y,h=this.element.x,a=this.element.y,l=this._o3K.start.x,_=this._o3K.start.y,u=!0,c=se(h,a,r,s)-se(h,a,l,_),u||(c<0&&(c=-c),c>Math.PI&&(c-=Math.PI)),c);n+=this._o3K.rotate||0,t.shiftKey&&(n=Math.round(n/Math.PI*4)*Math.PI/4);var o=this.element.rotate;return this.element.rotate=n%(2*Math.PI),(g=new Fr(i,Fr.ROTATING,t,this.element)).oldValue=o,g.value=this.element.rotate,void i.onInteractionEvent(g)}var r,s,h,a,l,_,u,c,d=t.dx,f=t.dy,E=i.scale;d/=E,f/=E,this.element.rotate&&(zo(e={x:d,y:f},-this.element.rotate),d=e.x,f=e.y);var g,v=this._o3K.p,p=this._dH,y=p.x,m=p.y,T=p.width,O=p.height;v.horizontalPosition==yt?T<=d?(y+=T,T=d-T||1):(y+=d,T-=d):v.horizontalPosition==mt&&(T<=-d?y-=T=-d-T||1:T+=d),v.verticalPosition==Tt?O<=f?(m+=O,O=f-O||1):(m+=f,O-=f):v.verticalPosition==Ot&&(O<=-f?m-=O=-f-O||1:O+=f),this._4S(y,m,T,O,t.shiftKey),(g=new Fr(i,Fr.RESIZING,t,this.element)).point=this._o3K,i.onInteractionEvent(g)}},enddrag:function(t,i){if(this.element&&this._o3K){var e;if(this._o3K==this._rotatePoint)return(e=new Fr(i,Fr.ROTATE_END,t,this.element)).value=this.element.rotate,void i.onInteractionEvent(e);(e=new Fr(i,Fr.RESIZE_END,t,this.element)).point=this._o3K,i.onInteractionEvent(e)}}},t(Cr,_r),Si.ResizeInteraction=Cr;function xr(t){this.graph=t}function Pr(){}xr.prototype={onstart2:function(t,i){this.onstart(t,i)},onstart:function(t,i){var e,n;t.responded||((e=t.getData())&&!i.isSelectable(e)&&(e=null),e&&di(t)?(i.reverseSelect(e),n=new Fr(i,Fr.SELECT,t,i.selectionModel),i.onInteractionEvent(n)):e&&i.selectionModel.isSelected(e)||(e?(i.setSelection(e),i.sendToTop(e)):i.setSelection(null),n=new Fr(i,Fr.SELECT,t,i.selectionModel),i.onInteractionEvent(n)))},onkeydown:function(t,i){27!=t.keyCode?di(t)&&65==t.keyCode&&(i.selectAll(),z(t)):i.unSelectAll()}},nt.TOOLTIP_DURATION=0,nt.TOOLTIP_DELAY=1e3,Pr.CLASS_NAME="Q-Tooltip",Pr.CURSOR_OFFSET_X=0,Pr.CURSOR_OFFSET_Y=15,Kt("."+Pr.CLASS_NAME,{"user-select":"none","background-color":"#FFFFCA",overflow:"hidden","box-shadow":"0 5px 10px rgba(136, 136, 136, 0.5)",color:"#000","pointer-events":"none",border:"1px solid #D9D9D9",padding:"2px 4px",display:"block",position:"absolute"}),Pr.getInstance=function(){return Pr.instance||(Pr.instance=new Pr)},Pr.show=function(t,i,e){Pr.getInstance().show(t,i,e)},Pr.hide=function(){Pr.getInstance().hide()},Pr.prototype={getTooltipElement:function(){var t=this._n2;return t||((t=d.createElement("div")).className=Pr.CLASS_NAME,this._n2=t,d.body.appendChild(t)),t},update:function(t,i){var e,n;this.isShowing()&&(e="text"==i,t&&!e&&(t=t.replace(/\n/g,"<br>")),n=this.getTooltipElement(),e?n.textContent=t||"":n.innerHTML=t||"",function(t,i,e){var n=d.documentElement,o=new gt(l.pageXOffset,l.pageYOffset,n.clientWidth-2,n.clientHeight-2),r=t.offsetWidth,s=t.offsetHeight;i+r>o.x+o.width&&(i=o.x+o.width-r);e+s>o.y+o.height&&(e=o.y+o.height-s);i<o.x&&(i=o.x);e<o.y&&(e=o.y);t.style.left=i+"px",t.style.top=e+"px"}(n,this._info.x+Pr.CURSOR_OFFSET_X,this._info.y+Pr.CURSOR_OFFSET_Y))},setTooltip:function(t,i){if(!t||!t.content)return this._info=null,this._n2&&(this._n2.style.display="none"),void(this._o3N=Date.now());this._o3N=null,this._info=t,this.getTooltipElement().style.display="",this.update(this._info.content,this._info.type),isNaN(i)&&(i=nt.TOOLTIP_DURATION),i&&this.startTimer(this.setTooltip.bind(this,!1),i)},_o3N:null,_mC:null,stopTimer:function(){this._mC&&(clearTimeout(this._mC),this._mC=null)},startTimer:function(t,i){this.stopTimer(),this._mC=setTimeout(function(t){this._mC=null,t()}.bind(this,t),i)},show:function(t,i,e){this.isShowing()||this._o3N&&Date.now()-this._o3N<1e3?this.setTooltip(t,e):(isNaN(i)&&(i=nt.TOOLTIP_DELAY),i?this.startTimer(this.setTooltip.bind(this,t,e),i):this.setTooltip(t,e))},isShowing:function(){return this._n2&&"none"!==this._n2.style.display},hide:function(){this.stopTimer(),this.isShowing()&&this.setTooltip(!1)}};function Nr(t){this.graph=t}Nr.prototype={onstart:function(t,i){this.destroy(i)},_kG:null,onmousemove:function(t,i){var e,n;i.enableTooltip&&((n=(e=t.getData())?i.getTooltip(e,t):null)?Pr.show({target:e,content:n,type:e.tooltipType,x:t.pageX,y:t.pageY},i.tooltipDelay,i.tooltipDuration):Pr.hide())},destroy:function(t){Pr.hide()}};function Mr(t){this.graph=t}function Br(t){this._kN=t,this.action=function(t){if(this._mC&&(this._isFrameTimer?(cancelAnimationFrame(this._mC),this._isFrameTimer=null):clearTimeout(this._mC),this._mC=null),!0!==t&&!1!==t)return t?void(this._mC=setTimeout(function(){this._kN(),this._mC=null}.bind(this),t)):(this._isFrameTimer=!0,void(this._mC=requestAnimationFrame(function(){this._kN(),this._mC=null,this._isFrameTimer=null}.bind(this))));this._kN()}}Mr.prototype={destroy:function(t){this.delayAction&&(this.delayAction=null)},onmousewheel:function(t,i){var e;!1!==i.enableWheelZoom&&t.delta&&(Si.stopEvent(t),i.stopAnimation(),i.delayedRendering&&(e=(e=this.delayAction)||(this.delayAction=new Br(function(){i.pauseRendering(!1)})),i.pauseRendering(!0),e.action(100)),i.zoomByMouseEvent(t,t.delta,!1))}};function Gr(t){this.graph=t}Gr.prototype={onclick:function(t,i){i.zoomByMouseEvent(t,!di(t))}};function kr(t){this.graph=t}function Fr(t,i,e,n,o){this.source=t,this.type="interaction",this.kind=i,this.event=e,this.data=n,this.datas=o}function $r(t){this._4T={},this._mE=t,this._mE._1O.addListener(this._o3O,this),this.currentMode=Li.INTERACTION_MODE_DEFAULT}kr.prototype={onclick:function(t,i){i.zoomByMouseEvent(t,di(t))}},t(Fr,It),Fr.ELEMENT_MOVE_START="element.move.start",Fr.ELEMENT_MOVING="element.moving",Fr.ELEMENT_MOVE_END="element.move.end",Fr.ELEMENT_CREATED="element.created",Fr.ELEMENT_REMOVED="element.removed",Fr.POINT_MOVE_START="point.move.start",Fr.POINT_MOVING="point.moving",Fr.POINT_MOVE_END="point.move.end",Fr.POINT_ADD="point.add",Fr.POINT_REMOVE="point.remove",Fr.RESIZE_START="resize.start",Fr.RESIZING="resizing",Fr.RESIZE_END="resize.end",Fr.ROTATE_START="rotate.start",Fr.ROTATING="rotating",Fr.ROTATE_END="rotate.end",Fr.PAN_START="pan.start",Fr.PAN_END="pan.end",Fr.GROUP_EXPANDED="group.expanded",Fr.EDGE_BUNDLE="edge.bundle",Fr.SELECT="select",Fr.SELECT_START="select.start",Fr.SELECT_BETWEEN="select.between",Fr.SELECT_END="select.end",Fr.LONG_CLICK="long.click",q($r.prototype={_o3O:function(t){if(this._interactionSupport)switch(t.kind){case Bt.KIND_REMOVE:this._interactionSupport._4W(t.data);break;case Bt.KIND_CLEAR:this._interactionSupport._7Q(t.data)}},destroy:function(){delete this._mE,delete this._4T,this._interactionSupport&&(this._interactionSupport._jD(),delete this._interactionSupport)},_mE:null,_4T:null,defaultMode:null,_hM:function(t,i,e){this._4T[t]=new cr(i,e),t==this.currentMode&&this._interactionSupport._7S(i)},addCustomInteraction:function(t){this._interactionSupport._$a(t)},removeCustomInteraction:function(t){this._interactionSupport._4(t)},_nS:function(t){var i=this._4T[t];return i||Yr[t]}},{defaultCursor:{get:function(){if(this.currentInteractionMode)return this.currentInteractionMode.defaultCursor}},currentMode:{get:function(){return this._o6urrentMode},set:function(t){this._o6urrentMode!=t&&(this._o6urrentMode,this._interactionSupport||(this._interactionSupport=new ci(this._mE)),this._o6urrentMode=t,this.currentInteractionMode=this._nS(this._o6urrentMode),this._mE.cursor=this.defaultCursor,this.currentInteractionMode?this._interactionSupport._7S(this.currentInteractionMode.getInteractionInstances(this._mE)):this._interactionSupport._7S([]))}}});var Yr={};nt.registerInteractions=function(t,i,e){var n=new cr(i,e);Yr[t]=n},Li.INTERACTION_MODE_VIEW="view",Li.INTERACTION_MODE_DEFAULT="default",Li.INTERACTION_MODE_SELECTION="selection",Li.INTERACTION_MODE_ZOOMIN="zoomin",Li.INTERACTION_MODE_ZOOMOUT="zoomout",Li.INTERACTION_MODE_CREATE_SIMPLE_EDGE="create.simple.edge",Li.INTERACTION_MODE_CREATE_EDGE="create.edge",Li.INTERACTION_MODE_CREATE_SHAPE="create.shape",Li.INTERACTION_MODE_CREATE_LINE="create.line",nt.registerInteractions(Li.INTERACTION_MODE_VIEW,[xr,Lr,Mr,Ar,Tr,Nr,Dr]),nt.registerInteractions(Li.INTERACTION_MODE_CREATE_SIMPLE_EDGE,[Or,pr,xr,Lr,Mr,Ar,Nr]),nt.registerInteractions(Li.INTERACTION_MODE_CREATE_EDGE,[Or,wr,xr,fr,Lr,Mr,Ar,Nr]),nt.registerInteractions(Li.INTERACTION_MODE_CREATE_SHAPE,[Or,gr,xr,Lr,Mr,Ar,Nr]),nt.registerInteractions(Li.INTERACTION_MODE_CREATE_LINE,[vr,xr,Lr,Mr,Ar,Nr]),nt.registerInteractions(Li.INTERACTION_MODE_DEFAULT,[Or,wr,Cr,xr,Sr,Lr,Mr,Ar,Tr,Nr,Dr]),nt.registerInteractions(Li.INTERACTION_MODE_SELECTION,[Or,wr,Cr,xr,Sr,br,Lr,Mr,Ar,Tr,Nr]),nt.registerInteractions(Li.INTERACTION_MODE_ZOOMIN,[Mr,Ar,Gr],li),nt.registerInteractions(Li.INTERACTION_MODE_ZOOMOUT,[Mr,Ar,kr],_i),Si.PanInteraction=Lr,Si.SelectionInteraction=xr,Si.MoveInteraction=Sr,Si.WheelZoomInteraction=Mr,Si.DoubleClickInteraction=Tr,Si.ExportInteraction=Ar,Si.TooltipInteraction=Nr,Si.RectangleSelectionInteraction=br,Si.RectangleSelectionInteractionByRightButton=Dr,Si.PointsInteraction=wr;function Ur(t){this.graph=t}(Si.Layouter=Ur).prototype={getNodeBounds:function(t){return this.graph.getUIBounds(t)},isLayoutable:function(t,i){return this.graph.isVisible(t)&&!1!==t.layoutable},getLayoutResult:function(t){},updateLocations:function(t,i,e,n,o){var r,s,h;if(!0===i)return this.animate||(this.animate=new ss),e&&(this.animate.duration=e),n&&(this.animate.animationType=n),this.animate.locations=t,o&&(r=o,s=this,o=function(){r.call(s,t)}),void this.animate.start(o);for(h in t){var a=t[h];a.node.setLocation(a.x,a.y)}o&&o.call(this,t)},_hO:function(t){var i,e,n,o=null;t&&(i=t.byAnimate,o=t.callback,e=t.duration,n=t.animationType);var r=this.getLayoutResult(t);return!!r&&(this.updateLocations(r,i,e,n,o),r)},doLayout:function(t,i){if(!this.graph||!0===i)return this._hO(t);this.graph.callLater(function(){this._hO(t)},this)}};Li.DIRECTION_RIGHT=110,Li.DIRECTION_LEFT=120,Li.DIRECTION_CENTER=130,Li.DIRECTION_BOTTOM=210,Li.DIRECTION_TOP=220,Li.DIRECTION_MIDDLE=230,Li.DIRECTION_RIGHT_TOP=111,Li.DIRECTION_RIGHT_BOTTOM=112,Li.DIRECTION_LEFT_TOP=121,Li.DIRECTION_LEFT_BOTTOM=122,Li.DIRECTION_BOTTOM_LEFT=211,Li.DIRECTION_BOTTOM_RIGHT=212,Li.DIRECTION_TOP_LEFT=221,Li.DIRECTION_TOP_RIGHT=222;var Hr="even",Vr="two.side";function zr(t){return 100<=t&&t<200}Li.LAYOUT_TYPE_EVEN=Hr,Li.LAYOUT_TYPE_EVEN_HORIZONTAL="even.h",Li.LAYOUT_TYPE_EVEN_VERTICAL="even.v",Li.LAYOUT_TYPE_TWO_SIDE=Vr,Si.isHorizontalDirection=zr;function Wr(t){this.graph=t}Wr.prototype={hGap:50,vGap:50,parentChildrenDirection:210,layoutType:Hr,defaultSize:{width:50,height:60},getNodeSize:function(t){if(this.graph._9K._o4U){var i=this.graph.getUI(t);if(i)return i._hG}return t.image&&t.image.bounds?{width:t.image.bounds.width,height:t.image.bounds.height}:this.defaultSize},_e4:function(t,i){var e,n,o,r=t.id;r in this._o48||this.isLayoutable(t)&&(n=(e=this.getNodeSize(t))instanceof gt?[-e.x,-e.y]:[e.width/2,e.height/2],t.parentChildrenDirection,o=i?this._o48[i.id]:this._o6J,this._o48[r]=new Kr(this,this.getHGap(t),this.getVGap(t),this.getLayoutType(t),t.parentChildrenDirection,o,t,e.width,e.height,n))},getHGap:function(t){return t&&U(t.hGap)?t.hGap:this.hGap},getVGap:function(t){return t&&U(t.vGap)?t.vGap:this.vGap},getLayoutType:function(t){return t&&t.layoutType?t.layoutType:this.layoutType},_o48:null,_o6J:null,_mK:function(){this._o48=null,this._o6J=null},compareFn:null,getLayoutResult:function(t){var i,e,n,o,r=this.graph;t instanceof Object&&(i=t.x,e=t.y,r=t.root||this.graph,n=t.bounds,o=t.undirected),this._o48={},this._o6J=new Kr(this),this._o6J._nT(this.hGap,this.vGap,this.parentChildrenDirection,this.layoutType);var s={};return ls(r,this._e4,this,!1,o)&&(this._o6J._hO(i||0,e||0,s),n&&n.set(this._o6J.x,this._o6J.y,this._o6J.width,this._o6J.height)),this._mK(),s},doLayout:function(t,i){var e,n;return U(t)&&(e=t,n=0,U(i)&&(n=i),t={x:e,y:n},i=!0),v(this,Wr,"doLayout",[t,i])}},t(Wr,Ur);var Kr=function(t,i,e,n,o,r,s,h,a,l){this._iM=t,this._nG=i||0,this._nI=e||0,this.layoutType=n,this.parentChildrenDirection=o,(this.parentBounds=r)&&r._iO(this),this.node=s,this._g5=h,this._e6=a,this._o3nchorLocation=l};function Xr(t){this.graph=t,this.currentMovingNodes={}}Kr.prototype={_iM:null,_nT:function(t,i,e,n){this._nG=t,this._nI=i,this.parentChildrenDirection=e,this.layoutType=n},_9M:function(){this._hE=[]},_nG:0,_nI:0,_hE:null,_g5:0,_e6:0,layoutType:null,parentChildrenDirection:null,_iO:function(t){this._hE||(this._hE=[]),this._hE.push(t)},_e8:function(i,e,t,n,o){var r=new gt;return t(this._hE,function(t){t._4F(i,e),r.add(t),n?i+=t.width+this._nG:e+=t.height+this._nI},this),r},_9O:function(e,n,t,o,i){var r,s=o?this._nG:this._nI,h=o?this._nI:this._nG,a=o?"width":"height",l=o?"height":"width",_=o?"_g5":"_e6",u=o?"_e6":"_g5",c=o?"hostDX":"hostDY",d=o?"hostDY":"hostDX",f=new gt,E=0,g=0,v=[],p=0,y=0;t(this._hE,function(t){var i=g<=y;t._inheritedParentChildrenDirection=i?o?120:220:o?110:210,t._4F(e,n),i?(v.push(t),E=Math.max(E,t[a]),g+=t[l]+h):((r=r||[]).push(t),p=Math.max(p,t[a]),y+=t[l]+h)},this),g-=h,y-=h;var m=Math.max(g,y),T=s,O=0;this.node&&(i&&(T+=this[_]+s,m>this[u]?this[d]=(m-this[u])/2:O=(this[u]-m)/2),this[c]=E+T/2-this[_]/2);var A,S=O;return L(v,function(t){o?t.offset(E-t[a],S):t.offset(S,E-t[a]),S+=h+t[l],f.add(t)},this),r&&(S=O,A=E+T,L(r,function(t){o?t.offset(A,S):t.offset(S,A),S+=h+t[l],f.add(t)},this)),f},offset:function(t,i){this.x+=t,this.y+=i,this.nodeX+=t,this.nodeY+=i,this._8I(t,i)},_o6L:function(t,i){return 2*this.cx-t-i-t},_o6N:function(t,i){return 2*this.cy-t-i-t},_nJ:function(t){if(this._hE&&0!=this._hE.length){if(t)return this.node&&(this.nodeX+=this._o6L(this.nodeX,this._g5)),void L(this._hE,function(t){t.offset(this._o6L(t.x,t.width),0)},this);this.node&&(this.nodeY+=this._o6N(this.nodeY,this._e6)),L(this._hE,function(t){t.offset(0,this._o6N(t.y,t.height))},this)}},_8I:function(i,e){this._hE&&L(this._hE,function(t){t.offset(i,e)},this)},_4F:function(t,i){var e;this.x=t||0,this.y=i||0,this._hE&&0!=this._hE.length?(this._iM&&this._iM.compareFn&&(e=this._iM.compareFn,this._hE.sort(function(t,i){return e(t.node,i.node)})),this._22(this.x,this.y,this.layoutType)):this.node&&(this.width=this._g5,this.height=this._e6,this.nodeX=this.x,this.nodeY=this.y)},_8J:function(i){var t,e,n;this.node&&(e=(t=this._o3nchorLocation)[0],n=t[1],i[this.node.id]={node:this.node,x:this.nodeX+e,y:this.nodeY+n,left:this.nodeX,top:this.nodeY,width:this._g5,height:this._e6}),this._hE&&L(this._hE,function(t){t._8J(i)},this)},_hO:function(t,i,e){this._4F(t,i),this._8J(e)},_22:function(t,i,e){var n,o=t,r=i;!this.parentChildrenDirection&&this.parentBounds&&(this.parentChildrenDirection=this._inheritedParentChildrenDirection||this.parentBounds.parentChildrenDirection);var s,h,a=this.parentChildrenDirection,l=zr(a);this.node&&(s=120==(h=a)||122==h||121==h||220==h||221==h||222==h,(n=130==a||230==a)||(l?t+=this._g5+this._nG:i+=this._e6+this._nI));var _,u,c,d=this.node&&this.node.layoutReverse?g:L,f=0,E=0;(u=e==Vr?this._9O(t,i,d,!l,n):(_=e==Hr?!l:"even.h"==e,this._e8(t,i,d,_,n)))&&!u.isEmpty()&&(f=u.width,E=u.height,this.add(u)),this.node&&(this.nodeX=o,this.nodeY=r,this.hostDX!==S||this.hostDY!==S?(this.nodeX+=this.hostDX||0,this.nodeY+=this.hostDY||0):(c=210==a||220==a||120==a||110==a?1:212==a||222==a||122==a||112==a?0:2,l?(1==c?this.nodeY+=E/2-this._e6/2:2==c&&(this.nodeY+=E-this._e6),r>this.nodeY&&this.offset(0,r-this.nodeY)):(1==c?this.nodeX+=f/2-this._g5/2:2==c&&(this.nodeX+=f-this._g5),o>this.nodeX&&this.offset(o-this.nodeX,0))),this.addRect(this.nodeX,this.nodeY,this._g5,this._e6),s&&this._nJ(l))},node:null,uiBounds:null},t(Kr,gt),Xr.prototype={layoutDatas:null,isMovable:function(t){return!this.currentMovingNodes[t.id]},_7M:!1,_3U:function(){this._7M=!0,this.graph._1O.addListener(this._o3P,this),this.graph._1G.addListener(this._2G,this)},_1T:function(){this._7M=!1,this.graph._1O.removeListener(this._o3P,this),this.graph._1G.removeListener(this._2G,this)},invalidateFlag:!0,invalidateLayoutDatas:function(){this.invalidateFlag=!0},resetLayoutDatas:function(){return this.invalidateFlag=!1,this.layoutDatas=function(){var e,n,o={},r=[],s=0,h={},a=0;this.graph.forEach(function(t){if(this.isLayoutable(t))if(t instanceof eo){var i={node:t,id:t.id,x:t.x+Math.random(),y:t.y+Math.random()};for(this.appendNodeInfo&&this.appendNodeInfo(t,i),o[t.id]=i,r.push(i),s++,n=t.parent;n instanceof co;){((e=e||{})[n.id]||(e[n.id]={id:n.id,children:[]})).children.push(i),n=n.parent}}else{t instanceof Qn&&!t.isLooped()&&t.fromAgent&&t.toAgent&&(i={edge:t},h[t.id]=i,a++)}},this);var t,i={};for(t in h){var l,_,u=h[t],c=u.edge,d=c.fromAgent,f=c.toAgent,E=d.id+"-"+f.id,g=f.id+"-"+d.id;o[d.id]&&o[f.id]&&!i[E]&&!i[g]?(l=o[d.id],_=o[f.id],u.from=l,u.to=_,i[E]=u,this.appendEdgeInfo&&this.appendEdgeInfo(c,u)):(delete h[t],a--)}return{groups:e,nodesArray:r,nodes:o,nodeCount:s,edges:h,edgeCount:a,minEnergy:this.minEnergyFunction(s,a)}}.call(this)},_2G:function(t){Fr.ELEMENT_MOVE_START==t.kind?(this.currentMovingNodes={},t.datas.forEach(function(t){this.currentMovingNodes[t.id]=t},this)):Fr.ELEMENT_MOVE_END==t.kind&&(this.currentMovingNodes={})},_o3P:function(t){this.invalidateLayoutDatas()},isRunning:function(){return this.timer&&this.timer._fD()},getLayoutResult:function(t){this.stop(),this.resetLayoutDatas();for(var i=this.getMaxIterations(this.layoutDatas.nodeCount||0,this.layoutDatas.edgeCount||0),e=0;e<i&&!1!==this.step(!1);e++);var n=this.layoutDatas.nodes;return this.onstop(),n},_n5:function(){return!1},step:function(t){if(!1===t)return this._n5(this.timeStep);!this.invalidateFlag&&this.layoutDatas||this.resetLayoutDatas();var i,e=this._n5(t),n=this.layoutDatas.nodes;for(i in n){var o=n[i],r=o.node;this.isMovable(r)?r.setLocation(o.x,o.y):(o.x=r.x,o.y=r.y,o.vx=0,o.vy=0)}return e},onstop:function(){delete this.layoutDatas},start:function(t){if(this.isRunning())return!1;this._7M||this._3U(),this._lIr||(this._lIr=function(t){return this.step(t)}.bind(this)),this.invalidateLayoutDatas(),this.timer=new Ei(this._lIr);var i=this;return this.timer._mH(function(){i.onstop(),t&&t()}),!0},stop:function(){this.timer&&(this.timer._nA(),this.onstop())},getMaxIterations:function(t,i){return Math.min(1e3,3*t+10)},minEnergyFunction:function(t,i){return 10+Math.pow(t+i,1.4)},resetGraph:function(){this._7M||this._3U(),this.resetLayoutDatas()},destroy:function(){this.stop(),this._1T()}},t(Xr,Ur);function jr(t,i,e,n){this.graph=t,U(i)&&(this.radius=i),U(e)&&(this.gap=e),U(n)&&(this.startAngle=n)}Si.BalloonLayouter=jr;var Zr="proportional",Jr="regular",Qr="variable";Li.ANGLE_SPACING_PROPORTIONAL=Zr,Li.ANGLE_SPACING_REGULAR=Jr,Li.RADIUS_MODE_UNIFORM="uniform",Li.RADIUS_MODE_VARIABLE=Qr,jr.prototype={angleSpacing:Zr,radiusMode:Qr,gap:4,radius:50,startAngle:0,_o48:null,_o6J:null,_mK:function(){this._o48=null,this._o6J=null},getLayoutResult:function(t){var i,e=0,n=0,o=this.graph;t instanceof Object&&(e=t.cx||0,n=t.cy||0,o=t.root||this.graph,i=t.bounds),this._o48={},this._o6J=new qr(this);var r={};return _s(o,this._e4,this)&&(this._o6J._hE&&1==this._o6J._hE.length&&(this._o6J=this._o6J._hE[0]),this._o6J._g7(!0),this._o6J._6Y(e,n,this.startAngle,r,i)),this._mK(),r},_e4:function(t,i){var e;this.isLayoutable(t)&&(e=i?this._o48[i.id]:this._o6J,this._o48[t.id]=new qr(this,t,e))},defaultSize:40,getRadius:function(t,i,e){return this.radius},getNodeSize:function(t,i,e){if(this.graph._9K._o4U){var n=this.graph.getUI(t);if(n)return(n._hG.width+n._hG.height)/2}return this.defaultSize},getGap:function(t,i,e){return this.gap},_3G:function(t,i,e){return this.getNodeSize(t,i,e)+this.getGap(t,i,e)}};var qr=function(t,i,e){this.layouter=t,i&&(this._nO=i,this.id=i.id),e&&(e._iO(this),e._nK=!1,this._mT=e._mT+1)},Rn=2*Math.PI;qr.prototype={_mQ:0,_mS:0,_lX:0,_g6:0,_eA:0,_mT:0,_nK:!0,_nM:0,_iP:0,_hE:null,_nO:null,_iO:function(t){this._hE||(this._hE=[]),this._hE.push(t),t.parent=this},_iQ:function(i){this._mS=(this._mS+i)%Rn,this._hE&&(1!=this._hE.length?(i=this._mS+Math.PI,L(this._hE,function(t){t._iQ(i)},this)):this._hE[0]._iQ(this._mS))},_9Q:0,_8K:function(t){if(this._nO&&(this._iP=this.layouter._3G(this._nO,this._mT,this._nK)/2),!this._hE)return null;this._iP;return this._9Q=this._hE.length,this._9Q<=2||this.layouter.angleSpacing==Jr?function(t){var i=this._9Q,e=2*Math.PI/i,n=0,o=!t&&1<i?-e/2:0;return L(this._hE,function(t){t._mS=o%Rn,o+=e,t._mQ=e;var i=t._g7();n<i&&(n=i)},this),[n,e]}.call(this,t):function(n){var e,o,r,s,h,t=this._hE.length,a=0,l=0;return L(this._hE,function(t){var i=t._g7();i<1&&(i=1),l+=i,a<i&&(a=i,e=t)},this),1<t&&(r={},s=l/t/3,l=o=0,L(this._hE,function(t){var i=t._nM;i<s&&(i=s),r[t.id]=i,l+=i},this),h=Rn/l,L(this._hE,function(t,i){var e=r[t.id]*h;0===i&&(o=n?-e/2:-e),t._mS=o+e/2,t._mQ=e,o+=e},this)),[a,e._mQ]}.call(this,t)},_g7:function(t){var i=this._8K(t);if(!i)return this._nM=this._iP;var e,n=i[0],o=i[1],r=this.layouter.getRadius(this._nO,this._mT);return r<this._iP&&(r=this._iP),this._g6=r,this._iP+n>r&&(r=this._iP+n),n&&1<this._9Q&&o<Math.PI&&(r<(e=n/Math.sin(o/2))&&(r=e)),this._lX=r,this._nM=r+n,this._nO&&this._hE&&this.layouter.radiusMode==Qr&&L(this._hE,function(t){var i=t._nM;1==t._9Q&&(i/=2);var e,n=this._iP+i,o=t._mQ;o&&o<Math.PI&&(i<(e=i/Math.sin(o/2))&&(i=e)),i<n&&(i=n),t._eA=i},this),this._nO&&!t||this._iQ(0),this._nM},_6Y:function(r,s,h,a,l){var _,u;this._nO&&(a[this._nO.id]={x:r,y:s,node:this._nO},l&&l.addRect(r-this._iP/2,s-this._iP/2,this._iP,this._iP)),this._hE&&(this._nO||1!=this._hE.length?(h=h||0,_=this._lX,u=this._g6,L(this._hE,function(t){var i=_;t._eA&&(i=Math.max(u,t._eA));var e=t._mS+h,n=r+i*Math.cos(e),o=s+i*Math.sin(e);t._6Y(n,o,h,a,l)},this)):this._hE[0]._6Y(r,s,h,a,l))}},t(jr,Ur);var ts=function(t){_(this,ts,arguments)};t(ts,rs);var is=function(t,i){(this.node1=t)==(this.node2=i)?(this.isLooped=!0,this._mV=t._m7):this._mV=new ot,this._9S=[],this._iR=nt.EDGE_BUNDLE_EXPANDED};nt.EDGE_BUNDLE_EXPANDED=!0,is.prototype={node1:null,node2:null,_mV:null,_iR:nt.EDGE_BUNDLE_EXPANDED,_9S:null,_iT:null,agentEdge:null,_o6O:function(i,e,n){this._mV.forEach(function(t){if(!n||t.$from==n||t.fromAgent==n)return i.call(e,t)})},_70:0,_71:0,_kI:function(t,i){if(!1===this._mV.add(t))return!1;i==this.node1?this._70++:this._71++,this._o4U?this._1C(t):this._o4U=!0},_eB:function(t,i){if(!1===this._mV.remove(t))return!1;i==this.node1?this._70--:this._71--,this._1C(t),this._mV.forEach(function(t){t._edgeBundleInvalidateFlag=!0,t.__4N=!0},this)},_1C:function(t){this._dCBindableFlag=!0,this._79=!0,t._edgeBundleInvalidateFlag=!0,t.__4N=!0},invalidate:function(){this._dC()},_dC:function(){this._79||(this._79=!0,this._mV.forEach(function(t){t._edgeBundleInvalidateFlag=!0}))},isEmpty:function(){return this._mV.isEmpty()},isPositiveOrder:function(t){return this.node1==t.$from||this.node1==t.fromAgent},canBind:function(t){return t&&this._79&&this.validate(t),1<this._mV.length&&1<this._9S.length},_jK:function(t){return this._9S.indexOf(t)},getYOffset:function(t){return this._iT[t.id]},_5J:function(t){if(this.canBind()){var i={},e=this._9S.length;if(!(e<2)){var n=0;i[(r=this._9S[0]).id]=0;for(var o=1;o<e;o++){var r=this._9S[o];n+=t.getStyle(r,mo.EDGE_BUNDLE_GAP)||ko[mo.EDGE_BUNDLE_GAP],i[r.id]=n}if(!this.isLooped&&n)for(var s=n/2,o=0;o<e;o++)i[(r=this._9S[o]).id]-=s;this._iT=i}}else this._iT={}},_o6Q:function(t){return this._iR!=t&&(this._iR=t,this._dC(),!0)},reverseExpanded:function(){return this._o6Q(!this._iR)},_1I:function(){var i;this._9S.length=0,this._mV.forEach(function(t){if(t.isBundleEnabled()){if(!this.isPositiveOrder(t))return void(i=i||[]).push(t);this._9S.push(t)}},this),i&&(this._9S=i.concat(this._9S))},_fL:function(t){return t==this.agentEdge||!this.canBind()||this._iR},validate:function(t){this._79=!1,this._mV.forEach(function(t){t._edgeBundleInvalidateFlag=!1}),this._dCBindableFlag&&(this._1I(),this._dCBindableFlag=!1),1<this._9S.length&&this.sortBindingEdges instanceof Function&&this.sortBindingEdges(this._9S);var i=this._iR,e=!this.canBind()||i;if(L(this._9S,function(t){t._$v=!0,(t._jSInBundle=e)&&(t.__4N=!0)},this),!e)return this._o49(this._9S[0],t),this.agentEdge._jSInBundle=!0,void(this.agentEdge.__4N=!0);this._o49(null,t),this._5J(t)},_o49:function(t,i){if(t!=this.agentEdge){var e=this.agentEdge;return this.agentEdge=t,i&&i._5C(new bt(this,"agentEdge",t,e)),!0}}},q(is.prototype,{bindableEdges:{get:function(){return this._9S}},edges:{get:function(){return this._mV._kZ}},length:{get:function(){return this._mV?this._mV.length:1}},expanded:{get:function(){return this._iR},set:function(t){if(this._iR==t)return!1;this._iR=t,this._dC()}}});function es(){var d=-1e6;function n(t,i){this.node=t,this.body=i}function t(){this.stack=[],this.popIdx=0}function i(){this.body=null,this.quads=[],this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.isInternal=!1}function p(){var t;return e[f]?((t=e[f]).quads[0]=null,t.quads[1]=null,t.quads[2]=null,t.quads[3]=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0,t.isInternal=!1):(t=new i,e[f]=t),++f,t}function y(t,i){var e=Math.abs(t.x-i.x),n=Math.abs(t.y-i.y);return e<1e-8&&n<1e-8}t.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,i){var e=this.stack[this.popIdx];e?(e.node=t,e.body=i):this.stack[this.popIdx]=new n(t,i),++this.popIdx},pop:function(){if(0<this.popIdx)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}};var u=[],m=new t,e=[],f=0,T=p();return{init:function(t,i){d=i;for(var e=Number.MAX_VALUE,n=Number.MAX_VALUE,o=Number.MIN_VALUE,r=Number.MIN_VALUE,s=t,h=s.length,a=h;a--;){var l=s[a].x,_=s[a].y;l<e&&(e=l),o<l&&(o=l),_<n&&(n=_),r<_&&(r=_)}var u=o-e,c=r-n;for(c<u?r=n+u:o=e+c,f=0,(T=p()).left=e,T.right=o,T.top=n,T.bottom=r,a=h;a--;)!function(t){for(m.reset(),m.push(T,t);!m.isEmpty();){var i=m.pop(),e=i.node,n=i.body;if(e.isInternal){var o=n.x,r=n.y;e.mass=e.mass+n.mass,e.massX=e.massX+n.mass*o,e.massY=e.massY+n.mass*r;var s,h,a=0,l=e.left,_=(e.right+l)/2,u=e.top,c=(e.bottom+u)/2;_<o&&(a+=1,s=l,_+=(l=_)-s),c<r&&(a+=2,h=u,c+=(u=c)-h);var d=e.quads[a];d||((d=p()).left=l,d.top=u,d.right=_,d.bottom=c,e.quads[a]=d),m.push(d,n)}else if(e.body){var f=e.body;if(e.body=null,e.isInternal=!0,y(f,n)){if(e.right-e.left<1e-8)return;do{var E=Math.random(),g=(e.right-e.left)*E,v=(e.bottom-e.top)*E;f.x=e.left+g,f.y=e.top+v}while(y(f,n))}m.push(e,f),m.push(e,n)}else e.body=n}}(s[a])},update:function(t){var i,e,n,o,r=u,s=1,h=0,a=1;for(r[0]=T;s;){var l=r[h],_=l.body;--s,h+=1,_&&_!==t?(e=_.x-t.x,n=_.y-t.y,0===(o=Math.sqrt(e*e+n*n))&&(e=(Math.random()-.5)/50,n=(Math.random()-.5)/50,o=Math.sqrt(e*e+n*n)),(i=d*_.mass*t.mass/(o*o))<-1e3&&(i=-1e3),i/=o,t.fx=t.fx+i*e,t.fy=t.fy+i*n):(l.mass||(l.mass=1),e=l.massX/l.mass-t.x,n=l.massY/l.mass-t.y,0===(o=Math.sqrt(e*e+n*n))&&(e=(Math.random()-.5)/50,n=(Math.random()-.5)/50,o=Math.sqrt(e*e+n*n)),(l.right-l.left)/o<.8?((i=d*l.mass*t.mass/(o*o))<-1e3&&(i=-1e3),i/=o,t.fx=t.fx+i*e,t.fy=t.fy+i*n):(l.quads[0]&&(r[a]=l.quads[0],s+=1,a+=1),l.quads[1]&&(r[a]=l.quads[1],s+=1,a+=1),l.quads[2]&&(r[a]=l.quads[2],s+=1,a+=1),l.quads[3]&&(r[a]=l.quads[3],s+=1,a+=1)))}}}}function ns(t){t.fx-=t.x*this.attractive,t.fy-=t.y*this.attractive}function os(t){var i,e,n,o,r,s,h,a,l,_;0!=t.k&&(i=this._dL,e=t.from,s=(o=(n=t.to).x-e.x)*o+(r=n.y-e.y)*r,a=((h=Math.sqrt(s)||.1)-i)*t.k*this.elastic,l=(a/=h)*o,_=a*r,n.fx-=l,n.fy-=_,e.fx+=l,e.fy+=_)}function rs(t){_(this,rs,arguments)}rs.prototype={appendNodeInfo:function(t,i){i.mass=t.layoutMass||1,i.fx=0,i.fy=0,i.vx=0,i.vy=0},appendEdgeInfo:function(t,i){i.k=t.layoutElasticity||1},setMass:function(t,i){t.layoutMass=i,this.layoutDatas&&this.layoutDatas.nodes&&(t=this.layoutDatas.nodes[t.id])&&(t.mass=i)},setElasticity:function(t,i){t.layoutElasticity=i,this.layoutDatas&&this.layoutDatas.edges&&(t=this.layoutDatas.edges[t.id])&&(t.k=i)},_dL:50,_jY:.5,timeStep:.05,repulsion:100,attractive:.1,elastic:3,_n7:1e3,_lF:function(t){return this._n7+.3*(t-this._n7)},_n5:function(t,i){Date.now();var e=this.layoutDatas.nodes;for(r in e){var n=e[r];i&&(n.x+=Math.random()-.5,n.y+=Math.random()-.5),ns.call(this,n)}var o=this.layoutDatas.groups;if(o)for(var r in o){var s=o[r].children,h=0,a=0;s.forEach(function(t){h+=t.x,a+=t.y}),h/=s.length,a/=s.length;var l=10*this.attractive;s.forEach(function(t){t.fx-=(t.x-h)*l,t.fy-=(t.y-a)*l})}var _=(_=this._nbodyForce)||(this._nbodyForce=es());for(r in _.init(this.layoutDatas.nodesArray,-this.repulsion*this.repulsion*this.repulsion),e)_.update(e[r]);if(this.elastic){var u=this.layoutDatas.edges;for(r in u)os.call(this,u[r])}return this._n9(t)},isFixed:null,_n9:function(t){var i,e=this.layoutDatas.minEnergy,n=this.layoutDatas.nodes,t=this.timeStep,o=0,r=this._jY;for(i in n){var s,h,a,l,_=n[i];this.isFixed&&this.isFixed(_.node)?_.vx=_.vy=0:(s=_.fx/_.mass,h=_.fy/_.mass,a=_.vx+=s*t,l=_.vy+=h*t,_.x+=a*t,_.y+=l*t,o<e&&(o+=2*(a*a+l*l)),_.vx*=r,_.vy*=r),_.fx=0,_.fy=0}return e<=(this.layoutDatas.currentEnergy=o)}},t(rs,Xr),Si.SpringLayouter=rs;var ss=function(t){this.locations=t};ss.prototype={oldLocations:null,_g9:null,duration:700,animationType:mi.easeOutStrong,_8M:function(t){if(this._g9=t,this.oldLocations={},t)for(var i in t){var e=t[i].node;this.oldLocations[i]={x:e.x,y:e.y}}},setLocation:function(t,i,e){t.setLocation(i,e)},forEach:function(t,i){for(var e in this.locations){var n=this.oldLocations[e],o=this.locations[e];t.call(i,n,o)}},_lY:function(r,t,i,e){this.forEach(function(t,i){var e=i.node,n=t.x+(i.x-t.x)*r,o=t.y+(i.y-t.y)*r;this.setLocation(e,n,o)},this)},stop:function(){this._o3nimate&&this._o3nimate._nA()},start:function(t){this._o3nimate?(this._o3nimate._nA(),this._o3nimate._k1=this.duration,this._o3nimate._g3Type=this.animationType,this._o3nimate._onfinish=this._onfinish):this._o3nimate=new Ti(this._lY,this,this.duration,this.animationType),this._o3nimate._mH(t)}},q(ss.prototype,{locations:{get:function(){return this._g9},set:function(t){this._g9!=t&&this._8M(t)}}});function hs(n,t){var o,r=new ot;return n.forEach(function(t){var i,e;t instanceof eo&&(e=!1,t.forEachInEdge(function(t){if(n.contains(t)&&!t.isLooped())return!(e=!0)}),e?!o&&(i=!1,t.forEachOutEdge(function(t){if(n.contains(t)&&!t.isLooped())return!(i=!0)}),i)&&(o=t):r.add(t))}),r.isEmpty()&&o&&r.add(o),r}function as(i,e,n,o,r,s){if(e instanceof Gt)return i(e,n,o,r,s),e;if(e instanceof Qo){var h=new ot;e._mEModel.forEach(function(t){e.isVisible(t)&&(t._jR()&&t._iR&&t.hasChildren()?t.$location&&(t.$location.invalidateFlag=!1):h.add(t))}),e=h}else if(Array.isArray(e))e=new ot(e);else if(!(e instanceof ot))throw new Error("roots error");return(e=hs(e)).forEach(function(t){i(t,n,o,r,s)}),e}var ls=function(t,i,e,n,o){return as(us,t,i,e,n,o)},_s=function(t,i,e,n,o){return as(ds,t,i,e,n,o)};uo.prototype.forEachByTopoDepthFirstSearch=function(t,i,e,n){ls(this,t,i,e,n)},uo.prototype.forEachByTopoBreadthFirstSearch=function(t,i,e,n){t instanceof Object&&1==arguments.length&&(i=t.scope),_s(this,t,i,e,n)},Si.forEachByTopoDepthFirstSearch=ls,Si.forEachByTopoBreadthFirstSearch=_s;var us=function(t,i,e,n,o,r,s,h){!function i(e,n,o,r,s,h,a,t){e._marker=h,r||n.call(o,e,t,a),cs(e,function(t){i(t,n,o,r,s,h,a+1,e)},t,s,h),r&&n.call(o,e,t,a)}(t,i,e,n,o,{},0)};function cs(e,n,o,t,r){t?e.forEachEdge(function(t){var i=t.otherNode(e);i!=o&&i._marker!=r&&n(i,e)},this,!0):e.forEachOutEdge(function(t){var i=t.toAgent;i!=o&&i._marker!=r&&n(i,e)})}var ds=function(t,i,e,n,o){!function t(i,n,o,r,s,h,a){var l,_=i.length;i.forEach(function(t,i){var e=t.v;e._marker=h,r||n.call(o,e,t._from,a,i,_),cs(e,function(t){l=l||[],t._marker=h,l.push({v:t,_from:e})},e,s,h)}),l&&t(l,n,o,r,s,h,a+1),r&&i.forEach(function(t,i){n.call(o,t.v,t._from,a,i,_)})}([{v:t}],i,e,n,o,{},0)};Si.toColor=J,Si.log=function(t){l.console&&console.log.apply(console,arguments)},Si.error=et,Si.trace=function(t){l.console&&console.trace(t)},Si.isIE=m,Si.isOpera=y,Si.isWebkit=b,Si.isGecko=D,Si.isFirefox=C,Si.isSafari=x,Si.isChrome=R,Si.isMac=P,Si.DefaultStyles=ko,Si.Defaults=nt,Si.Styles=mo,Si.Consts=Li,Si.Graphs=qe,Si.Graph=Qo,Si.BaseUI=Eo,Si.ElementUI=Co,Si.NodeUI=Go,Si.EdgeUI=Bo,Si.LabelUI=No,Si.ImageUI=xo,Si.Shapes=ro,Si.Path=Ye,Si.Gradient=Se,Si.InteractionEvent=Fr,Si.Element=Wn,Si.Node=eo,Si.Edge=Qn,Si.GraphModel=uo,Si.EdgeBundle=is,Si.TreeLayouter=Wr,Si.name="Qunee for HTML5";Si.version="2.7.8.3",Si.about="Qunee - Diagramming Components for HTML5/Canvas",Si.copyright="Copyright © 2020 Qunee.com",Si.css=zt;return Si.IDrawable={draw:function(t,i){}},Si.publishDate="24/12/2020",Si},window,document,undefined);